/* w2ui 1.1 (c) http://w2ui.com, vitmalina@gmail.com */
var w2ui=w2ui||{};var w2utils=function(){function t(e){var t=/^[-]?[0-9]+$/;return t.test(e)}function n(e){var t=/^[-]?[0-9]*[\.]?[0-9]+$/;return t.test(e)}function r(e){var t=/^[\$\€\£\¥]?[-]?[0-9]*[\.]?[0-9]+$/;return t.test(e)}function i(e){var t=/^[a-fA-F0-9]+$/;return t.test(e)}function s(e){var t=/^[a-zA-Z0-9_-]+$/;return t.test(e)}function o(e){var t=/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+.[a-zA-Z]{2,4}$/;return t.test(e)}function u(e){if(typeof e=="undefined"||e==null)return false;if(e.split("/").length!=3)return false;var t=e.split("/")[0];var n=e.split("/")[1];var r=e.split("/")[2];var i=new Date(r,t-1,n);if(i.getMonth()+1!=t||i.getDate()!=n||i.getFullYear()!=r)return false;return true}function a(e){if(String(e)=="undefined")return false;var t;e=e.toUpperCase();if(e.indexOf("PM")>=0||e.indexOf("AM")>=0)t=12;else t=23;e=$.trim(e.replace("AM",""));e=$.trim(e.replace("PM",""));var n=e.split(":");if(n.length!=2){return false}if(n[0]==""||parseInt(n[0])<0||parseInt(n[0])>t||!this.isInt(n[0])){return false}if(n[1]==""||parseInt(n[1])<0||parseInt(n[1])>59||!this.isInt(n[1])){return false}return true}function f(e,t){var n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var r=["January","February","March","April","May","June","July","August","September","October","November","December"];if(typeof t=="undefined")t=this.settings.date_format;if(typeof e=="undefined"||e==""||e==null)return"";var i=new Date(e);if(w2utils.isInt(e))i=new Date(Number(e));var s=String(e).split("-");if(s.length==3)i=new Date(s[0],Number(s[1])-1,s[2]);var s=String(e).split("/");if(s.length==3)i=new Date(s[2],Number(s[0])-1,s[1]);if(i=="Invalid Date")return"";var o=i.getFullYear();var u=i.getMonth();var a=i.getDate();var f=t.toLowerCase().replace("yyyy",o).replace("mm",u+1).replace("dd",a).replace("mon",n[u]).replace("month",r[u]);return f}function l(e){var t=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];if(e==""||typeof e=="undefined"||e==null)return"";if(w2utils.isInt(e))e=Number(e);var n=new Date(e);if(w2utils.isInt(e))n=new Date(Number(e));var r=String(e).split("-");if(r.length==3)n=new Date(r[0],Number(r[1])-1,r[2]);var r=String(e).split("/");if(r.length==3)n=new Date(r[2],Number(r[0])-1,r[1]);if(n=="Invalid Date")return"";var i=new Date;var s=new Date;s.setTime(s.getTime()-864e5);var o=t[n.getMonth()]+" "+n.getDate()+", "+n.getFullYear();var u=t[i.getMonth()]+" "+i.getDate()+", "+i.getFullYear();var a=t[s.getMonth()]+" "+s.getDate()+", "+s.getFullYear();var f=n.getHours()-(n.getHours()>12?12:0)+":"+(n.getMinutes()<10?"0":"")+n.getMinutes()+" "+(n.getHours()>=12?"pm":"am");var l=n.getHours()-(n.getHours()>12?12:0)+":"+(n.getMinutes()<10?"0":"")+n.getMinutes()+":"+(n.getSeconds()<10?"0":"")+n.getSeconds()+" "+(n.getHours()>=12?"pm":"am");var c=o;if(o==u)c=f;if(o==a)c="Yesterday";return'<span title="'+o+" "+l+'">'+c+"</span>"}function c(e){if(e==""||typeof e=="undefined"||e==null)return"";if(w2utils.isInt(e))e=Number(e);var t=new Date(e);if(w2utils.isInt(e))t=new Date(Number(e));var n=String(e).split("-");if(n.length==3)t=new Date(n[0],Number(n[1])-1,n[2]);var n=String(e).split("/");if(n.length==3)t=new Date(n[2],Number(n[0])-1,n[1]);if(t=="Invalid Time")return"";var r=new Date;var i=(r.getTime()-t.getTime())/1e3;var s="";var o="";if(i<60){s=Math.floor(i);o="sec"}else if(i<60*60){s=Math.floor(i/60);o="min"}else if(i<24*60*60){s=Math.floor(i/60/60);o="hour"}else if(i<30*24*60*60){s=Math.floor(i/24/60/60);o="day"}else if(i<12*30*24*60*60){s=Math.floor(i/30/24/60/60);o="month"}else if(i>=12*30*24*60*60){s=Math.floor(i/12/30/24/60/60);o="year"}return s+" "+o+(s>1?"s":"")}function h(e){if(e==null)return e;switch(typeof e){case"number":break;case"string":e=$.trim(String(e).replace(/(<([^>]+)>)/ig,""));break;case"object":for(var t in e)e[t]=this.stripTags(e[t]);break}return e}function p(e){if(e==null)return e;switch(typeof e){case"number":break;case"string":e=String(e).replace(/&/g, "&amp;").replace(/>/g, "&gt;").replace(/</g, "&lt;").replace(/"/g, "&quot;");break;case"object":for(var t in e)e[t]=this.encodeTags(e[t]);break}return e}function d(e){function c(e){var e=e.replace(/\r\n/g,"\n");var t="";for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<128){t+=String.fromCharCode(r)}else if(r>127&&r<2048){t+=String.fromCharCode(r>>6|192);t+=String.fromCharCode(r&63|128)}else{t+=String.fromCharCode(r>>12|224);t+=String.fromCharCode(r>>6&63|128);t+=String.fromCharCode(r&63|128)}}return t}var t="";var n,r,i,s,o,u,a;var f=0;var l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e=c(e);while(f<e.length){n=e.charCodeAt(f++);r=e.charCodeAt(f++);i=e.charCodeAt(f++);s=n>>2;o=(n&3)<<4|r>>4;u=(r&15)<<2|i>>6;a=i&63;if(isNaN(r)){u=a=64}else if(isNaN(i)){a=64}t=t+l.charAt(s)+l.charAt(o)+l.charAt(u)+l.charAt(a)}return t}function v(e){function c(e){var t="";var n=0;var r=c1=c2=0;while(n<e.length){r=e.charCodeAt(n);if(r<128){t+=String.fromCharCode(r);n++}else if(r>191&&r<224){c2=e.charCodeAt(n+1);t+=String.fromCharCode((r&31)<<6|c2&63);n+=2}else{c2=e.charCodeAt(n+1);c3=e.charCodeAt(n+2);t+=String.fromCharCode((r&15)<<12|(c2&63)<<6|c3&63);n+=3}}return t}var t="";var n,r,i;var s,o,u,a;var f=0;var l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(f<e.length){s=l.indexOf(e.charAt(f++));o=l.indexOf(e.charAt(f++));u=l.indexOf(e.charAt(f++));a=l.indexOf(e.charAt(f++));n=s<<2|o>>4;r=(o&15)<<4|u>>2;i=(u&3)<<6|a;t=t+String.fromCharCode(n);if(u!=64){t=t+String.fromCharCode(r)}if(a!=64){t=t+String.fromCharCode(i)}}t=c(t);return t}function m(e,t,n,r){function u(e,t,n){if(!$.browser.webkit&&typeof n!="undefined")t=n;return";"+e+": "+t+"; -webkit-"+e+": "+t+"; -moz-"+e+": "+t+"; "+"-ms-"+e+": "+t+"; -o-"+e+": "+t+";"}var i=$(e).width();var s=$(e).height();var o=.5;if(!e||!t){$.error("Cannot do transition when one of the divs is null");return}e.parentNode.style.cssText+=u("perspective","700px")+"; overflow: hidden;";e.style.cssText+="; position: absolute; z-index: 1019; "+u("backface-visibility","hidden");t.style.cssText+="; position: absolute; z-index: 1020; "+u("backface-visibility","hidden");switch(n){case"slide-left":e.style.cssText+="overflow: hidden; "+u("transform","translate3d(0, 0, 0)","translate(0, 0)");t.style.cssText+="overflow: hidden; "+u("transform","translate3d("+i+"px, 0, 0)","translate("+i+"px, 0)");$(t).show();window.setTimeout(function(){t.style.cssText+=u("transition",o+"s")+";"+u("transform","translate3d(0, 0, 0)","translate(0, 0)");e.style.cssText+=u("transition",o+"s")+";"+u("transform","translate3d(-"+i+"px, 0, 0)","translate(-"+i+"px, 0)")},1);break;case"slide-right":e.style.cssText+="overflow: hidden; "+u("transform","translate3d(0, 0, 0)","translate(0, 0)");t.style.cssText+="overflow: hidden; "+u("transform","translate3d(-"+i+"px, 0, 0)","translate(-"+i+"px, 0)");$(t).show();window.setTimeout(function(){t.style.cssText+=u("transition",o+"s")+"; "+u("transform","translate3d(0px, 0, 0)","translate(0px, 0)");e.style.cssText+=u("transition",o+"s")+"; "+u("transform","translate3d("+i+"px, 0, 0)","translate("+i+"px, 0)")},1);break;case"slide-down":e.style.cssText+="overflow: hidden; z-index: 1; "+u("transform","translate3d(0, 0, 0)","translate(0, 0)");t.style.cssText+="overflow: hidden; z-index: 0; "+u("transform","translate3d(0, 0, 0)","translate(0, 0)");$(t).show();window.setTimeout(function(){t.style.cssText+=u("transition",o+"s")+"; "+u("transform","translate3d(0, 0, 0)","translate(0, 0)");e.style.cssText+=u("transition",o+"s")+"; "+u("transform","translate3d(0, "+s+"px, 0)","translate(0, "+s+"px)")},1);break;case"slide-up":e.style.cssText+="overflow: hidden; "+u("transform","translate3d(0, 0, 0)","translate(0, 0)");t.style.cssText+="overflow: hidden; "+u("transform","translate3d(0, "+s+"px, 0)","translate(0, "+s+"px)");$(t).show();window.setTimeout(function(){t.style.cssText+=u("transition",o+"s")+"; "+u("transform","translate3d(0, 0, 0)","translate(0, 0)");e.style.cssText+=u("transition",o+"s")+"; "+u("transform","translate3d(0, 0, 0)","translate(0, 0)")},1);break;case"flip-left":e.style.cssText+="overflow: hidden; "+u("-transform","rotateY(0deg)");t.style.cssText+="overflow: hidden; "+u("transform","rotateY(-180deg)");$(t).show();window.setTimeout(function(){t.style.cssText+=u("transition",o+"s")+"; "+u("transform","rotateY(0deg)");e.style.cssText+=u("transition",o+"s")+"; "+u("transform","rotateY(180deg)")},1);break;case"flip-right":e.style.cssText+="overflow: hidden; "+u("transform","rotateY(0deg)");t.style.cssText+="overflow: hidden; "+u("transform","rotateY(180deg)");$(t).show();window.setTimeout(function(){t.style.cssText+=u("transition",o+"s")+"; "+u("transform","rotateY(0deg)");e.style.cssText+=u("transition",o+"s")+"; "+u("transform","rotateY(-180deg)")},1);break;case"flip-down":e.style.cssText+="overflow: hidden; "+u("transform","rotateX(0deg)");t.style.cssText+="overflow: hidden; "+u("transform","rotateX(180deg)");$(t).show();window.setTimeout(function(){t.style.cssText+=u("transition",o+"s")+"; "+u("transform","rotateX(0deg)");e.style.cssText+=u("transition",o+"s")+"; "+u("transform","rotateX(-180deg)")},1);break;case"flip-up":e.style.cssText+="overflow: hidden; "+u("transform","rotateX(0deg)");t.style.cssText+="overflow: hidden; "+u("transform","rotateX(-180deg)");$(t).show();window.setTimeout(function(){t.style.cssText+=u("transition",o+"s")+"; "+u("transform","rotateX(0deg)");e.style.cssText+=u("transition",o+"s")+"; "+u("transform","rotateX(180deg)")},1);break;case"pop-in":e.style.cssText+="overflow: hidden; "+u("transform","translate3d(0, 0, 0)","translate(0, 0)");t.style.cssText+="overflow: hidden; "+u("transform","translate3d(0, 0, 0)","translate(0, 0)")+"; "+u("transform","scale(.8)")+"; opacity: 0;";$(t).show();window.setTimeout(function(){t.style.cssText+=u("transition",o+"s")+"; "+u("transform","scale(1)")+"; opacity: 1;";e.style.cssText+=u("transition",o+"s")+";"},1);break;case"pop-out":e.style.cssText+="overflow: hidden; "+u("transform","translate3d(0, 0, 0)","translate(0, 0)")+"; "+u("transform","scale(1)")+"; opacity: 1;";t.style.cssText+="overflow: hidden; "+u("transform","translate3d(0, 0, 0)","translate(0, 0)")+"; opacity: 0;";$(t).show();window.setTimeout(function(){t.style.cssText+=u("transition",o+"s")+"; opacity: 1;";e.style.cssText+=u("transition",o+"s")+"; "+u("transform","scale(1.7)")+"; opacity: 0;"},1);break;default:e.style.cssText+="overflow: hidden; "+u("transform","translate3d(0, 0, 0)","translate(0, 0)");t.style.cssText+="overflow: hidden; "+u("transform","translate3d(0, 0, 0)","translate(0, 0)")+"; opacity: 0;";$(t).show();window.setTimeout(function(){t.style.cssText+=u("transition",o+"s")+"; opacity: 1;";e.style.cssText+=u("transition",o+"s")},1);break}setTimeout(function(){if(n=="slide-down"){$(e).css("z-index","1019");$(t).css("z-index","1020")}if(t){$(t).css({opacity:"1","-webkit-transition":"","-moz-transition":"","-ms-transition":"","-o-transition":"","-webkit-transform":"","-moz-transform":"","-ms-transform":"","-o-transform":"","-webkit-backface-visibility":"","-moz-backface-visibility":"","-ms-backface-visibility":"","-o-backface-visibility":""})}if(e){$(e).css({opacity:"1","-webkit-transition":"","-moz-transition":"","-ms-transition":"","-o-transition":"","-webkit-transform":"","-moz-transform":"","-ms-transform":"","-o-transform":"","-webkit-backface-visibility":"","-moz-backface-visibility":"","-ms-backface-visibility":"","-o-backface-visibility":""});if(e.parentNode)$(e.parentNode).css({"-webkit-perspective":"","-moz-perspective":"","-ms-perspective":"","-o-perspective":""})}if(typeof r=="function")r()},o*1e3)}function g(e,t){var n={left:parseInt($(e).css("border-left-width"))||0,right:parseInt($(e).css("border-right-width"))||0,top:parseInt($(e).css("border-top-width"))||0,bottom:parseInt($(e).css("border-bottom-width"))||0};var r={left:parseInt($(e).css("margin-left"))||0,right:parseInt($(e).css("margin-right"))||0,top:parseInt($(e).css("margin-top"))||0,bottom:parseInt($(e).css("margin-bottom"))||0};var i={left:parseInt($(e).css("padding-left"))||0,right:parseInt($(e).css("padding-right"))||0,top:parseInt($(e).css("padding-top"))||0,bottom:parseInt($(e).css("padding-bottom"))||0};switch(t){case"top":return n.top+r.top+i.top;case"bottom":return n.bottom+r.bottom+i.bottom;case"left":return n.left+r.left+i.left;case"right":return n.right+r.right+i.right;case"width":return n.left+r.left+n.right+r.right+i.right+i.right+parseInt($(e).width());case"height":return n.top+r.top+n.bottom+r.bottom+i.bottom+i.bottom+parseInt($(e).height());case"+width":return n.left+r.left+n.right+r.right+i.right+i.right;case"+height":return n.top+r.top+n.bottom+r.bottom+i.bottom+i.bottom}}var e={settings:{date_format:"Mon dd, yyyy",time_format:"hh:mi pm"},isInt:t,isFloat:n,isMoney:r,isHex:i,isAlphaNumeric:s,isEmail:o,isDate:u,isTime:a,age:c,formatDate:f,date:l,stripTags:h,encodeTags:p,base64encode:d,base64decode:v,transition:m,getSize:g};return e}();$.w2event={on:function(e,t){if(!$.isPlainObject(e))e={type:e};e=$.extend({type:null,execute:"before",target:null,onComplete:null},e);if(typeof e.type=="undefined"){$.error("You must specify event type when calling .on() method of "+this.name);return}if(typeof t=="undefined"){$.error("You must specify event handler function when calling .on() method of "+this.name);return}this.handlers.push({event:e,handler:t})},off:function(e,t){if(!$.isPlainObject(e))e={type:e};e=$.extend({},{type:null,execute:"before",target:null,onComleted:null},e);if(typeof e.type=="undefined"){$.error("You must specify event type when calling .off() method of "+this.name);return}if(typeof t=="undefined"){t=null}var n=[];for(var r in this.handlers){var i=this.handlers[r];if((i.event.type==e.type||e.type=="*")&&(i.event.target==e.target||e.target==null)&&(i.handler==t||t==null)){}else{n.push(i)}}this.handlers=n},trigger:function(e){var e=$.extend({type:null,phase:"before",target:null,stop:false},e);if(typeof e.target=="undefined")e.target=null;for(var t=this.handlers.length-1;t>=0;t--){var n=this.handlers[t];if((n.event.type==e.type||n.event.type=="*")&&(n.event.target==e.target||n.event.target==null)&&(n.event.execute==e.phase||n.event.execute=="*"||n.event.phase=="*")){var r=n.handler.call(this,e.target,e);if($.isPlainObject(r)){$.extend(e,r);if(e.stop===true)return e}}}if(e.phase=="before"&&typeof this["on"+e.type.substr(0,1).toUpperCase()+e.type.substr(1)]=="function"){var r=this["on"+e.type.substr(0,1).toUpperCase()+e.type.substr(1)].call(this,e.target,e);if($.isPlainObject(r)){$.extend(e,r);if(e.stop===true)return e}}if(typeof e.object!="undefined"&&e.object!=null&&e.phase=="before"&&typeof e.object["on"+e.type.substr(0,1).toUpperCase()+e.type.substr(1)]=="function"){var r=e.object["on"+e.type.substr(0,1).toUpperCase()+e.type.substr(1)].call(this,e.target,e);if($.isPlainObject(r)){$.extend(e,r);if(e.stop===true)return e}}if(e.phase=="after"&&e.onComplete!=null)e.onComplete.call(this,e);return e}};(function(){$.fn.w2render=function(e){if($(this).length>0){if(typeof e=="string"&&w2ui[e])w2ui[e].render($(this)[0]);if(typeof e=="object")e.render($(this)[0])}};$.fn.w2destroy=function(e){if(typeof e=="string"&&w2ui[e])w2ui[e].destroy();if(typeof e=="object")e.destroy()};$.fn.w2lite=function(){};$.fn.w2tag=function(e,t){if(!$.isPlainObject(t))t={};if(!$.isPlainObject(t.css))t.css={};if(typeof t["class"]=="undefined")t["class"]="";if($(this).length==0){$(".global-tag").each(function(e,t){$("#"+$(t).data("tagID")).removeClass($(t).data("options")["class"]);clearInterval($(t).data("timer"));$(t).remove()});return}return $(this).each(function(n,r){var i=r.id;if(e==""||e==null||typeof e=="undefined"){$("#global-tag-"+i).css("opacity",0);setTimeout(function(){clearInterval($("#global-tag-"+i).data("timer"));$("#global-tag-"+i).remove()},300)}else{clearInterval($("#global-tag-"+i).data("timer"));$("#global-tag-"+i).remove();$("body").append('<div id="global-tag-'+i+'" class="global-tag" '+'	style="position: absolute; z-index: 1100; opacity: 0; -webkit-transition: opacity .3s; -moz-transition: opacity .3s; -ms-transition: opacity .3s; -o-transition: opacity .3s"></div>');var s=setInterval(function(){if($(r).length==0||$(r).offset().left==0&&$(r).offset().top==0){clearInterval($("#global-tag-"+i).data("timer"));u();return}if($("#global-tag-"+i).data("position")!=$(r).offset().left+r.offsetWidth+"x"+$(r).offset().top){$("#global-tag-"+i).css({"-webkit-transition":".2s","-moz-transition":".2s","-ms-transition":".2s","-o-transition":".2s",left:$(r).offset().left+r.offsetWidth+"px",top:$(r).offset().top+"px"}).data("position",$(r).offset().left+r.offsetWidth+"x"+$(r).offset().top)}},100);setTimeout(function(){if(!$(r).offset())return;$("#global-tag-"+i).css({opacity:"1",left:$(r).offset().left+r.offsetWidth+"px",top:$(r).offset().top+"px"}).html('<div style="margin-top: -2px 0px 0px -2px; white-space: nowrap;"> <div class="bubble-tag">'+e+"</div> </div>").data("text",e).data("tagID",i).data("options",t).data("position",$(r).offset().left+r.offsetWidth+"x"+$(r).offset().top).data("timer",s);$(r).off("keypress",u).on("keypress",u).off("change",u).on("change",u).css(t.css).addClass(t["class"]);if(typeof t.onShow=="function")t.onShow()},1);var o="";if($(r).length>0)o=$(r)[0].style.cssText;function u(){if($("#global-tag-"+i).length<=0)return;clearInterval($("#global-tag-"+i).data("timer"));$("#global-tag-"+i).remove();$(r).off("keypress",u).removeClass(t["class"]);if($(r).length>0)$(r)[0].style.cssText=o;if(typeof t.onHide=="function")t.onHide()}}})};$.fn.w2overlay=function(e,t){var n=false;if(this.length==0||e==""){$("#w2ui-overlay").remove();return}if($("#w2ui-overlay").length==0){$("body").append('<div id="w2ui-overlay" class="w2ui-overlay" style="display: none;"><div></div></div>');n=true}if(!$.isPlainObject(t))t={};if(!$.isPlainObject(t.css))t.css={};var r=this;var i=$("#w2ui-overlay div");i.css(t.css).html(e);if(typeof t["class"]!="undefined")i.addClass(t["class"]);if(typeof t.top=="undefined")t.top=0;if(typeof t.left=="undefined")t.left=0;var i=$("#w2ui-overlay");i.css({display:"block",left:$(r).offset().left+t.left+"px",top:$(r).offset().top+w2utils.getSize($(r),"height")+3+t.top+"px"}).fadeIn("fast").data("position",$(r).offset().left+"x"+($(r).offset().top+r.offsetHeight)).on("click",function(){i.data("ignoreClick",true)});if(!n)i.data("ignoreClick",true);var s=function(){if(typeof t.onHide=="function")t.onHide();var e=$("#w2ui-overlay");if(e.data("ignoreClick")===true){e.data("ignoreClick",false);return}e.remove();$(document).off("click",s)};setTimeout(function(){if(n)$(document).on("click",s);if(typeof t.onShow=="function")t.onShow()},1)}})();(function(){var w2grid=function(e){this.name=null;this.box=null;this.header="";this.url="";this.columns=[];this.columnGroups=[];this.records=[];this.searches=[];this.searchData=[];this.sortData=[];this.postData={};this.toolbar={};this.show={header:false,toolbar:false,footer:false,columnHeaders:true,lineNumbers:false,expandColumn:false,selectColumn:false,emptyRecords:true,toolbarReload:true,toolbarColumns:true,toolbarSearch:true,toolbarAdd:false,toolbarDelete:false,toolbarSave:false},this.fixedBody=true;this.fixedRecord=true;this.multiSearch=true;this.multiSelect=true;this.multiSort=true;this.keyboard=true;this.total=0;this.page=0;this.recordsPerPage=50;this.style="";this.isLoaded=false;this.width=null;this.height=null;this.msgDelete="Are you sure you want to delete selected record(s)?";this.msgNoData="There is no data.";this.layout="table";this.tmpl="";this.tmpl_start="";this.tmpl_end="";this.tmpl_group="";this.tmpl_empty='<div style="padding: 8px;">~msg~</div>';this.onRequest=null;this.onLoad=null;this.onAdd=null;this.onDelete=null;this.onSave=null;this.onSelect=null;this.onUnselect=null;this.onClick=null;this.onDblClick=null;this.onSort=null;this.onSearch=null;this.onChange=null;this.onExpand=null;this.onRender=null;this.onRefresh=null;this.onResize=null;this.onDestroy=null;this.recid=null;this.searchOpened=false;this.last_field="all";this.last_caption="All Fields";this.last_logic="OR";this.last_search="";this.last_multi=false;this.last_scrollTop=0;this.last_scrollLeft=0;this.last_selected=[];this.last_sortData=null;this.last_sortCount=0;this.transition=false;this.request_xhr=null;this.isIOS=navigator.userAgent.toLowerCase().indexOf("iphone")!=-1||navigator.userAgent.toLowerCase().indexOf("ipod")!=-1||navigator.userAgent.toLowerCase().indexOf("ipad")!=-1?true:false;$.extend(true,this,e)};$.fn.w2grid=function(e){if(typeof e==="object"||!e){if(!e||typeof e.name=="undefined"){console.log('ERROR: The parameter "name" is required but not supplied in $().w2grid().');return}if(typeof w2ui[e.name]!="undefined"){console.log('ERROR: The parameter "name" is not unique. There are other objects already created with the same name (obj: '+e.name+").");return}var t=e.columns;var n=e.columnGroups;var r=e.records;var i=e.searches;var s=e.searchData;var o=e.sortData;var u=e.postData;var a=e.toolbar;var f=new w2grid(e);$.extend(f,{postData:{},records:[],columns:[],searches:[],toolbar:{},sortData:[],searchData:[],handlers:[]});if(f.onExpand!=null)f.show.expandColumn=true;$.extend(true,f.toolbar,a);for(var l in t)f.columns[l]=$.extend({},t[l]);for(var l in n)f.columnGroups[l]=$.extend({},n[l]);for(var l in i)f.searches[l]=$.extend({},i[l]);for(var l in s)f.searchData[l]=$.extend({},s[l]);for(var l in o)f.sortData[l]=$.extend({},o[l]);for(var l in u)f.postData[l]=$.extend({},u[l]);for(var c in r){if(r[c].recid==null||typeof r[c].recid=="undefined"){console.log("ERROR: Cannot add records without recid. (obj: "+f.name+")");return}f.records[c]=$.extend({},r[c])}if(f.records.length>0)f.total=f.records.length;f.initToolbar();if($(this).length!=0){f.render($(this)[0])}w2ui[f.name]=f;return f}else if(typeof $(this).data("w2name")!="undefined"){var h=w2ui[$(this).data("w2name")];h[e].apply(h,Array.prototype.slice.call(arguments,1));return this}else{console.log("ERROR: Method "+e+" does not exist on jQuery.w2grid")}};w2grid.prototype={add:function(e){if(!$.isArray(e))e=[e];for(var t in e){if(e[t].recid==null||typeof e[t].recid=="undefined"){console.log("ERROR: Cannot add record without recid. (obj: "+this.name+")");continue}this.records.push(e[t])}this.total=this.records.length;if(this.url==""){this.localSearch();this.localSort()}this.refresh()},find:function(e){if(typeof e=="undefined"||e==null)e={};var t=[];for(var n=0;n<this.records.length;n++){var r=true;for(var i in e)if(e[i]!=this.records[n][i])r=false;if(r)t.push(this.records[n].recid)}return t},set:function(e,t){var n=this.getIndex(e);var t;$.extend(this.records[n],t);var r=$("#grid_"+this.name+"_rec_"+e);if(r.length!=0){var i=r.attr("line");var s=0;while(true){var o=this.columns[s];if(o.hidden){s++;if(typeof this.columns[s]=="undefined")break;else continue}var u="";if(String(o.field).indexOf(".")>-1){var a=String(o.field).split(".");u=this.records[n][a[0]];if(typeof u=="object"&&u!=null){u=u[a[1]]}}else{u=this.records[n][o.field]}if(typeof o.render!="undefined"){if(typeof o.render=="function")u=o.render.call(this,this.records[n],n);if(typeof o.render=="object")u=o.render[this.records[n][o.field]]}if(u==null||typeof u=="undefined")u="";if(typeof o.render=="string"){switch(o.render.toLowerCase()){case"url":var f=u.indexOf("/",8);u='<a href="'+u+'" target="_blank">'+u.substr(0,f)+"</a>";break;case"repeat":if(n>0&&this.records[n][o.field]==this.records[n-1][o.field]&&this.records[n][o.field]!=""){u="-- // --"}break}}$(r).find("#grid_"+this.name+"_cell_"+i+"_"+s+" > div").html(u);s++;if(typeof this.columns[s]=="undefined")break}}},get:function(e){for(var t=0;t<this.records.length;t++){if(this.records[t].recid==e)return this.records[t]}return null},getIndex:function(e){for(var t=0;t<this.records.length;t++){if(this.records[t].recid==e)return t}return null},remove:function(){var e=0;for(var t in arguments){for(var n=this.records.length-1;n>=0;n--){if(this.records[n].recid==arguments[t]){this.records.splice(n,1);e++}}}if(this.url==""){this.total=this.records.length;this.localSearch();this.localSort()}this.refresh();return e},clear:function(){this.records=[];this.total=0;this.refresh()},localSort:function(){var e=this;this.records.sort(function(t,n){if(t.summary&&n.summary){if(t.recid>n.recid)return 1;if(t.recid<=n.recid)return-1}var r=0;for(var i in e.sortData){var s=t[e.sortData[i].field];var o=n[e.sortData[i].field];if(typeof s=="string")s=$.trim(s.toLowerCase());if(typeof o=="string")o=$.trim(o.toLowerCase());if(s>o)r=e.sortData[i].direction=="asc"?1:-1;if(s<o)r=e.sortData[i].direction=="asc"?-1:1;if(typeof s!="object"&&typeof o=="object")r=-1;if(typeof o!="object"&&typeof s=="object")r=1;if(r!=0)break}return r});this.last_sortCount=this.records.length},localSearch:function(){function p(t){for(var n in e.searchData){if(e.searchData[n].field==t)return e.searchData[n]}return null}var e=this;this.total=this.records.length;for(var t in this.records){this.records[t].hidden=false}if(this.searchData.length>0){this.total=0;for(var t in this.records){var n=this.records[t];var r=0;for(var i in this.searches){var s=this.searches[i];var o=p(s.field);if(o==null)continue;var u=String(n[s.field]).toLowerCase();if(typeof o.value!="undefined"){if(!$.isArray(o.value)){var a=String(o.value).toLowerCase()}else{var a=o.value[0];var f=o.value[1]}}switch(o.operator){case"is":if(n[s.field]==o.value)r++;if(s.type=="text"&&u==a)r++;if(s.type=="date"){var l=new Date(u);var c=new Date(a);d0=Date.UTC(l.getFullYear(),l.getMonth(),l.getDate());d1=Date.UTC(c.getFullYear(),c.getMonth(),c.getDate());if(d0==d1)r++}break;case"between":if(s.type=="int"&&parseInt(n[s.field])>=parseInt(a)&&parseInt(n[s.field])<=parseInt(f))r++;if(s.type=="float"&&parseFloat(n[s.field])>=parseFloat(a)&&parseFloat(n[s.field])<=parseFloat(f))r++;if(s.type=="date"){var l=new Date(u);var c=new Date(a);var h=new Date(f);d0=Date.UTC(l.getFullYear(),l.getMonth(),l.getDate());d1=Date.UTC(c.getFullYear(),c.getMonth(),c.getDate());d2=Date.UTC(h.getFullYear(),h.getMonth(),h.getDate());if(d0>=d1&&d0<=d2)r++}break;case"begins with":if(u.indexOf(a)==0)r++;break;case"contains":if(u.indexOf(a)>=0)r++;break;case"ends with":if(u.indexOf(a)==u.length-a.length)r++;break}}if(this.last_logic=="OR")n.hidden=r==0?true:false;if(this.last_logic=="AND")n.hidden=r!=this.searchData.length?true:false;if(n.hidden!==true&&n.summary!==true)this.total++}}},select:function(e){var t=0;for(var n in arguments){var r=this.get(arguments[n]);if(r==null||r.selected===true)continue;var i=this.trigger({phase:"before",type:"select",target:this.name,recid:r.recid});if(i.stop===true)continue;var s=this.getIndex(r.recid);r.selected=true;$("#grid_"+this.name+"_rec_"+r.recid).addClass("w2ui-selected").data("selected","yes");$("#grid_"+this.name+"_cell_"+s+"_select_check").attr("checked",true);t++;this.trigger($.extend(i,{phase:"after"}))}$("#grid_"+this.name+"_check_all").attr("checked",true);if($("#grid_"+this.name+"_records").find(".grid_select_check[type=checkbox]").length==$("#grid_"+this.name+"_records").find(".grid_select_check[type=checkbox]:checked").length){$("#grid_"+this.name+"_check_all").attr("checked",true)}else{$("#grid_"+this.name+"_check_all").removeAttr("checked")}return t},unselect:function(e){var t=0;for(var n in arguments){var r=this.get(arguments[n]);if(r==null||r.selected!==true)continue;var i=this.trigger({phase:"before",type:"unselect",target:this.name,recid:r.recid});if(i.stop===true)continue;var s=this.getIndex(r.recid);r.selected=false;$("#grid_"+this.name+"_rec_"+r.recid).removeClass("w2ui-selected").data("selected","");if($("#grid_"+this.name+"_rec_"+r.recid).length!=0){$("#grid_"+this.name+"_rec_"+r.recid)[0].style.cssText=$("#grid_"+this.name+"_rec_"+r.recid).attr("custom_style")}$("#grid_"+this.name+"_cell_"+s+"_select_check").removeAttr("checked");t++;this.trigger($.extend(i,{phase:"after"}))}$("#grid_"+this.name+"_check_all").attr("checked",true);if($("#grid_"+this.name+"_records").find(".grid_select_check[type=checkbox]").length==$("#grid_"+this.name+"_records").find(".grid_select_check[type=checkbox]:checked").length){$("#grid_"+this.name+"_check_all").attr("checked",true)}else{$("#grid_"+this.name+"_check_all").removeAttr("checked")}return t},selectAll:function(){if(this.multiSelect===false)return;for(var e=0;e<this.records.length;e++){if(this.records[e].hidden===true||this.records[e].summary===true)continue;this.select(this.records[e].recid)}if(this.getSelection().length>0)this.toolbar.enable("delete-selected");else this.toolbar.disable("delete-selected")},selectPage:function(){if(this.multiSelect===false)return;this.selectNone();var e=0;if(this.url==""){var t=this.page*this.recordsPerPage;for(var n=0;n<this.records.length;n++){if(this.records[n].hidden===true||this.records[n].summary===true)continue;t--;if(t<0){e=n;break}}}for(var r=e,i=0;i<this.recordsPerPage&&r<this.records.length;r++){var s=this.records[r];if(!s||s.hidden===true)continue;i++;this.select(this.records[r].recid)}if(this.getSelection().length>0)this.toolbar.enable("delete-selected");else this.toolbar.disable("delete-selected")},selectNone:function(){for(var e=0;e<this.records.length;e++){if(this.records[e].selected!==true)continue;this.unselect(this.records[e].recid)}this.last_selected=[]},getSelection:function(){var e=[];for(var t in this.records){if(this.records[t].selected===true){e.push(this.records[t].recid)}}return e},search:function(e,t){function g(e){for(var t in n.searches){if(n.searches[t].field==e)return n.searches[t]}return null}var n=this;var r=[];var i=this.last_multi;var s=this.last_logic;var o=this.last_field;var u=this.last_search;if(arguments.length==0){for(var a in this.searches){var f=this.searches[a];var l=$("#grid_"+this.name+"_operator_"+a).val();var c=$("#grid_"+this.name+"_field_"+a).val();var h=$("#grid_"+this.name+"_field2_"+a).val();if(c!=""&&c!=null||typeof h!="undefined"&&h!=""){var p={field:f.field,type:f.type,operator:l};if(l=="between"){$.extend(p,{value:[c,h]})}else{$.extend(p,{value:c})}r.push(p)}}if(r.length>0){i=true;s="AND"}}if(arguments.length==1&&$.isArray(e)){i=true;s="AND";for(var d in e){var v=e[d];var f=g(v.field);if(f==null){console.log('ERROR: Cannot find field "'+v.field+'" when submitting a search.');continue}var p=$.extend({},v);if(typeof p.type=="undefined")p.type=f.type;if(typeof p.operator=="undefined"){p.operator="is";if(p.type=="text")p.operator="begins with"}r.push(p)}}if(arguments.length==2){o=e;u=t;i=false;s="OR";if(t!="")for(var a in this.searches){var f=this.searches[a];if(f.field==e)this.last_caption=f.caption;if(e!="all"&&f.field==e){var p={field:f.field,type:f.type,operator:f.type=="text"?"begins with":"is",value:t};r.push(p)}if(e=="all"){if(f.type=="text"||f.type=="int"&&w2utils.isInt(t)||f.type=="float"&&w2utils.isFloat(t)||f.type=="money"&&w2utils.isMoney(t)||f.type=="hex"&&w2utils.isHex(t)||f.type=="date"&&w2utils.isDate(t)||f.type=="alphaNumeric"&&w2utils.isAlphaNumeric(t)){var p={field:f.field,type:f.type,operator:f.type=="text"?"begins with":"is",value:t};r.push(p)}}}}var m=this.trigger({phase:"before",type:"search",target:this.name,searchData:r});if(m.stop===true)return;this.searchData=m.searchData;this.last_field=o;this.last_search=u;this.last_multi=i;this.last_logic=s;this.last_scrollTop=0;this.last_scrollLeft=0;this.last_selected=[];this.searchClose();if(this.url!=""){this.isLoaded=false;this.page=0;this.reload()}else{this.localSearch();this.goto(0)}this.trigger($.extend(m,{phase:"after"}))},searchOpen:function(){if(!this.box)return;if(this.searches.length==0)return;var e=this;this.searchOpened=true;if($("#w2ui-global-searches").length==0){$("body").append('<div id="w2ui-global-searches" class="w2ui-reset"> <div style=""></div> </div>')}$("#w2ui-global-searches").css({left:$("#grid_"+this.name+"_search_all").offset().left+"px",top:$("#grid_"+this.name+"_search_all").offset().top+w2utils.getSize($("#grid_"+this.name+"_search_all"),"height")+"px"}).show().data("grid-name",this.name);$("#w2ui-global-searches > div").html(this.getSearchesHTML());$("#w2ui-global-searches > div").css({"-webkit-transform":"translate3d(0px, -"+$("#w2ui-global-searches").height()+"px, 0px)","-moz-transform":"translate3d(0px, -"+$("#w2ui-global-searches").height()+"px, 0px)","-ms-transform":"translate3d(0px, -"+$("#w2ui-global-searches").height()+"px, 0px)","-o-transform":"translate3d(0px, -"+$("#w2ui-global-searches").height()+"px, 0px)"});setTimeout(function(){$("#w2ui-global-searches > div").css({"-webkit-transition":".3s","-webkit-transform":"translate3d(0px, 0px, 0px)","-moz-transition":".3s","-moz-transform":"translate3d(0px, 0px, 0px)","-ms-transition":".3s","-ms-transform":"translate3d(0px, 0px, 0px)","-o-transition":".3s","-o-transform":"translate3d(0px, 0px, 0px)"});if(e.last_logic=="OR")e.searchData=[];e.initSearches()},10);setTimeout(function(){$("#w2ui-global-searches").css({"box-shadow":"0px 2px 10px #777"})},350)},searchClose:function(){if(!this.box)return;if(this.searches.length==0)return;var e=this;this.searchOpened=false;$("#w2ui-global-searches").css("box-shadow","0px 0px 0px white");$("#w2ui-global-searches > div").css({"-webkit-transform":"translate3d(0px, -"+$("#w2ui-global-searches").height()+"px, 0px)","-moz-transform":"translate3d(0px, -"+$("#w2ui-global-searches").height()+"px, 0px)","-ms-transform":"translate3d(0px, -"+$("#w2ui-global-searches").height()+"px, 0px)","-o-transform":"translate3d(0px, -"+$("#w2ui-global-searches").height()+"px, 0px)"});setTimeout(function(){$("#w2ui-global-searches").hide();$("#w2ui-global-searches > div").html("")},300)},searchShowFields:function(e){var t='<table cellspacing="0" style="padding: 5px; font-size: 11px; font-family: verdana;">';for(var n=-1;n<this.searches.length;n++){var r=this.searches[n];if(n==-1){if(!this.multiSearch)continue;r={type:"text",field:"all",caption:"All Fields"}}else{if(this.searches[n].hidden===true)continue}t+='<tr style="cursor: default;" class="w2ui-tb-caption"'+"		onmouseover=\"$(this).css('background-color', '#B4D5FE'); \" "+"		onmouseout=\"$(this).css('background-color', '');\" "+"	"+(this.isIOS?"onTouchStart":"onClick")+"=\"var obj = w2ui['"+this.name+"']; "+"		if ('"+r.type+"' == 'list' || '"+r.type+"' == 'enum') {"+"			obj.last_search = '';"+"			obj.last_item = '';"+"			$('#grid_"+this.name+"_search_all').val('')"+"		}"+"		if (obj.last_search != '') { "+"			obj.search('"+r.field+"', obj.last_search); "+"		} else { "+"			obj.last_field = '"+r.field+"'; "+"			obj.last_caption = '"+r.caption+"'; "+"		}"+"		$('#grid_"+this.name+"_search_all').attr('placeholder', '"+r.caption+"');"+'		$().w2overlay();">'+'<td style="padding: 3px 3px 3px 6px"><input type="checkbox" tabIndex="-1" '+(r.field==this.last_field?"checked":"disabled")+' style="margin: 3px 2px 2px 2px"></td>'+'<td style="padding: 3px 15px 3px 3px">'+r.caption+"</td>"+"</tr>"}t+="</table>";$(e).w2overlay(t,{left:-15,top:7})},searchReset:function(){var e=this.trigger({phase:"before",type:"search",target:this.name,searchData:[]});if(e.stop===true)return;this.searchData=[];this.last_search="";this.last_logic="OR";if(this.last_multi){if(!this.multiSearch){this.last_field=this.searches[0].field;this.last_caption=this.searches[0].caption}else{this.last_field="all";this.last_caption="All Fields"}}this.last_multi=false;this.last_scrollTop=0;this.last_scrollLeft=0;this.last_selected=[];$("#grid_"+this.name+"_search_all").attr("placeholder",this.last_caption);$("#w2ui-global-searches *[rel=search]").val(null);this.searchClose();$("#grid_"+this.name+"_search_all").attr("placeholder",this.last_caption);$("#w2ui-global-searches *[rel=search]").val(null);if(this.url!=""){this.isLoaded=false;this.page=0;this.reload()}else{this.localSearch();this.goto(0)}this.trigger($.extend(e,{phase:"after"}))},"goto":function(e){var t=Math.floor(this.total/this.recordsPerPage);if(this.total%this.recordsPerPage!=0||t==0)t++;if(t<1)t=1;if(e<0)e=0;if(e>=t)e=t-1;this.last_scrollTop=0;this.last_scrollLeft=0;this.last_selected=[];this.isLoaded=false;this.page=e;this.reload()},load:function(e,t){if(typeof e=="undefined"){console.log('ERROR: You need to provide url argument when calling .load() method of "'+this.name+'" object.');return}this.isLoaded=false;this.request("get-records",{},e,t)},reload:function(e){if(this.url!=""){this.isLoaded=false;this.request("get-records",{},null,e)}else{this.isLoaded=true;this.refresh()}},reset:function(){this.page=0;this.width=null;this.height=null;this.isLoaded=false;this.searchOpened=false;this.searchData=[];this.last_search="";this.last_field="all";this.last_caption="All Fields";this.last_logic="OR";this.last_scrollTop=0;this.last_scrollLeft=0;this.last_selected=[];this.last_sortCount=0;if(this.last_sortData!=null)this.sortData=this.last_sortData;for(var e=0;e<this.records.length;e++){this.records[e].selected=false;this.records[e].hidden=false}this.refresh()},request:function(cmd,add_params,url,callBack){if(typeof add_params=="undefined")add_params={};if(typeof url=="undefined"||url==""||url==null)url=this.url;if(url==""||url==null)return;var params={};params["cmd"]=cmd;params["name"]=this.name;params["limit"]=this.recordsPerPage;params["offset"]=this.page*this.recordsPerPage;params["selected"]=this.getSelection();params["search"]=this.searchData;params["search-logic"]=this.last_logic;params["sort"]=this.sortData.length!=0?this.sortData:"";if(this.recid!=null)params["recid"]=this.recid;$.extend(params,this.postData);$.extend(params,add_params);var eventData=this.trigger({phase:"before",type:"request",target:this.name,url:url,postData:params,cmd:cmd});if(eventData.stop===true){if(typeof callBack=="function")callBack();return false}if(cmd=="get-records")this.records=[];var obj=this;this.showStatus("Refreshing ");if(this.request_xhr)try{this.request_xhr.abort()}catch(e){}this.request_xhr=$.ajax({type:"POST",url:url+(url.indexOf("?")>-1?"&":"?")+"t="+(new Date).getTime(),data:String($.param(eventData.postData,false)).replace(/%5B/g,"[").replace(/%5D/g,"]"),dataType:"text",complete:function(xhr,status){obj.hideStatus();obj.isLoaded=true;var eventData=obj.trigger({phase:"before",target:obj.name,type:"load",data:xhr.responseText,xhr:xhr,status:status});if(eventData.stop===true){if(typeof callBack=="function")callBack();return false}if(typeof eventData.data!="undefined"&&eventData.data!=""){var data="data = "+eventData.data;var data=eval(data);if(typeof data["status"]!="undefined"&&data["status"]!="success"){if(xhr["status"]==403){document.location="login.html";return}setTimeout(function(){$().w2popup("open",{width:400,height:180,showMax:false,title:"Error",body:'<div style="padding: 15px 5px; text-align: center;">'+data["message"]+"</div>",buttons:'<input type="button" value="Ok" onclick="$().w2popup(\'close\');" style="width: 60px; margin-right: 5px;">'})},300)}else{if(cmd=="get-records")$.extend(obj,data);if(cmd=="delete-records"){obj.reload();return}}}if(obj.url==""){obj.localSearch();obj.localSort()}obj.trigger($.extend(eventData,{phase:"after"}));obj.refresh();if(typeof callBack=="function")callBack()}});this.trigger($.extend(eventData,{phase:"after"}))},getChanged:function(){var e=[];var t=false;for(var n=0;n<this.records.length;n++){var r=this.records[n];var i={};for(var s=0;s<this.columns.length;s++){var o=this.columns[s];if(o.hidden||o.field=="recid"||$("#grid_"+this.name+"_edit_"+n+"_"+s).length==0)continue;var u=$("#grid_"+this.name+"_edit_"+n+"_"+s).val();var a=r[o.field];if(typeof a=="undefined")a="";if(u!=a){t=true;i[o.field]=u}}if(!$.isEmptyObject(i)){e.push($.extend({},{recid:this.records[n].recid},i))}}return e},doAdd:function(){var e=this.trigger({phase:"before",target:this.name,type:"add",recid:null});if(e.stop===true)return false;this.trigger($.extend(e,{phase:"after"}))},doSave:function(){var e=this.getChanged();var t=this.trigger({phase:"before",target:this.name,type:"save",changed:e});if(t.stop===true)return false;if(this.url!=""){this.request("save-records",{changed:e},null,function(){this.trigger($.extend(t,{phase:"after"}))})}else{for(var n in e){var r=this.get(e[n].recid);for(var i in e[n]){if(i=="recid")continue;r[i]=e[n][i]}}$("#grid_"+this.name+" .w2ui-editable").removeClass("changed");this.selectNone();this.trigger($.extend(t,{phase:"after"}))}},doEdit:function(e,t,n){var r=$(t).attr("recid");var i=this.get(r);if(!i.selected){this.selectNone();this.select(r)}switch(e){case"click":n.stopPropagation();n.preventDefault();break;case"focus":$(t).addClass("active");break;case"blur":$(t).removeClass("active");var s=i[$(t).attr("field")];if(typeof s=="undefined")s="";if($(t).val()!=s){var o=this.trigger({phase:"before",type:"change",target:t.id,recid:r});if(o.stop===true)return false;$(t).addClass("changed");this.trigger($.extend(o,{phase:"after"}))}else{$(t).removeClass("changed")}break;case"keyup":if($(t).data("stop")===true){$(t).data("stop",false);break}if(n.keyCode==40||n.keyCode==13){var u=$("#grid_"+this.name+"_edit_"+(parseInt($(t).attr("line"))+1)+"_"+$(t).attr("column"));if(u.length>0){u[0].select();u[0].focus()}}if(n.keyCode==38){var u=$("#grid_"+this.name+"_edit_"+(parseInt($(t).attr("line"))-1)+"_"+$(t).attr("column"));if(u.length>0){u[0].select();u[0].focus()}}break}},doDelete:function(e){var t=this.trigger({phase:"before",target:this.name,type:"delete"});if(t.stop===true)return false;var n=this.getSelection();if(n.length==0)return;if(this.msgDelete!=""&&!e){$().w2popup({width:400,height:160,showMax:false,title:"Delete Confirmation",body:'<div style="padding: 20px 5px; text-align: center;">'+this.msgDelete+"</div>",buttons:'<input type="button" value="No" onclick="$().w2popup(\'close\');" style="width: 60px; margin-right: 5px;">'+'<input type="button" value="Yes" onclick="w2ui[\''+this.name+"'].doDelete(true); $().w2popup('close');\" style=\"width: 60px;\">"});return}if(this.url!=""){this.request("delete-records")}else{this.remove.apply(this,n)}this.trigger($.extend(t,{phase:"after"}))},doClick:function(e,t){var n=this.trigger({phase:"before",target:this.name,type:"click",recid:e,event:t});if(n.stop===true)return false;$("#grid_"+this.name+"_check_all").removeAttr("checked");if(this.searchOpened)this.searchClose();var r=this.get(e);if(r)var i=r.selected;if((!t.ctrlKey&&!t.shiftKey&&!t.metaKey||!this.multiSelect)&&!this.showSelectColumn){this.selectNone()}else{window.setTimeout("var doc = w2ui['"+this.name+"'].box.ownerDocument; if (doc.selection) doc.selection.empty(); "+"else doc.defaultView.getSelection().removeAllRanges();",10)}if(t.shiftKey){var s=0;var o=null;for(var u=0;u<this.records.length;u++){if(this.records[u].selected){s++;if(!o)o=u}}if(s>1){this.selectNone()}if(s==1){var a=this.getIndex(e);if(a>o){for(var u=o;u<=a;u++){this.select(this.records[u].recid)}}else{for(var u=a;u<=o;u++){this.select(this.records[u].recid)}}this.trigger($.extend(n,{phase:"after"}));this.last_selected=this.getSelection();return}}if(this.showSelectColumn&&r.selected){this.unselect(r.recid)}else if(r&&!i||t.ctrlKey||t.metaKey){if(r.selected===true)this.unselect(r.recid);else this.select(r.recid)}if(this.keyboard){var f=this;var l=function(e){var t=f;if(e.target.tagName.toLowerCase()=="body"){if(e.keyCode==65&&(e.metaKey||e.ctrlKey)){t.selectPage();e.preventDefault()}if(e.keyCode==8){t.doDelete();e.preventDefault()}var n=t.getSelection();if(n.length==1){var r=n[0];var i=t.getIndex(r);var s=parseInt($("#grid_"+t.name+"_records").prop("scrollTop"));var o=parseInt($("#grid_"+t.name+"_records").height());if(e.keyCode==38){if(i>0){i--;while(i>0&&t.records[i].hidden===true)i--;t.selectNone();t.doClick(t.records[i].recid,e);var u=parseInt($("#grid_"+t.name+"_rec_"+t.records[i].recid)[0].offsetTop);var a=parseInt($("#grid_"+t.name+"_rec_"+t.records[i].recid).height());if(u<s){$("#grid_"+t.name+"_records").prop("scrollTop",u-a*.7);t.last_scrollTop=$("#grid_"+t.name+"_records").prop("scrollTop")}}e.preventDefault()}if(e.keyCode==40){if(i+1<t.records.length){i++;while(i+1<t.records.length&&t.records[i].hidden===true)i++;t.selectNone();t.doClick(t.records[i].recid,e);var u=parseInt($("#grid_"+t.name+"_rec_"+t.records[i].recid)[0].offsetTop);var a=parseInt($("#grid_"+t.name+"_rec_"+t.records[i].recid).height());if(u+a>o+s){$("#grid_"+t.name+"_records").prop("scrollTop",-(o-u-a)+a*.7);t.last_scrollTop=$("#grid_"+t.name+"_records").prop("scrollTop")}}e.preventDefault()}}}};$(window).off("keydown").on("keydown",l)}if(this.getSelection().length>0)this.toolbar.enable("delete-selected");else this.toolbar.disable("delete-selected");this.last_selected=this.getSelection();this.trigger($.extend(n,{phase:"after"}))},doDblClick:function(e,t){if(window.getSelection)window.getSelection().removeAllRanges();var n=this.trigger({phase:"before",target:this.name,type:"dblClick",recid:e,event:t});if(n.stop===true)return false;var r=this.get(e);clearTimeout(this._click_timer);this.selectNone();this.select(e);this.last_selected=this.getSelection();this.trigger($.extend(n,{phase:"after"}))},doExpand:function(e){var t=$("#grid_"+this.name+"_rec_"+e).attr("expanded");if(t!="yes"){var n=1+(this.show.lineNumbers?1:0)+(this.show.selectColumn?1:0);var r=$("#grid_"+this.name+"_rec_"+e).hasClass("w2ui-odd")?"w2ui-odd":"w2ui-even";$("#grid_"+this.name+"_rec_"+e).after('<tr id="grid_'+this.name+"_rec_"+e+'_expaned_row" style="display: none" class="'+r+'">'+'<td class="w2ui-grid-data" colspan="'+n+'"></td>'+'<td colspan="100" class="w2ui-subgrid"><div id="grid_'+this.name+"_rec_"+e+'_expaned" style="height: auto;"> </div></td>'+"</tr>")}var i=this.trigger({phase:"before",type:"expand",target:this.name,recid:e,expanded:t=="yes"?true:false,box_id:"grid_"+this.name+"_rec_"+e+"_expaned"});if(i.stop===true){$("#grid_"+this.name+"_rec_"+e+"_expaned_row").remove();return false}if(t=="yes"){$("#grid_"+this.name+"_rec_"+e).attr("expanded","");$("#grid_"+this.name+"_rec_"+e+"_expaned_row").remove();$("#grid_"+this.name+"_cell_"+this.getIndex(e)+"_expand div").html("+")}else{$("#grid_"+this.name+"_rec_"+e).attr("expanded","yes");$("#grid_"+this.name+"_cell_"+this.getIndex(e)+"_expand div").html("-");$("#grid_"+this.name+"_rec_"+e+"_expaned_row").show()}this.trigger($.extend(i,{phase:"after"}));this.resize()},doSort:function(e,t,n){var r=this.trigger({phase:"before",type:"sort",target:this.name,field:e,direction:t,event:n});if(r.stop===true)return false;if(typeof e=="undefined"){this.trigger($.extend(r,{phase:"after"}));return}var i=this.sortData.length;for(var s in this.sortData){if(this.sortData[s].field==e){i=s;break}}if(typeof t=="undefined"||t==null){if(typeof this.sortData[i]=="undefined"){t="asc"}else{switch(String(this.sortData[i].direction)){case"asc":t="desc";break;case"desc":t="";break;default:t="asc";break}}}if(this.multiSort===false){this.sortData=[];i=0}if(!n.ctrlKey&&!n.metaKey){this.sortData=[];i=0}if(typeof this.sortData[i]=="undefined")this.sortData[i]={};this.sortData[i].field=e;this.sortData[i].direction=t;if(this.url=="")this.localSort();this.trigger($.extend(r,{phase:"after"}));this.reload()},resize:function(e,t){var n=(new Date).getTime();var r=this;if(window.getSelection)window.getSelection().removeAllRanges();if(!this.box||$(this.box).data("w2name")!=this.name)return;this.width=typeof e!="undefined"&&e!=null?parseInt(e):$(this.box).width();this.height=typeof t!="undefined"&&t!=null?parseInt(t):$(this.box).height();$(this.box).width(e).height(t);if(this.width==0||this.height==0)return;var i=this.trigger({phase:"before",type:"resize",target:this.name,width:this.width,height:this.height});if(i.stop===true)return false;r.resizeBoxes();r.resizeRecords();this.trigger($.extend(i,{phase:"after"}))},refresh:function(){var e=this;var t=(new Date).getTime();var n=Math.floor(this.total/this.recordsPerPage);if(this.total%this.recordsPerPage!=0||n==0)n++;if(this.page>0&&this.page>n-1)this.goto(0);if(window.getSelection)window.getSelection().removeAllRanges();if(!this.box)return;var r=this.trigger({phase:"before",target:this.name,type:"refresh"});if(r.stop===true)return false;if(this.searchOpened)this.searchClose();if(this.show.header){$("#grid_"+this.name+"_header").html(this.header+" ").show()}else{$("#grid_"+this.name+"_header").hide()}if(this.show.toolbar){$("#grid_"+this.name+"_toolbar").show();if(typeof this.toolbar=="object"){this.toolbar.refresh();$("#grid_"+this.name+"_search_all").val(this.last_search)}}else{$("#grid_"+this.name+"_toolbar").hide()}if(this.searches.length==0)this.last_field="No Search Fields";if(!this.multiSearch&&this.last_field=="all"){this.last_field=this.searches[0].field;this.last_caption=this.searches[0].caption}for(var i in this.searches){if(this.searches[i].field==this.last_field)this.last_caption=this.searches[i].caption}if(this.last_multi){$("#grid_"+this.name+"_search_all").attr("placeholder","Multi Fields")}else{$("#grid_"+this.name+"_search_all").attr("placeholder",this.last_caption)}if(this._focus_when_refreshed===true){setTimeout(function(){var t=$("#grid_"+e.name+"_search_all");if(t.length>0)t[0].focus();setTimeout(function(){delete e._focus_when_refreshed},500)},10)}var s="";if(this.layout=="table"){s+='<div id="grid_'+this.name+'_records" class="w2ui-grid-records" style="position: absolute; left: 0px; right: 0px; top: 0px; bottom: 0px;" '+"	onscroll=\"var obj = w2ui['"+this.name+"']; obj.last_scrollTop = this.scrollTop; obj.last_scrollLeft = this.scrollLeft; "+"		$('#grid_"+this.name+"_columns')[0].scrollLeft = this.scrollLeft\">"+'<table cellpadding="0" cellspacing="0" style="table-layout: fixed;">'+this.getRecordsHTML()+"</table>"+"</div>"+'<div id="grid_'+this.name+'_columns" class="w2ui-grid-columns" style="overflow: hidden; position: absolute; left: 0px; top: 0px; right: 0px;">'+'<table cellpadding="0" cellspacing="0" style="table-layout: fixed; height: auto;">'+this.getColumnsHTML()+"</table>"+"</div>"}if(this.layout=="div"){s+='<div id="grid_'+this.name+'_body">'+this.tmpl_start+this.getColumnsHTML()+this.getRecordsHTML()+this.tmpl_end+"</div>"}$("#grid_"+this.name+"_body").html(s);$("#grid_"+this.name+"_records .w2ui-editable").each(function(t,n){var r=e.columns[$(n).attr("column")];$(n).w2field(r.editable)});if(this.summary!=""){$("#grid_"+this.name+"_summary").html(this.summary).show()}else{$("#grid_"+this.name+"_summary").hide()}if(this.show.footer){var o=this.getFooterHTML();var u=this.page*this.recordsPerPage+this.recordsPerPage;if(u>this.total)u=this.total;var a=this.page*this.recordsPerPage+1+"-"+u+" of "+this.total;if(this.page==0&&this.total==0)a="0-0 of 0";$("#grid_"+this.name+"_footerR").html(a);$("#grid_"+this.name+"_footerC").html(o);$("#grid_"+this.name+"_footer").show()}else{$("#grid_"+this.name+"_footer").hide()}if(this.last_selected.length>0)for(var i in this.last_selected){if(this.get(this.last_selected[i])!=null){this.select(this.get(this.last_selected[i]).recid)}}if(this.searchData.length>0){$("#grid_"+this.name+"_searchClear").show()}else{$("#grid_"+this.name+"_searchClear").hide()}$("#grid_"+this.name+"_check_all").attr("checked",true);if($("#grid_"+this.name+"_records").find(".grid_select_check[type=checkbox]").length==$("#grid_"+this.name+"_records").find(".grid_select_check[type=checkbox]:checked").length){$("#grid_"+this.name+"_check_all").attr("checked",true)}else{$("#grid_"+this.name+"_check_all").removeAttr("checked")}this.trigger($.extend(r,{phase:"after"}));this.resize(null,null,true)},render:function(e){var t=(new Date).getTime();if(window.getSelection)window.getSelection().removeAllRanges();if(typeof e!="undefined"&&e!=null){$(this.box).html("");this.box=e}if(!this.box)return;$("#w2ui-global-searches").remove();if(this.last_sortData==null)this.last_sortData=this.sortData;var n=this.trigger({phase:"before",target:this.name,type:"render",box:e});if(n.stop===true)return false;$(this.box).data("w2name",this.name).html('<div id="grid_'+this.name+'" class="w2ui-reset w2ui-grid" style="position: absolute; overflow: hidden; '+this.style+'">'+'	<div id="grid_'+this.name+'_header" class="w2ui-grid-header" style="position: absolute; '+(!this.show.header?"display: none;":"")+'"></div>'+'	<div id="grid_'+this.name+'_toolbar" class="w2ui-grid-toolbar" style="position: absolute; '+(!this.show.toolbar?"display: none;":"")+'"></div>'+'	<div id="grid_'+this.name+'_body" class="w2ui-grid-body" style="position: absolute; overflow: hidden;"></div>'+'	<div id="grid_'+this.name+'_summary" class="w2ui-grid-body w2ui-grid-summary" style="position: absolute; '+(this._summary==""?"display: none;":"")+'">sum</div>'+'	<div id="grid_'+this.name+'_footer" class="w2ui-grid-footer" style="position: absolute; '+(!this.show.footer?"display: none;":"")+'"></div>'+"</div>");this.initToolbar();if(this.toolbar!=null)this.toolbar.render($("#grid_"+this.name+"_toolbar")[0]);$("#grid_"+this.name+"_footer").html('<div style="width: 100%; height: 24px;">'+'	<div id="grid_'+this.name+'_footerL" style="float: left;"></div>'+'	<div id="grid_'+this.name+'_footerR" style="float: right;"></div>'+'	<div id="grid_'+this.name+'_footerC" style="text-align: center;"></div>'+"</div>");this.refresh();this.reload();this.trigger($.extend(n,{phase:"after"}));var r=this;$(window).bind("resize",function(e){w2ui[r.name].resize()});setTimeout(function(){r.resize()},150)},destroy:function(){var e=this.trigger({phase:"before",target:this.name,type:"destroy"});if(e.stop===true)return false;if(typeof this.toolbar=="object"&&this.toolbar.destroy)this.toolbar.destroy();$(this.box).html("");delete w2ui[this.name];this.trigger($.extend(e,{phase:"after"}))},initToolbar:function(){if(typeof this.toolbar["render"]=="undefined"){var e=this.toolbar.items;this.toolbar.items=[];this.toolbar=$().w2toolbar($.extend(true,{},this.toolbar,{name:this.name+"_toolbar",owner:this}));if(this.show.toolbarReload){this.toolbar.items.push({type:"button",id:"refresh",img:"icon-reload",hint:"Reload data in the list"})}if(this.show.toolbarColumns){var t='<table cellspacing="0" style="padding: 5px 0px;">';for(var n in this.columns){t+='<tr style="cursor: default;" '+"	onmouseover=\"$(this).addClass('w2ui-selected');\" onmouseout=\"$(this).removeClass('w2ui-selected');\">"+"<td style='padding: 3px 3px 3px 6px'>"+'	<input id="grid_'+this.name+"_column_"+n+'_check" type="checkbox" style="margin: 3px 2px 2px 2px" tabIndex="-1"'+"	onclick=\"var obj = w2ui['"+this.name+"']; "+"			  var col = obj.columns['"+n+"']; "+"			  if (this.checked) {  "+"				delete col.gridMinWidth; "+"				delete col.hidden; "+"			  } else { "+"				delete col.gridMinWidth; "+"				col.hidden = true; "+"			  } "+'			  obj.refresh(); event.stopPropagation(); ">'+"</td>"+'<td style=\'padding: 3px 10px 3px 3px\'><label style="display: block;" for="grid_'+this.name+"_column_"+n+'_check">'+(this.columns[n].caption==""?"- column "+(n+1)+" -":this.columns[n].caption)+"</label></td>"+"</tr>"}t+="</table>";this.toolbar.items.push({type:"drop",id:"select-columns",img:"icon-columns",hint:"Show/hide columns",arrow:false,html:t})}if(this.show.toolbarReload||this.show.toolbarColumn){this.toolbar.items.push({type:"break",id:"break0"})}if(this.show.toolbarSearch){var r='<table cellpadding="0" cellspacing="0" style="margin-top: -2px"><tr>'+"	<td>"+'		<div class="w2ui-icon icon-search-down w2ui-search-down" title="Select Search Field" '+(this.isIOS?"onTouchStart":"onClick")+"=\"var obj = w2ui['"+this.name+"']; obj.searchShowFields(this);\"></div>"+"	</td>"+"	<td>"+'		<input id="grid_'+this.name+'_search_all" class="w2ui-search-all" '+'			placeholder="'+this.last_caption+'" value="'+this.last_search+'"'+"			onkeyup=\"if (event.keyCode == 13) w2ui['"+this.name+"'].search(w2ui['"+this.name+"'].last_field, this.value); "+"					  w2ui['"+this.name+"']._focus_when_refreshed = true;\">"+"	</td>"+"	<td>"+'		<div title="Clear Search" class="w2ui-search-clear" id="grid_'+this.name+'_searchClear"  '+"			 onclick=\"var obj = w2ui['"+this.name+"']; obj.searchReset();\" "+"		>  </div>"+"	</td>"+"</tr></table>";this.toolbar.items.push({type:"html",id:"search",html:r});if(this.multiSearch&&this.searches.length>0){this.toolbar.items.push({type:"button",id:"search-advanced",caption:"Search...",hint:"Open Search Fields"})}}if(this.show.toolbarAdd||this.show.toolbarDelete||this.show.toolbarSave){this.toolbar.items.push({type:"break",id:"break1"})}if(this.show.toolbarAdd){this.toolbar.items.push({type:"button",id:"add",caption:"Add New",hint:"Add new record",img:"icon-add"})}if(this.show.toolbarDelete){this.toolbar.items.push({type:"button",id:"delete-selected",caption:"Delete",hint:"Delete selected records",img:"icon-delete",disabled:true})}if(this.show.toolbarSave){if(this.show.toolbarAdd||this.show.toolbarDelete){this.toolbar.items.push({type:"break",id:"break2"})}this.toolbar.items.push({type:"button",id:"save-changed",caption:"Save",hint:"Save changed records",img:"icon-save"})}for(var i in e)this.toolbar.items.push(e[i]);var s=this;this.toolbar.on("click",function(e,t){switch(e){case"refresh":s.reload();break;case"select-columns":for(var n in s.columns){if(s.columns[n].hidden){$("#grid_"+s.name+"_column_"+n+"_check").removeAttr("checked")}else{$("#grid_"+s.name+"_column_"+n+"_check").attr("checked",true)}}for(var n in s.columns){if(typeof s.columns[n].sizeOriginal!="undefined"){s.columns[n].size=s.columns[n].sizeOriginal}}s.initResize();s.resize();break;case"add":s.doAdd();break;case"search-advanced":if(!s.searchOpened)s.searchOpen();break;case"add-new":s.doAdd();break;case"delete-selected":s.doDelete();break;case"save-changed":s.doSave();break;default:if(e.substr(0,7)=="choice-"&&typeof t!="object"){s.toolbar.set(e,{caption:s.toolbar.get(e).prepend+t});if(typeof s.toolbar.get(e).param=="function"){s.toolbar.get(e).param(e,t)}if(typeof s.toolbar.get(e).onClick=="function"){s.toolbar.get(e).onClick(e,t)}}break}})}return},initSearches:function(){function a(t){for(var n in e.searchData){if(e.searchData[n].field==t)return e.searchData[n]}return null}var e=this;for(var t in this.searches){var n=this.searches[t];var r=a(n.field);switch(n.type){case"alphaNumeric":case"text":$("#grid_"+this.name+"_operator_"+t).val("begins with");break;case"int":case"float":case"hex":case"money":case"date":$("#grid_"+this.name+"_field_"+t).w2field(n.type);$("#grid_"+this.name+"_field2_"+t).w2field(n.type);break;case"list":var i='<option value="">--</option>';for(var s in n.items){if($.isPlainObject(n.items[s])){var o=n.items[s].id;var u=n.items[s].text;if(typeof o=="undefined"&&typeof n.items[s].value!="undefined")o=n.items[s].value;if(typeof u=="undefined"&&typeof n.items[s].caption!="undefined")u=n.items[s].caption;if(o==null)o="";i+='<option value="'+o+'">'+u+"</option>"}else{i+='<option value="'+n.items[s]+'">'+n.items[s]+"</option>"}}$("#grid_"+this.name+"_field_"+t).html(i);break}if(r!=null){$("#grid_"+this.name+"_operator_"+t).val(r.operator).trigger("change");if(!$.isArray(r.value)){if(typeof r.value!="udefined")$("#grid_"+this.name+"_field_"+t).val(r.value).trigger("change")}else{$("#grid_"+this.name+"_field_"+t).val(r.value[0]).trigger("change");$("#grid_"+this.name+"_field2_"+t).val(r.value[1]).trigger("change")}}}$("#w2ui-global-searches *[rel=search]").on("keypress",function(t){if(t.keyCode==13)e.search()})},initResize:function(){var e=this;$("#grid_"+this.name+" .w2ui-resizer").off("mousedown").off("click").each(function(e,t){var n=$(t).parent();$(t).css({height:n.height(),"margin-top":"-"+n.height()+"px","margin-left":n.width()-6+"px"})}).on("mousedown",function(t){if(!t)t=window.event;if(!window.addEventListener){window.document.attachEvent("onselectstart",function(){return false})}e.resizing=true;e.tmp_x=t.screenX;e.tmp_y=t.screenY;e.tmp_col=$(this).attr("name");t.stopPropagation();t.preventDefault();for(var n in e.columns){if(typeof e.columns[n].sizeOriginal=="undefined")e.columns[n].sizeOriginal=e.columns[n].size;e.columns[n].size=e.columns[n].sizeCalculated}var r=function(t){if(e.resizing!=true)return;if(!t)t=window.event;e.tmp_div_x=t.screenX-e.tmp_x;e.tmp_div_y=t.screenY-e.tmp_y;e.columns[e.tmp_col].size=parseInt(e.columns[e.tmp_col].size)+e.tmp_div_x+"px";e.resizeRecords();e.tmp_x=t.screenX;e.tmp_y=t.screenY};var i=function(t){delete e.resizing;$(window).off("mousemove",r);$(window).off("mouseup",i);e.resizeRecords()};$(window).on("mousemove",r);$(window).on("mouseup",i)}).on("click",function(e){e.stopPropagation();e.preventDefault})},resizeBoxes:function(){var e=$("#grid_"+this.name);var t=$("#grid_"+this.name+"_header");var n=$("#grid_"+this.name+"_toolbar");var r=$("#grid_"+this.name+"_summary");var i=$("#grid_"+this.name+"_footer");var s=$("#grid_"+this.name+"_body");var o=$("#grid_"+this.name+"_columns");var u=$("#grid_"+this.name+"_records");e.width(this.width).height(this.height);if(this.show.header){t.css({top:"0px",left:"0px",right:"0px"})}if(this.show.toolbar){n.css({top:0+(this.show.header?w2utils.getSize(t,"height"):0)+"px",left:"0px",right:"0px"})}if(this.show.footer){i.css({bottom:"0px",left:"0px",right:"0px"})}if(this.summary!=""){r.css({bottom:0+(this.show.footer?w2utils.getSize(i,"height"):0)+"px",left:"0px",right:"0px"})}s.css({top:0+(this.show.header?w2utils.getSize(t,"height"):0)+(this.show.toolbar?w2utils.getSize(n,"height"):0)+"px",bottom:0+(this.show.footer?w2utils.getSize(i,"height"):0)+(this.summary!=""?w2utils.getSize(r,"height"):0)+"px",left:"0px",right:"0px"})},resizeRecords:function(){var e=this;$(".grid_"+this.name+"_empty_record").remove();var t=$(this.box);var n=$("#grid_"+this.name);var r=$("#grid_"+this.name+"_header");var i=$("#grid_"+this.name+"_toolbar");var s=$("#grid_"+this.name+"_summary");var o=$("#grid_"+this.name+"_footer");var u=$("#grid_"+this.name+"_body");var a=$("#grid_"+this.name+"_columns");var f=$("#grid_"+this.name+"_records");if(!this.fixedBody){var l=$("#grid_"+this.name+"_records > table:first-child").height()+a.height();this.height=l+w2utils.getSize(n,"+height")+(this.show.header?w2utils.getSize(r,"height"):0)+(this.show.toolbar?w2utils.getSize(i,"height"):0)+(s.css("display")!="none"?w2utils.getSize(s,"height"):0)+(this.show.footer?w2utils.getSize(o,"height"):0);n.height(this.height);u.height(l);t.height(w2utils.getSize(n,"height"))}else{var l=n.height()-(this.show.header?w2utils.getSize(r,"height"):0)-(this.show.toolbar?w2utils.getSize(i,"height"):0)-(s.css("display")!="none"?w2utils.getSize(s,"height"):0)-(this.show.footer?w2utils.getSize(o,"height"):0);u.height(l)}if(u.height()-a.height()<$(f).find(":first-child").height())var c=true;else c=false;if(u.width()<$(f).find(":first-child").width())var h=true;else h=false;if(h||c){f.css({top:(this.columnGroups.length>0?1:0)+w2utils.getSize(a,"height")+"px","-webkit-overflow-scrolling":"touch","overflow-x":h?"auto":"hidden","overflow-y":c?"auto":"hidden"});$("#grid_"+this.name+"_cell_header_last").show()}else{f.css({top:(this.columnGroups.length>0?1:0)+w2utils.getSize(a,"height")+"px",overflow:"hidden"});if(f.length>0){this.last_scrollTop=0;this.last_scrollLeft=0}$("#grid_"+this.name+"_cell_header_last").hide()}if(this.show.emptyRecords&&!c){var p=0;if(this.url==""){var d=this.page*this.recordsPerPage;for(var v=0;v<this.records.length;v++){if(this.records[v].hidden===true||this.records[v].summary===true)continue;d--;if(d<0){p=v;break}}}var m=0;for(var g=p;g<this.records.length;g++){if(this.records[g].hidden===true||this.records[g].summary===true)continue;m++}var y="";for(var b=m;b<100;b++){y+='<tr class="grid_'+this.name+"_empty_record "+(b%2?"w2ui-even":"w2ui-odd")+'">';if(this.show.lineNumbers)y+='<td class="w2ui-number"><div style="width: 24px;"></div></td>';if(this.show.selectColumn)y+='<td class="w2ui-grid-data"><div style="width: 23px;"></div></td>';if(this.show.expandColumn)y+='<td class="w2ui-grid-data"><div style="width: 23px;"></div></td>';var w=0;while(true){var E=this.columns[w];if(E.hidden){w++;if(typeof this.columns[w]=="undefined")break;else continue}y+='<td class="w2ui-grid-data" '+(b==this.records.length?'id="grid_'+this.name+"_cell_"+b+"_"+w+'"':"")+(typeof E.attr!="undefined"?E.attr:"")+"><div></div></td>";w++;if(typeof this.columns[w]=="undefined")break}y+="</tr>"}$("#grid_"+this.name+"_records > table").append(y)}if(u.length>0){var S=parseInt(u.width())-(c?String(navigator.userAgent).indexOf("AppleWebKit")>0?16:17:0)-(this.show.lineNumbers?25:0)-(this.show.selectColumn?25:0)-(this.show.expandColumn?25:0);var x=S;var T=0;var N=false;for(var C=0;C<this.columns.length;C++){var E=this.columns[C];if(typeof E.gridMinWidth!="undefined"){if(E.gridMinWidth>x&&E.hidden!==true){E.hidden=true;N=true}if(E.gridMinWidth<x&&E.hidden===true){E.hidden=false;N=true}}}if(N===true){this.refresh();return}for(var C=0;C<this.columns.length;C++){var E=this.columns[C];if(E.hidden)continue;if(String(E.size).substr(String(E.size).length-2).toLowerCase()=="px"){S-=parseFloat(E.size)+1;this.columns[C].sizeCalculated=E.size}else{T+=parseFloat(E.size);delete E.sizeCorrected}}if(T!=100){for(var C=0;C<this.columns.length;C++){var E=this.columns[C];if(E.hidden)continue;if(String(E.size).substr(String(E.size).length-2).toLowerCase()!="px"){E.sizeCorrected=Math.round(parseFloat(E.size)*100*100/T)/100+"%"}}}for(var C=0;C<this.columns.length;C++){var E=this.columns[C];if(E.hidden)continue;if(String(E.size).substr(String(E.size).length-2).toLowerCase()!="px"){if(typeof this.columns[C].sizeCorrected!="undefined"){this.columns[C].sizeCalculated=Math.round(S*parseFloat(E.sizeCorrected)/100-1)+"px"}else{this.columns[C].sizeCalculated=Math.round(S*parseFloat(E.size)/100-1)+"px"}}}}var k=1;var L=null;for(var C=0;C<this.columns.length;C++){var E=this.columns[C];if(typeof E.min=="undefined")E.min=15;if(parseInt(E.sizeCalculated)<parseInt(E.min))E.sizeCalculated=E.min+"px";if(parseInt(E.sizeCalculated)>parseInt(E.max))E.sizeCalculated=E.max+"px";if(E.hidden)continue;k+=parseFloat(E.sizeCalculated)+1;L=E}var A=parseInt(x)-parseInt(k)+1;if(A>0){L.sizeCalculated=parseInt(L.sizeCalculated)+A+"px";if(parseInt(L.sizeCalculated)<parseInt(L.min))L.sizeCalculated=L.min+"px";if(parseInt(L.sizeCalculated)>parseInt(L.max))L.sizeCalculated=L.max+"px"}for(var C=0;C<this.columns.length;C++){var E=this.columns[C];if(E.hidden)continue;var O=$("#grid_"+this.name+"_cell_header_"+C+" > div:first-child");O.width(E.sizeCalculated);if(O.attr("name")=="columnGroup"){O.find("div").css("padding","13px 3px")}var p=0;if(this.url==""){var d=this.page*this.recordsPerPage;for(var v=0;v<this.records.length;v++){if(this.records[v]&&this.records[v].hidden)continue;d--;if(d<0){p=v;break}}}for(var w=p;w<1e3;w++){if(this.records[w]&&this.records[w].hidden){continue}var M=$("#grid_"+this.name+"_cell_"+w+"_"+C+" > div:first-child");if(M.length==0)break;M.width(E.sizeCalculated)}}this.initResize();var a=$("#grid_"+this.name+"_columns");var f=$("#grid_"+this.name+"_records");if(this.last_scrollTop!=""&&f.length>0){a.prop("scrollLeft",this.last_scrollLeft);f.prop("scrollTop",this.last_scrollTop);f.prop("scrollLeft",this.last_scrollLeft)}},getSearchesHTML:function(){var e='<table cellspacing="0">';var t=false;for(var n=0;n<this.searches.length;n++){var r=this.searches[n];if(r.hidden)continue;var i="";if(t==false){i='<input type="button" value="X" onclick="obj = w2ui[\''+this.name+"']; if (obj) { obj.searchClose(); }\">";t=true}if(typeof r.inTag=="undefined")r.inTag="";if(typeof r.outTag=="undefined")r.outTag="";if(typeof r.type=="undefined")r.type="text";if(r.type=="text"){var s='<select id="grid_'+this.name+"_operator_"+n+'">'+'	<option value="is">is</option>'+'	<option value="begins with">begins with</option>'+'	<option value="contains">contains</option>'+'	<option value="ends with">ends with</option>'+"</select>"}if(r.type=="int"||r.type=="float"||r.type=="date"){var s='<select id="grid_'+this.name+"_operator_"+n+'" onchange="var el = $(\'#grid_'+this.name+"_range_"+n+"'); "+"					if ($(this).val() == 'is') el.hide(); else el.show();\">"+'	<option value="is">is</option>'+'	<option value="between">between</option>'+"</select>"}if(r.type=="list"){var s='is <input type="hidden" value="is" id="grid_'+this.name+"_operator_"+n+'">'}e+="<tr>"+'	<td width="20px" style="padding-right: 20px">'+i+"</td>"+'	<td class="caption" style="border-right1: 0px">'+r.caption+"</td>"+'	<td class="caption" style="text-align: left; padding: 0px 10px;">'+s+"</td>"+'	<td class="value">';switch(r.type){case"alphaNumeric":case"text":e+='<input rel="search" type="text" size="40" id="grid_'+this.name+"_field_"+n+'" name="'+r.field+'" '+r.inTag+">";break;case"int":case"float":case"hex":case"money":case"date":e+='<input rel="search" type="text" size="12" id="grid_'+this.name+"_field_"+n+'" name="'+r.field+'" '+r.inTag+">"+'<span id="grid_'+this.name+"_range_"+n+'" style="display: none">'+' -  <input rel="search" type="text" size="12" id="grid_'+this.name+"_field2_"+n+'" name="'+r.field+'" '+r.inTag+">"+"</span>";break;case"list":e+='<select rel="search" id="grid_'+this.name+"_field_"+n+'" name="'+r.field+'" '+r.inTag+"></select>";break}e+=r.outTag+"	</td>"+"</tr>"}e+="<tr>"+'	<td colspan="4" class="caption" style="border-right: 0px; padding: 20px 0px 5px 0px !important; text-align: center;">'+'		<input type="button" onclick="obj = w2ui[\''+this.name+'\']; if (obj) { obj.searchReset(); }" style="width: 60px; margin: 0px 2px;" value="Reset">'+'		<input type="button" onclick="obj = w2ui[\''+this.name+'\']; if (obj) { obj.search(); }" style="width: 60px; margin: 0px 2px;" value="Search">'+"	</td>"+"</tr></table>";return e},getColumnsHTML:function(){var e="";switch(this.layout){case"table":if(this.show.columnHeaders){if(this.columnGroups.length>0){if(this.columnGroups[this.columnGroups.length-1].caption!="")this.columnGroups.push({caption:""});e+="<tr>";if(this.show.lineNumbers){e+='<td id="grid_'+this.name+'_cell_header_number" class="w2ui-head">'+'	<div style="cursor: default; overflow: hidden; width: 24px; text-align: center;"> </div>'+"</td>"}if(this.show.selectColumn){e+='<td id="grid_'+this.name+'_cell_header_select" class="w2ui-head">'+'	<div style="cursor: default; overflow: hidden; width: 23px; text-align: center;"> </div>'+"</td>"}if(this.show.expandColumn){e+='<td id="grid_'+this.name+'_cell_header_expand" class="w2ui-head">'+'<div style="cursor: default; overflow: hidden; width: 23px;"> </div></td>'}var t=0;for(var n=0;n<this.columnGroups.length;n++){var r=this.columnGroups[n];var i=this.columns[t];if(typeof r.span=="undefined"||r.span!=parseInt(r.span))r.span=1;if(typeof r.colspan!="undefined")r.span=r.colspan;if(r.master===true){var s="";for(var o in this.sortData){if(this.sortData[o].field==i.field){if(this.sortData[o].direction=="asc")s="w2ui-sort-down";if(this.sortData[o].direction=="desc")s="w2ui-sort-up"}}var u="";if(i.resizable==true){u='<div class="w2ui-resizer" name="'+t+'" style="position: absolute; width: 6px; height: 12px; '+'		background-color: #e4e4e4; cursor: col-resize; padding: 0px; margin: 0px;"></div>'}e+='<td id="grid_'+this.name+"_cell_header_"+t+'" class="w2ui-head" rowspan="2"'+(i.sortable?"onclick=\"w2ui['"+this.name+"'].doSort('"+i.field+"', null, event);\"":"")+'		style="height: auto !important; '+(t==this.columns.length-1?"border-right: 1px solid transparent;":"")+'">'+'<div name="columnGroup"><div class="'+s+'" style="height: auto !important; text-align: center; cursor: default; width: 100%; overflow: hidden;">'+(i.caption==""?" ":i.caption)+"</div></div>"+u+"</td>"}else{e+='<td id="grid_'+this.name+"_cell_group_header_"+t+'" class="w2ui-head" '+'		colspan="'+(r.span+(n==this.columnGroups.length-1?1:0))+'" '+'		style="height: auto !important; text-align: center; '+(n==this.columns.length-1?"border-right: 1px solid transparent;":"")+'">'+'<div><div style="height: auto !important; cursor: default; width: 100% !important; overflow: hidden;">'+(r.caption==""?" ":r.caption)+"</div></div>"+"</td>"}t+=r.span}e+="</tr>"}e+="<tr>";if(this.show.lineNumbers){e+='<td id="grid_'+this.name+'_cell_header_number" class="w2ui-head">'+'	<div style="cursor: default; overflow: hidden; width: 24px; text-align: center;">#</div>'+"</td>"}if(this.show.selectColumn){e+='<td id="grid_'+this.name+'_cell_header_select" class="w2ui-head" onclick="event.stopPropagation();">'+'<div style="cursor: default; text-align: center; overflow: hidden; width: 23px; padding: 0px; margin: 0px;">'+'	<input type="checkbox" id="grid_'+this.name+'_check_all" tabIndex="-1"'+"		onclick=\"if (this.checked) w2ui['"+this.name+"'].selectPage(); "+"				 else w2ui['"+this.name+"'].selectNone(); event.stopPropagation();\" "+'		style="display: inline-block; margin: 6px 5px; padding: 0px;">'+"</div>"+"</td>"}if(this.show.expandColumn){e+='<td id="grid_'+this.name+'_cell_header_expand" class="w2ui-head">'+'<div style="cursor: default; overflow: hidden; width: 23px;"> </div></td>'}var t=0;var a=0;for(var n=0;n<this.columns.length;n++){var i=this.columns[n];var r={};if(n==a){a=a+(typeof this.columnGroups[t]!="undefined"?parseInt(this.columnGroups[t].span):0);t++}if(typeof this.columnGroups[t-1]!="undefined")var r=this.columnGroups[t-1];if(i.hidden)continue;var s="";for(var o in this.sortData){if(this.sortData[o].field==i.field){if(this.sortData[o].direction=="asc")s="w2ui-sort-down";if(this.sortData[o].direction=="desc")s="w2ui-sort-up"}}if(r["master"]!==true){var u="";if(i.resizable==true){u='<div class="w2ui-resizer" name="'+n+'" style="position: absolute; width: 6px; height: 12px; '+'		background-color: #e4e4e4; cursor: col-resize; padding: 0px; margin: 0px;"></div>'}e+='<td id="grid_'+this.name+"_cell_header_"+n+'" class="w2ui-head" '+(i.sortable?"onclick=\"w2ui['"+this.name+"'].doSort('"+i.field+"', null, event);\"":"")+'		style="height: auto !important; '+(n==this.columns.length-1?"border-right: 1px solid transparent;":"")+'">'+'<div><div class="'+s+'" style="height: auto !important; cursor: default; width: 100%; overflow: hidden;">'+i.caption+"</div></div>"+u+"</td>"}}e+='<td id="grid_'+this.name+'_cell_header_last" class="w2ui-head" style="border-right: 0px; display: none;">'+'	<div style="width: 2000px; overflow: hidden;"> </div></td>';e+="</tr>"}break;case"div":break}return e},getRecordsHTML:function(){var e="";var t="";var n=0;switch(this.layout){case"table":if(this.records.length==0&&this.isLoaded&&!this.show.emptyRecords){e+='<tr><td colspan=100 style="padding: 10px; border: 0px;">'+this.msgNoData+"</div>"}else{var r=0;if(this.url==""){var i=this.page*this.recordsPerPage;for(var s=0;s<this.records.length;s++){if(this.records[s]&&this.records[s].hidden)continue;i--;if(i<0){r=s;break}}}for(var o=r,u=0,a=0;a<this.recordsPerPage&&o<this.records.length;o++){var f=this.records[o];if(!f||f.hidden===true)continue;var l="";a++;var c="";if(typeof f["style"]!="undefined"){c+=f["style"]}if(f.selected){l+='<tr id="grid_'+this.name+"_rec_"+f.recid+'" recid="'+f.recid+'" line="'+o+'" class="w2ui-selected" '+(this.isIOS?"    onclick 	 = \"w2ui['"+this.name+"'].doDblClick('"+f.recid+"', event);\" ":"    onclick     = \"var obj = w2ui['"+this.name+"']; var evnt = event; "+"					clearTimeout(obj._click_timer); "+"					obj._click_timer = setTimeout(function () { obj.doClick('"+f.recid+"', evnt); }, 1);\""+"    ondblclick  = \"w2ui['"+this.name+"'].doDblClick('"+f.recid+"', event);\" ")+(c!=""?'custom_style="'+c+'"':"")+">"}else{l+='<tr id="grid_'+this.name+"_rec_"+f.recid+'" recid="'+f.recid+'" line="'+o+'" class="'+(u%2==0?"w2ui-odd":"w2ui-even")+'" '+(this.isIOS?"    onclick  	 = \"w2ui['"+this.name+"'].doDblClick('"+f.recid+"', event);\" ":"    onclick     = \"var obj = w2ui['"+this.name+"']; var evnt = event; "+"					clearTimeout(obj._click_timer); "+"					obj._click_timer = setTimeout(function () { obj.doClick('"+f.recid+"', evnt); }, 1);\""+"    ondblclick  = \"w2ui['"+this.name+"'].doDblClick('"+f.recid+"', event);\" ")+(c!=""?'custom_style="'+c+'" style="'+c+'"':"")+">"}var h=parseInt(this.page)*parseInt(this.recordsPerPage)+parseInt(o+1);if(this.show.lineNumbers){l+='<td id="grid_'+this.name+"_cell_"+o+'_number" class="w2ui-number">'+'	<div style="width: 24px; cursor: default; overflow: hidden;">'+(r+a)+"</div>"+"</td>"}if(this.show.selectColumn){l+='<td id="grid_'+this.name+"_cell_"+o+'_select" class="w2ui-grid-data" onclick="event.stopPropagation();">'+'<div style="cursor: default; text-align: center; overflow: hidden; width: 23px; padding: 0px; margin: 0px;">'+'	<input id="grid_'+this.name+"_cell_"+o+'_select_check" class="grid_select_check" type="checkbox" tabIndex="-1"'+'		style="display: inline-block; margin: 6px 5px; padding: 0px;" '+(f.selected?'checked="checked"':"")+"		onclick=\"var obj = w2ui['"+this.name+"']; if (!obj.multiSelect) { obj.selectNone(); }"+"			if (this.checked) obj.select('"+f.recid+"'); else obj.unselect('"+f.recid+"'); "+'			event.stopPropagation();">'+"</div>"+"</td>"}if(this.show.expandColumn){l+='<td id="grid_'+this.name+"_cell_"+o+'_expand" class="w2ui-grid-data">'+'	<div ondblclick="event.stopPropagation()" '+"		 onclick=\"w2ui['"+this.name+"'].doExpand("+f.recid+', event); event.stopPropagation();" '+'		 style="width: 23px; cursor: pointer; text-align: center; overflow: hidden; font-weight: bold;"> + </div>'+"</td>"}var p=0;while(true){var d=this.columns[p];if(d.hidden){p++;if(typeof this.columns[p]=="undefined")break;else continue}var v="";if(String(d.field).indexOf(".")>-1){var m=String(d.field).split(".");v=f[m[0]];if(typeof v=="object"&&v!=null){v=v[m[1]]}}else{v=f[d.field]}if(typeof d.render!="undefined"){if(typeof d.render=="function")v=d.render.call(this,this.records[o],o);if(typeof d.render=="object")v=d.render[this.records[o][d.field]]}if(v==null||typeof v=="undefined")v="";if(typeof d.render=="string"){switch(d.render.toLowerCase()){case"url":var g=v.indexOf("/",8);v='<a href="'+v+'" target="_blank">'+v.substr(0,g)+"</a>";break;case"repeat":if(o>0&&this.records[o][d.field]==this.records[o-1][d.field]&&this.records[o][d.field]!=""){v="-- // --"}break}}l+='<td class="w2ui-grid-data" valign="top" id="grid_'+this.name+"_cell_"+o+"_"+p+'" '+'	style="cursor: default; padding: 0px; margin: 0px; '+(typeof d.style!="undefined"?d.style:"")+'" '+(typeof d.attr!="undefined"?d.attr:"")+">";if(this.fixedRecord){if($.isPlainObject(d.editable)){var y=d.editable;if(y.type=="enum")console.log("ERROR: Grid's inline editing does not support enum field type.");if(typeof y.inTag=="undefined")y.inTag="";if(typeof y.outTag=="undefined")y.outTag="";if(typeof y.style=="undefined")y.style="";if(typeof y.items=="undefined")y.items=[];if((typeof f["editable"]=="undefined"||f["editable"]===true)&&y.type!="enum"){l+='<div style="width: 100%; overflow: hidden; margin: 0px; padding: 0px;">'+'<input id="grid_'+this.name+"_edit_"+o+"_"+p+'" value="'+v+'" type="text" class="w2ui-editable" style="'+y.style+'" '+'	field="'+d.field+'" recid="'+f.recid+'" line="'+o+'" column="'+p+'" '+"	onclick = \"w2ui['"+this.name+"'].doEdit('click', this, event);\" "+"	onkeyup = \"w2ui['"+this.name+"'].doEdit('keyup', this, event);\" "+"	onfocus = \"w2ui['"+this.name+"'].doEdit('focus', this, event);\" "+"	onblur  = \"w2ui['"+this.name+"'].doEdit('blur', this, event);\" "+'	ondblclick = "event.stopPropagation(); this.select();" '+y.inTag+" >"+y.outTag+"</div>"}else{l+='<div style="width: 100%; overflow: hidden;">'+v+"</div>"}}else{l+='<div style="width: 100%; overflow: hidden;" title="'+String(v).replace(/"/g,"''")+'">'+v+"</div>"}}else{l+='<div style="width: 100%; height: auto; overflow: visible;">'+v+"</div>"}l+="</td>";p++;if(typeof this.columns[p]=="undefined")break}l+="</tr>";if(f.summary===true){if(n%2){t+=String(l).replace("w2ui-odd","w2ui-even")}else{t+=String(l).replace("w2ui-even","w2ui-odd")}n++}else{e+=l}u++}}break}if(t!=""){this.summary='<table cellpadding="0" cellspacing="0" style="table-layout: fixed;">'+t+"</table>"}else{this.summary=""}return e},getFooterHTML:function(){var e=Math.floor(this.total/this.recordsPerPage);if(this.total%this.recordsPerPage!=0||e==0)e++;if(e<1)e=1;var t="<style> "+"	a.w2btn { display: inline-block; border-radius: 3px; cursor: pointer; font-size: 11px; line-height: 16px; padding: 0px 5px; width: 30px; height: 18px;} "+"	a.w2btn:hover { background-color: #AEC8FF; } "+"</style>";t+='<div style="width: 110px; margin: 0 auto; padding: 0px; text-align: center" class="w2ui-footer-nav">'+'		<a class="w2btn" style="float: left;" '+"  		onclick=\"w2ui['"+this.name+"'].goto(w2ui['"+this.name+"'].page - 1)\" "+(this.page==0?"disabled":"")+"		> << </a>"+'		<input type="text" value="'+(this.page+1)+'" '+'			onclick="this.select();" style="width: 40px; padding: 1px 2px 2px 2px; text-align: center;" '+'			onkeyup="if (event.keyCode != 13) return;  '+"					  if (this.value < 1) this.value = 1; "+"					  w2ui['"+this.name+"'].goto(parseInt(this.value-1)); \"> "+'		<a class="w2btn" style="float: right;" '+"  		onclick=\"w2ui['"+this.name+"'].goto(w2ui['"+this.name+"'].page + 1)\" "+(this.page==e-1||e==0?"disabled":"")+"		> >> </a>"+"</div>";return t},showStatus:function(e){var t=this;$("#grid_"+this.name).append('<div id="grid_'+this.name+'_lock" class="w2ui-grid-lock" style="position: absolute; display: none;"></div>'+'<div id="grid_'+this.name+'_status" class="w2ui-grid-status" style="position: absolute; display: none;"></div>');setTimeout(function(){var e=$("#grid_"+t.name+"_lock");var n=$("#grid_"+t.name+"_status");n.data("old_opacity",n.css("opacity")).css("opacity","0").show();e.data("old_opacity",e.css("opacity")).css("opacity","0").show();setTimeout(function(){var r=($(t.box).width()-w2utils.getSize(n,"width"))/2;var i=($(t.box).height()*.9-w2utils.getSize(n,"height"))/2;e.css({opacity:e.data("old_opacity"),left:"0px",top:"0px",width:"100%",height:"100%"});n.html("Refreshing...").css({opacity:n.data("old_opacity"),left:r+"px",top:i+"px"})},10)},10)},hideStatus:function(){var e=this;setTimeout(function(){$("#grid_"+e.name+"_lock").remove();$("#grid_"+e.name+"_status").remove()},25)}};$.extend(w2grid.prototype,$.w2event)})();(function(){var e=function(e){this.box=null;this.name=null;this.panels=[];this.padding=1;this.spacer=4;this.style="";this.css="";this.width=null;this.height=null;this.onShow=null;this.onHide=null;this.onResizing=null;this.onRender=null;this.onRefresh=null;this.onResize=null;this.onDestroy=null;$.extend(true,this,e)};$.fn.w2layout=function(t){if(typeof t==="object"||!t){if(!t||typeof t.name=="undefined"){$.error('The parameter "name" is required but not supplied in $().w2layout().');return}if(typeof w2ui[t.name]!="undefined"){$.error('The parameter "name" is not unique. There are other objects already created with the same name (obj: '+t.name+").");return}var n=t.panels;var r=new e(t);$.extend(r,{handlers:[],panels:[]});for(var i in n){r.panels[i]=$.extend({},e.prototype.panel,n[i])}if($(this).length>0){$(this).data("w2name",r.name);r.render($(this)[0])}w2ui[r.name]=r;return r}else if(typeof $(this).data("w2name")!="undefined"){var s=w2ui[$(this).data("w2name")];s[t].apply(s,Array.prototype.slice.call(arguments,1));return this}else{$.error("Method "+t+" does not exist on jQuery.w2layout")}};e.prototype={panel:{type:null,size:100,minSize:20,hidden:false,resizable:false,overflow:"auto",style:"",content:"",width:null,height:null,onRefresh:null,onShow:null,onHide:null},add:function(e){if(!$.isArray(e))e=[e];for(var t in e){var n=$.extend({},n,e[t]);this.panels.push(n);this.refresh(n.type)}},remove:function(e){var t=0;for(var n in arguments){var r=this.getIndex(arguments[n]);if(r==null||this.panels[r].type=="main")continue;t++;this.panels.splice(r,1);this.resize()}return t},content:function(e,t,n){var r=this;var i=this.get(e);if(i==null)return false;if($("#layout_"+this.name+"_panel2_"+i.type).length>0)return false;$("#layout_"+this.name+"_panel_"+i.type).scrollTop(0);if(t==null||typeof t=="undefined"){return i.content}else{if(i.content==""){i.content=t;if(!i.hidden)this.refresh(e)}else{i.content=t;if(!i.hidden){if(n!=null&&n!=""&&typeof n!="undefined"){if(String(n).substr(0,5)=="slide"){var s="layout_"+this.name+"_panel_"+i.type;var o=$("#"+s);var u=o.html();var a=o[0].style.cssText;o.attr("id","layout_"+this.name+"_panel_"+i.type+"_trans");o.html('<div id="'+s+'_old"></div><div id="'+s+'"></div>');o.find("#"+s+"")[0].style.cssText=o[0].style.cssText+"; left: 0px !important; top: 0px !important; "+"-webkit-transition: 0s; -moz-transition: 0s; -ms-transition: 0s; -o-transition: 0s;";o.find("#"+s+"_old")[0].style.cssText=o[0].style.cssText+"; left: 0px !important; top: 0px !important; "+"-webkit-transition: 0s; -moz-transition: 0s; -ms-transition: 0s; -o-transition: 0s;";o[0].style.cssText+="border: 0px; margin: 0px; padding: 0px; outline: 0px; overflow: hidden;";if(typeof t=="object"){t.box=o.find("#"+s)[0];t.render()}else{o.find("#"+s).html(t)}o.find("#"+s+"_old").html(u);var r=this;w2utils.transition(o.find("#"+s+"_old")[0],o.find("#"+s)[0],n,function(){var e=$("#layout_"+r.name+"_panel_"+i.type+"_trans");if(e.length>0){e[0].style.cssText=a;e.attr("id","layout_"+r.name+"_panel_"+i.type).html(e.find("#"+s).html())}if(window.navigator.userAgent.indexOf("MSIE"))setTimeout(function(){r.resize()},100)})}else{$("#layout_"+this.name+"_panel_"+i.type).before('<div id="layout_'+this.name+"_panel2_"+i.type+'">'+t+"</div>");$("#layout_"+this.name+"_panel2_"+i.type)[0].style.cssText=$("#layout_"+this.name+"_panel_"+i.type)[0].style.cssText;if(typeof t=="object"){t.render($("#layout_"+this.name+"_panel2_"+i.type)[0])}var f=$("#layout_"+this.name+"_panel2_"+i.type)[0];var l=$("#layout_"+this.name+"_panel_"+i.type)[0];var r=this;w2utils.transition(l,f,n,function(){$("#layout_"+r.name+"_panel_"+i.type).remove();$("#layout_"+r.name+"_panel2_"+i.type).attr("id","layout_"+r.name+"_panel_"+i.type);i.content=t;if(window.navigator.userAgent.indexOf("MSIE"))setTimeout(function(){r.resize()},100)})}}else{if(!i.hidden)this.refresh(e)}}}}if(window.navigator.userAgent.indexOf("MSIE"))setTimeout(function(){r.resize()},100)},load:function(e,t,n,r){var i=this;$.get(t,function(t,s,o){i.content(e,o.responseText,n);if(r)r();if(window.navigator.userAgent.indexOf("MSIE"))setTimeout(function(){i.resize()},100)})},show:function(e,t){var n=this.trigger({phase:"before",type:"show",target:e,panel:this.get(e),immediate:t});if(n.stop===true)return false;var r=this.get(e);if(r==null)return false;r.hidden=false;if(t===true){$("#layout_"+this.name+" #layout_"+this.name+"_panel_"+e).css({opacity:"1"});if(r.resizabled)$("#layout_"+this.name+" #layout_"+this.name+"_splitter_"+e).show();this.trigger($.extend(n,{phase:"after"}));this.resize()}else{var i=this;if(r.resizabled)$("#layout_"+i.name+" #layout_"+i.name+"_splitter_"+e).show();$("#layout_"+i.name+" #layout_"+i.name+"_panel_"+e).css({opacity:"0"});$("#layout_"+this.name+" .w2ui-panel").css({"-webkit-transition":".2s","-moz-transition":".2s","-ms-transition":".2s","-o-transition":".2s"});setTimeout(function(){i.resize()},1);setTimeout(function(){$("#layout_"+i.name+" #layout_"+i.name+"_panel_"+e).css({opacity:"1"})},250);setTimeout(function(){$("#layout_"+i.name+" .w2ui-panel").css({"-webkit-transition":"0s","-moz-transition":"0s","-ms-transition":"0s","-o-transition":"0s"});i.trigger($.extend(n,{phase:"after"}));i.resize()},500)}},hide:function(e,t){var n=this.trigger({phase:"before",type:"hide",target:e,panel:this.get(e),immediate:t});if(n.stop===true)return false;var r=this.get(e);if(r==null)return false;r.hidden=true;if(t===true){$("#layout_"+this.name+" #layout_"+this.name+"_panel_"+e).css({opacity:"0"});$("#layout_"+this.name+" #layout_"+this.name+"_splitter_"+e).hide();this.trigger($.extend(n,{phase:"after"}));this.resize()}else{var i=this;$("#layout_"+i.name+" #layout_"+i.name+"_splitter_"+e).hide();$("#layout_"+this.name+" .w2ui-panel").css({"-webkit-transition":".2s","-moz-transition":".2s","-ms-transition":".2s","-o-transition":".2s"});$("#layout_"+this.name+" #layout_"+this.name+"_panel_"+e).css({opacity:"0"});setTimeout(function(){i.resize()},1);setTimeout(function(){$("#layout_"+i.name+" .w2ui-panel").css({"-webkit-transition":"0s","-moz-transition":"0s","-ms-transition":"0s","-o-transition":"0s"});i.trigger($.extend(n,{phase:"after"}));i.resize()},500)}},toggle:function(e,t){var n=this.get(e);if(n==null)return false;if(n.hidden)this.show(e,t);else this.hide(e,t)},set:function(e,t){var n=this.getIndex(e);if(n==null)return false;$.extend(this.panels[n],t);this.refresh(e);return true},get:function(e){var t=null;for(var n in this.panels){if(this.panels[n].type==e){t=this.panels[n];break}}return t},getIndex:function(e){var t=null;for(var n in this.panels){if(this.panels[n].type==e){t=n;break}}return t},render:function(t){if(window.getSelection)window.getSelection().removeAllRanges();var n=this.trigger({phase:"before",type:"render",target:this.name,box:t});if(n.stop===true)return false;if(typeof t!="undefined"&&t!=null){$(this.box).html("");this.box=t}if(!this.box)return;if(this.get("main")==null)this.panels.push($.extend({},e.prototype.panel,{type:"main"}));if(this.get("css")==null)this.panels.push($.extend({},e.prototype.panel,{type:"css"}));var r='<div id="layout_'+this.name+'" class="w2ui-layout" style="position: absolute; overflow: hidden; '+this.style+'"></div>';$(this.box).html(r);var i=["top","left","main","preview","right","bottom"];for(var s in i){var r='<div id="layout_'+this.name+"_panel_"+i[s]+'" class="w2ui-panel"'+'	style="position: absolute; z-index: 120; display: none;">'+"</div>"+'<div id="layout_'+this.name+"_splitter_"+i[s]+'" class="w2ui-splitter"'+'	style="position: absolute; z-index: 121; display: none;">'+"</div>";$("#layout_"+this.name+"").append(r)}$("#layout_"+this.name+"").append('<style id="layout_'+this.name+'_panel_css" style="position: absolute; top: 10000px;">'+this.css+"</style>");this.trigger($.extend(n,{phase:"after"}));this.refresh();this.initEvents()},refresh:function(e){if(window.getSelection)window.getSelection().removeAllRanges();if(typeof e=="undefined")e=null;var t=this.trigger({phase:"before",type:"refresh",target:typeof e!="undefined"?e:this.name,panel:this.get(e)});if(t.stop===true)return false;if(e!=null&&typeof e!="undefined"){var n=this.get(e);if(n==null)return false;var r=$("#layout_"+this.name+" #layout_"+this.name+"_panel_"+e).css({display:n.hidden?"none":"block",overflow:n.overflow});if(r.length>0)r[0].style.cssText+=n.style;if(typeof n.content=="object"&&n.content.render){n.content.render($("#layout_"+this.name+" #layout_"+this.name+"_panel_"+n.type)[0])}else{$("#layout_"+this.name+" #layout_"+this.name+"_panel_"+n.type).html(n.content)}}else{if($("#layout_"+this.name+" #layout_"+this.name+"_panel_main").length<=0){this.render();return}this.resize();for(var n in this.panels){this.refresh(this.panels[n].type)}}this.trigger($.extend(t,{phase:"after"}));return true},resize:function(e,t){if(window.getSelection)window.getSelection().removeAllRanges();if(!this.box)return;var n=this.trigger({phase:"before",type:"resize",target:this.name,width:e,height:t});if(n.stop===true)return false;this.width=parseInt($(this.box).width());this.height=parseInt($(this.box).height());if(typeof e!="undefined"&&e!=null)this.width=parseInt(e);if(typeof t!="undefined"&&t!=null)this.height=parseInt(t);$("#layout_"+this.name+"").css({width:this.width+"px",height:this.height+"px"});var r=this;var i=this.get("main");var s=this.get("preview");var o=this.get("left");var u=this.get("right");var a=this.get("top");var f=this.get("bottom");var l=true;var c=s!=null&&s.hidden!=true?true:false;var h=o!=null&&o.hidden!=true?true:false;var p=u!=null&&u.hidden!=true?true:false;var d=a!=null&&a.hidden!=true?true:false;var v=f!=null&&f.hidden!=true?true:false;if(a&&String(a.size).substr(String(a.size).length-1)=="%"){a.size=this.height*parseInt(a.size)/100}if(o&&String(o.size).substr(String(o.size).length-1)=="%"){o.size=this.height*parseInt(o.size)/100}if(u&&String(u.size).substr(String(u.size).length-1)=="%"){u.size=this.height*parseInt(u.size)/100}if(f&&String(f.size).substr(String(f.size).length-1)=="%"){f.size=this.height*parseInt(f.size)/100}if(s&&String(s.size).substr(String(s.size).length-1)=="%"){s.size=(this.height-(a&&!a.hidden?a.size:0)-(f&&!f.hidden?f.size:0))*parseInt(s.size)/100}if(a)a.size=parseInt(a.size);if(o)o.size=parseInt(o.size);if(s)s.size=parseInt(s.size);if(u)u.size=parseInt(u.size);if(f)f.size=parseInt(f.size);if(a!=null&&a.hidden!=true){var m=0;var g=0;var y=this.width;var b=a.size;$("#layout_"+this.name+" #layout_"+this.name+"_panel_top").css({display:"block",left:m+"px",top:g+"px",width:y+"px",height:b+"px"}).show();a.width=y;a.height=b;if(a.resizable){g=a.size;b=this.spacer;$("#layout_"+this.name+" #layout_"+this.name+"_splitter_top").show().css({display:"block",left:m+"px",top:g+"px",width:y+"px",height:b+"px",cursor:"ns-resize"}).bind("mousedown",function(e){w2ui[r.name].startResize("top",e);return false})}}else{$("#layout_"+this.name+" #layout_"+this.name+"_panel_top").hide()}if(o!=null&&o.hidden!=true){var m=0;var g=0+(d?a.size+(a.resizable?this.spacer:this.padding):0);var y=o.size;var b=this.height-(d?a.size+(a.resizable?this.spacer:this.padding):0)-(v?f.size+(f.resizable?this.spacer:this.padding):0);var w=$("#layout_"+this.name+" #layout_"+this.name+"_panel_left");if(window.navigator.userAgent.indexOf("MSIE")>0&&w.length>0&&w[0].clientHeight<w[0].scrollHeight)y+=17;$("#layout_"+this.name+" #layout_"+this.name+"_panel_left").css({display:"block",left:m+"px",top:g+"px",width:y+"px",height:b+"px"}).show();o.width=y;o.height=b;if(o.resizable){m=o.size;y=this.spacer;$("#layout_"+this.name+" #layout_"+this.name+"_splitter_left").show().css({display:"block",left:m+"px",top:g+"px",width:y+"px",height:b+"px",cursor:"ew-resize"}).bind("mousedown",function(e){w2ui[r.name].startResize("left",e);return false})}}else{$("#layout_"+this.name+" #layout_"+this.name+"_panel_left").hide();$("#layout_"+this.name+" #layout_"+this.name+"_splitter_left").hide()}if(u!=null&&u.hidden!=true){var m=this.width-u.size;var g=0+(d?a.size+(a.resizable?this.spacer:this.padding):0);var y=u.size;var b=this.height-(d?a.size+(a.resizable?this.spacer:this.padding):0)-(v?f.size+(f.resizable?this.spacer:this.padding):0);$("#layout_"+this.name+" #layout_"+this.name+"_panel_right").css({display:"block",left:m+"px",top:g+"px",width:y+"px",height:b+"px"}).show();u.width=y;u.height=b;if(u.resizable){m=m-this.spacer;y=this.spacer;$("#layout_"+this.name+" #layout_"+this.name+"_splitter_right").show().css({display:"block",left:m+"px",top:g+"px",width:y+"px",height:b+"px",cursor:"ew-resize"}).bind("mousedown",function(e){w2ui[r.name].startResize("right",e);return false})}}else{$("#layout_"+this.name+" #layout_"+this.name+"_panel_right").hide()}if(f!=null&&f.hidden!=true){var m=0;var g=this.height-f.size;var y=this.width;var b=f.size;$("#layout_"+this.name+" #layout_"+this.name+"_panel_bottom").css({display:"block",left:m+"px",top:g+"px",width:y+"px",height:b+"px"}).show();f.width=y;f.height=b;if(f.resizable){g=g-this.spacer;b=this.spacer;$("#layout_"+this.name+" #layout_"+this.name+"_splitter_bottom").show().css({display:"block",left:m+"px",top:g+"px",width:y+"px",height:b+"px",cursor:"ns-resize"}).bind("mousedown",function(e){w2ui[r.name].startResize("bottom",e);return false})}}else{$("#layout_"+this.name+" #layout_"+this.name+"_panel_bottom").hide()}var m=0+(h?o.size+(o.resizable?this.spacer:this.padding):0);var g=0+(d?a.size+(a.resizable?this.spacer:this.padding):0);var y=this.width-(h?o.size+(o.resizable?this.spacer:this.padding):0)-(p?u.size+(u.resizable?this.spacer:this.padding):0);var b=this.height-(d?a.size+(a.resizable?this.spacer:this.padding):0)-(v?f.size+(f.resizable?this.spacer:this.padding):0)-(c?s.size+(s.resizable?this.spacer:this.padding):0);var w=$("#layout_"+this.name+" #layout_"+this.name+"_panel_main");if(window.navigator.userAgent.indexOf("MSIE")>0&&w.length>0&&w[0].clientHeight<w[0].scrollHeight)y+=17;$("#layout_"+this.name+" #layout_"+this.name+"_panel_main").css({display:"block",left:m+"px",top:g+"px",width:y+"px",height:b+"px"});i.width=y;i.height=b;if(s!=null&&s.hidden!=true){var m=0+(h?o.size+(o.resizable?this.spacer:this.padding):0);var g=this.height-(v?f.size+(f.resizable?this.spacer:this.padding):0)-s.size;var y=this.width-(h?o.size+(o.resizable?this.spacer:this.padding):0)-(p?u.size+(u.resizable?this.spacer:this.padding):0);var b=s.size;var w=$("#layout_"+this.name+" #layout_"+this.name+"_panel_preview");if(window.navigator.userAgent.indexOf("MSIE")>0&&w.length>0&&w[0].clientHeight<w[0].scrollHeight)y+=17;$("#layout_"+this.name+" #layout_"+this.name+"_panel_preview").css({display:"block",left:m+"px",top:g+"px",width:y+"px",height:b+"px"}).show();s.width=y;s.height=b;if(s.resizable){g=g-this.spacer;b=this.spacer;$("#layout_"+this.name+" #layout_"+this.name+"_splitter_preview").show().css({display:"block",left:m+"px",top:g+"px",width:y+"px",height:b+"px",cursor:"ns-resize"}).bind("mousedown",function(e){w2ui[r.name].startResize("preview",e);return false})}}else{$("#layout_"+this.name+" #layout_"+this.name+"_panel_preview").hide()}for(var E in this.panels){var S=this.panels[E];if(typeof S.content=="object"&&S.content.resize){S.content.resize()}}var r=this;clearTimeout(this._resize_timer);this._resize_timer=setTimeout(function(){for(var e in w2ui){if(typeof w2ui[e].resize=="function"&&typeof w2ui[e].panels=="undefined")w2ui[e].resize()}},200);this.trigger($.extend(n,{phase:"after"}))},destroy:function(){var e=this.trigger({phase:"before",type:"destroy",target:this.name});if(e.stop===true)return false;$(this.box).html("");delete w2ui[this.name];this.trigger($.extend(e,{phase:"after"}))},initEvents:function(){var e=this;$(window).on("resize",function(t){w2ui[e.name].resize()});$(window).on("mousemove",function(t){w2ui[e.name].doResize(t)});$(window).on("mouseup",function(t){w2ui[e.name].stopResize(t)})},startResize:function(e,t){if(!this.box)return;if(!t)t=window.event;if(!window.addEventListener){window.document.attachEvent("onselectstart",function(){return false})}this.tmp_resizing=e;this.tmp_x=t.screenX;this.tmp_y=t.screenY;if(e=="left"||e=="right"){this.tmp_value=parseInt($("#layout_"+this.name+"_splitter_"+e)[0].style.left)}if(e=="top"||e=="preview"||e=="bottom"){this.tmp_value=parseInt($("#layout_"+this.name+"_splitter_"+e)[0].style.top)}},doResize:function(e){if(!this.box)return;if(!e)e=window.event;if(typeof this.tmp_resizing=="undefined")return;var t=this.get(this.tmp_resizing);var n=this.trigger({phase:"before",type:"resizing",target:this.tmp_resizing,object:t,event:e});if(n.stop===true)return false;var r=$("#layout_"+this.name+"_splitter_"+this.tmp_resizing);if(!r.hasClass("active"))r.addClass("active");this.tmp_div_x=e.screenX-this.tmp_x;this.tmp_div_y=e.screenY-this.tmp_y;if(this.tmp_resizing=="left"&&this.get("left").minSize-this.tmp_div_x>this.get("left").width){this.tmp_div_x=this.get("left").minSize-this.get("left").width}if(this.tmp_resizing=="left"&&this.get("main").minSize+this.tmp_div_x>this.get("main").width){this.tmp_div_x=this.get("main").width-this.get("main").minSize}if(this.tmp_resizing=="right"&&this.get("right").minSize+this.tmp_div_x>this.get("right").width){this.tmp_div_x=this.get("right").width-this.get("right").minSize}if(this.tmp_resizing=="right"&&this.get("main").minSize-this.tmp_div_x>this.get("main").width){this.tmp_div_x=this.get("main").minSize-this.get("main").width}if(this.tmp_resizing=="top"&&this.get("top").minSize-this.tmp_div_y>this.get("top").height){this.tmp_div_y=this.get("top").minSize-this.get("top").height}if(this.tmp_resizing=="top"&&this.get("main").minSize+this.tmp_div_y>this.get("main").height){this.tmp_div_y=this.get("main").height-this.get("main").minSize}if(this.tmp_resizing=="bottom"&&this.get("bottom").minSize+this.tmp_div_y>this.get("bottom").height){this.tmp_div_y=this.get("bottom").height-this.get("bottom").minSize}if(this.tmp_resizing=="bottom"&&this.get("main").minSize-this.tmp_div_y>this.get("main").height){this.tmp_div_y=this.get("main").minSize-this.get("main").height}if(this.tmp_resizing=="preview"&&this.get("preview").minSize+this.tmp_div_y>this.get("preview").height){this.tmp_div_y=this.get("preview").height-this.get("preview").minSize}if(this.tmp_resizing=="preview"&&this.get("main").minSize-this.tmp_div_y>this.get("main").height){this.tmp_div_y=this.get("main").minSize-this.get("main").height}switch(this.tmp_resizing){case"top":case"preview":case"bottom":this.tmp_div_x=0;if(r.length>0)r[0].style.top=this.tmp_value+this.tmp_div_y+"px";break;case"left":case"right":this.tmp_div_y=0;if(r.length>0)r[0].style.left=this.tmp_value+this.tmp_div_x+"px";break}this.trigger($.extend(n,{phase:"after"}))},stopResize:function(e){if(!this.box)return;if(!e)e=window.event;if(!window.addEventListener){window.document.attachEvent("onselectstart",function(){return false})}if(typeof this.tmp_resizing=="undefined")return;var t=this.get(this.tmp_resizing);switch(this.tmp_resizing){case"top":t.size=parseInt(t.size)+this.tmp_div_y;break;case"preview":case"bottom":t.size=parseInt(t.size)-this.tmp_div_y;break;case"left":t.size=parseInt(t.size)+this.tmp_div_x;break;case"right":t.size=parseInt(t.size)-this.tmp_div_x;break}this.resize();$("#layout_"+this.name+"_splitter_"+this.tmp_resizing).removeClass("active");delete this.tmp_resizing}};$.extend(e.prototype,$.w2event)})();(function(){$.fn.w2popup=function(e,t){if(typeof e=="undefined"){t={};e="open"}if($.isPlainObject(e)){t=e;e="open"}if(typeof t=="undefined")t={};var n={};if($(this).length>0){if($(this).find("div[rel=title]").length>0)n["title"]=$(this).find("div[rel=title]").html();if($(this).find("div[rel=body]").length>0)n["body"]=$(this).find("div[rel=body]").html();if($(this).find("div[rel=buttons]").length>0)n["buttons"]=$(this).find("div[rel=buttons]").html();if(parseInt($(this).css("width"))!=0)n["width"]=parseInt($(this).css("width"));if(parseInt($(this).css("height"))!=0)n["height"]=parseInt($(this).css("height"));if(String($(this).css("overflow"))!="undefined")n["overflow"]=$(this).css("overflow")}return window.w2popup[e]($.extend({},n,t))};window.w2popup={defaults:{title:"",body:"",buttons:"",overflow:"auto",color:"#000",opacity:.4,speed:.3,modal:false,width:500,height:300,showClose:true,showMax:false,transition:null,onUnlock:null,onOpen:null,onChange:null,onBeforeClose:null,onClose:null,onMax:null},open:function(e){var t=$("#w2ui-popup").data("options");var e=$.extend({},this.defaults,{body:"",renderTime:0,onOpen:null,onChange:null,onBeforeClose:null,onClose:null},t,e);if(window.innerHeight==undefined){var n=document.documentElement.offsetWidth;var r=document.documentElement.offsetHeight;if(w2utils.engine=="IE7"){n+=21;r+=4}}else{var n=window.innerWidth;var r=window.innerHeight}if(parseInt(n)-10<parseInt(e.width))e.width=parseInt(n)-10;if(parseInt(r)-10<parseInt(e.height))e.height=parseInt(r)-10;var i=(parseInt(r)-parseInt(e.height))/2*.8;var s=(parseInt(n)-parseInt(e.width))/2;if($("#w2ui-popup").length==0){window.w2popup.lock($.extend({},e,{onMouseDown:e.modal?function(){$("#w2ui-lock").css({"-webkit-transition":".1s","-moz-transition":".1s","-ms-transition":".1s","-o-transition":".1s",opacity:"0.6"});if(window.getSelection)window.getSelection().removeAllRanges()}:null,onMouseUp:e.modal?function(){setTimeout(function(){$("#w2ui-lock").css({"-webkit-transition":".1s","-moz-transition":".1s","-ms-transition":".1s","-o-transition":".1s",opacity:e.opacity})},100);if(window.getSelection)window.getSelection().removeAllRanges()}:function(){$().w2popup("close")},onClick:function(e){e.stopPropagation()}}));var o='<div id="w2ui-popup" class="w2ui-popup" style="position: '+(w2utils.engine=="IE5"?"absolute":"fixed")+";"+"z-Index: 1200; width: "+parseInt(e.width)+"px; height: "+parseInt(e.height)+"px; opacity: 0; "+"-webkit-transform: scale(0.8); -moz-transform: scale(0.8); -ms-transform: scale(0.8); -o-transform: scale(0.8); "+"left: "+s+"px; top: "+i+'px;">';if(e.title!=""){o+='<div class="w2ui-msg-title">'+(e.showClose?'<div class="w2ui-msg-button w2ui-msg-close" onclick="$().w2popup(\'close\'); event.stopPropagation();">Close</div>':"")+(e.showMax?'<div class="w2ui-msg-button w2ui-msg-max" onclick="$().w2popup(\'max\')">Max</div>':"")+e.title+"</div>"}o+='<div class="w2ui-box1" style="'+(e.title==""?"top: 0px !important;":"")+(e.buttons==""?"bottom: 0px !important;":"")+'">';o+='<div class="w2ui-msg-body'+(!e.title!=""?" w2ui-msg-no-title":"")+(!e.buttons!=""?" w2ui-msg-no-buttons":"")+'" style="overflow: '+e.overflow+'">'+e.body+"</div>";o+="</div>";o+='<div class="w2ui-box2" style="'+(e.title==""?"top: 0px !important;":"")+(e.buttons==""?"bottom: 0px !important;":"")+'">';o+='<div class="w2ui-msg-body'+(!e.title!=""?" w2ui-msg-no-title":"")+(!e.buttons!=""?" w2ui-msg-no-buttons":"")+'" style="overflow: '+e.overflow+'"></div>';o+="</div>";if(e.buttons!=""){o+='<div class="w2ui-msg-buttons">'+e.buttons+"</div>"}o+="</div>";$("body").append(o);setTimeout(function(){$("#w2ui-popup .w2ui-box2").hide();$("#w2ui-popup").css({"-webkit-transition":e.speed+"s opacity, "+e.speed+"s -webkit-transform","-webkit-transform":"scale(1)","-moz-transition":e.speed+"s opacity, "+e.speed+"s -moz-transform","-moz-transform":"scale(1)","-ms-transition":e.speed+"s opacity, "+e.speed+"s -ms-transform","-ms-transform":"scale(1)","-o-transition":e.speed+"s opacity, "+e.speed+"s -o-transform","-o-transform":"scale(1)",opacity:"1"})},1);setTimeout(function(){$("#w2ui-popup").css({"-webkit-transform":"","-moz-transform":"","-ms-transform":"","-o-transform":""});if(typeof e.onOpen=="function"){setTimeout(function(){e.onOpen()},1)}},e.speed*1e3)}else{if(typeof t=="undefined"||t["width"]!=e["width"]||t["height"]!=e["height"]){$("#w2ui-panel").remove();window.w2popup.resize(e.width,e.height)}$("#w2ui-popup .w2ui-box2 > .w2ui-msg-body").html(e.body).css("overflow",e.overflow);$("#w2ui-popup .w2ui-msg-buttons").html(e.buttons);$("#w2ui-popup .w2ui-msg-title").html((e.showClose?'<div class="w2ui-msg-button w2ui-msg-close" onclick="$().w2popup(\'close\')">Close</div>':"")+(e.showMax?'<div class="w2ui-msg-button w2ui-msg-max" onclick="$().w2popup(\'max\')">Max</div>':"")+e.title);var u=$("#w2ui-popup .w2ui-box1")[0];var a=$("#w2ui-popup .w2ui-box2")[0];w2utils.transition(u,a,e.transition);a.className="w2ui-box1";u.className="w2ui-box2";$(a).addClass("w2ui-current-box");$("#w2ui-popup").data("prev-size",null);setTimeout(function(){if(typeof e.onChange=="function")e.onChange()},1)}$("#w2ui-popup").data("options",e);this.initMove();return this},close:function(e){var e=$.extend({},$("#w2ui-popup").data("options"),e);if(typeof e.onBeforeClose=="function"){if(e.onBeforeClose()===false)return}$("#w2ui-popup, #w2ui-panel").css({"-webkit-transition":e.speed+"s opacity, "+e.speed+"s -webkit-transform","-webkit-transform":"scale(0.9)","-moz-transition":e.speed+"s opacity, "+e.speed+"s -moz-transform","-moz-transform":"scale(0.9)","-ms-transition":e.speed+"s opacity, "+e.speed+"s -ms-transform","-ms-transform":"scale(0.9)","-o-transition":e.speed+"s opacity, "+e.speed+"s -o-transform","-o-transform":"scale(0.9)",opacity:"0"});window.w2popup.unlock({opacity:0,onFinish:e.onFinish?e.onFinish:null});setTimeout(function(){$("#w2ui-popup").remove();$("#w2ui-panel").remove()},e.speed*1e3);if(typeof e.onClose=="function"){e.onClose()}},max:function(){var e=$("#w2ui-popup").data("options");$("#w2ui-panel").remove();if($("#w2ui-popup").data("prev-size")){var t=String($("#w2ui-popup").data("prev-size")).split(":");$("#w2ui-popup").data("prev-size",null);window.w2popup.resize(t[0],t[1],function(){if(typeof e.onMax=="function")e.onMax()})}else{$("#w2ui-popup").data("prev-size",$("#w2ui-popup").css("width")+":"+$("#w2ui-popup").css("height"));window.w2popup.resize(1e4,1e4,function(){if(typeof e.onMax=="function")e.onMax()})}},get:function(){return $("#w2ui-popup").data("options")},clear:function(){$("#w2ui-popup .w2ui-msg-title").html("");$("#w2ui-popup .w2ui-msg-body").html("");$("#w2ui-popup .w2ui-msg-buttons").html("")},reset:function(){window.w2popup.open(window.w2popup.defaults)},load:function(e){function s(t,n){$("body").append('<div id="w2ui-tmp" style="display: none">'+t+"</div>");if(typeof n!="undefined"&&$("#w2ui-tmp #"+n).length>0){$("#w2ui-tmp #"+n).w2popup(e)}else{$("#w2ui-tmp > div").w2popup(e)}if($("#w2ui-tmp > style").length>0){var r=$("<div>").append($("#w2ui-tmp > style").clone()).html();if($("#w2ui-screenPopup #div-style").length==0){$("#w2ui-screenPopup").append('<div id="div-style" style="position: absolute; left: -100; width: 1px"></div>')}$("#w2ui-screenPopup #div-style").html(r)}$("#w2ui-tmp").remove()}if(String(e.url)=="undefined"){$.error("The url parameter is empty.");return}var t=String(e.url).split("#");var n=t[0];var r=t[1];if(String(e)=="undefined")e={};var i=$("#w2ui-popup").data(n);if(typeof i!="undefined"){s(i,r)}else{$.post(n,function(e,t,i){s(i.responseText,r);$("#w2ui-popup").data(n,i.responseText)})}},message:function(e){$().w2tag();if(parseInt(e.width)<10)e.width=10;if(parseInt(e.height)<10)e.height=10;if(typeof e.hideOnClick=="undefined")e.hideOnClick=true;if($("#w2ui-popup .w2ui-popup-message").length==0){var t=parseInt($("#w2ui-popup").width());$("#w2ui-popup .w2ui-box1 .w2ui-msg-body").append('<div class="w2ui-popup-message" style="position: absolute; top: 0px; display: none; '+(typeof e.width!="undefined"?"width: "+e.width+"px; left: "+(t-e.width)/2+"px;":"left: 10px; right: 10px;")+(typeof e.height!="undefined"?"height: "+e.height+"px;":"bottom: 6px;")+'-webkit-transition: .3s; -moz-transition: .3s; -ms-transition: .3s; -o-transition: .3s;"'+(e.hideOnClick===true?"onclick=\"$().w2popup('message');\"":"")+">"+"</div>");$("#w2ui-popup .w2ui-box1 .w2ui-msg-body").prop("scrollTop",0)}else{if(typeof e.width=="undefined")e.width=w2utils.getSize($("#w2ui-popup .w2ui-popup-message"),"width");if(typeof e.height=="undefined")e.height=w2utils.getSize($("#w2ui-popup .w2ui-popup-message"),"height")}var n=$("#w2ui-popup .w2ui-popup-message").css("display");$("#w2ui-popup .w2ui-popup-message").css({"-webkit-transform":n=="none"?"translateY(-"+e.height+"px)":"translateY(0px)","-moz-transform":n=="none"?"translateY(-"+e.height+"px)":"translateY(0px)","-ms-transform":n=="none"?"translateY(-"+e.height+"px)":"translateY(0px)","-o-transform":n=="none"?"translateY(-"+e.height+"px)":"translateY(0px)"});if(n=="none"){$("#w2ui-popup .w2ui-popup-message").show().html(e.html);$("#w2ui-popup .w2ui-msg-buttons").fadeOut("slow");if(typeof e.onOpen=="function")e.onOpen()}else{$("#w2ui-popup .w2ui-msg-buttons").fadeIn("slow")}setTimeout(function(){$("#w2ui-popup .w2ui-popup-message").css({"-webkit-transform":n=="none"?"translateY(0px)":"translateY(-"+e.height+"px)","-moz-transform":n=="none"?"translateY(0px)":"translateY(-"+e.height+"px)","-ms-transform":n=="none"?"translateY(0px)":"translateY(-"+e.height+"px)","-o-transform":n=="none"?"translateY(0px)":"translateY(-"+e.height+"px)"})},1);setTimeout(function(){if(n!="none"){$("#w2ui-popup .w2ui-popup-message").remove();if(typeof e.onClose=="function")e.onClose()}},300)},lock:function(e){if($("#w2ui-lock").length>0)return false;var e=$.extend({},{onUnlock:null,onMouseDown:null,onMouseUp:null},e);$("body").append('<div id="w2ui-lock" onmousewheel="event.stopPropagation(); event.preventDefault()"'+'	style="position: '+(w2utils.engine=="IE5"?"absolute":"fixed")+"; z-Index: 1199; left: 0px; top: 0px; "+"		   padding: 0px; margin: 0px; background-color: "+e.color+'; width: 100%; height: 100%; opacity: 0;"></div>');setTimeout(function(){$("#w2ui-lock").css({"-webkit-transition":e.speed+"s opacity","-moz-transition":e.speed+"s opacity","-ms-transition":e.speed+"s opacity","-o-transition":e.speed+"s opacity",opacity:e.opacity});$("body, body *").css({})},1);if(typeof e.onMouseDown=="function"){$("#w2ui-lock").bind("mousedown",e.onMouseDown)}if(typeof e.onMouseUp=="function"){$("#w2ui-lock").bind("mouseup",e.onMouseUp)}return true},unlock:function(e){if($("#w2ui-lock").length==0)return false;var e=$.extend({},$("#w2ui-popup").data("options"),e);$("#w2ui-lock").css({"-webkit-transition":e.speed+"s opacity","-moz-transition":e.speed+"s opacity","-ms-transition":e.speed+"s opacity","-o-transition":e.speed+"s opacity",opacity:e.opacity});$("body, body *").css({});setTimeout(function(){$("#w2ui-lock").remove();if(typeof e.onUnlock=="function"){e.onUnlock()}},e.speed*1e3);return true},initMove:function(){var e=this;$("#w2ui-popup .w2ui-msg-title").on("mousedown",function(){e.startMove.apply(e,arguments)}).on("mousemove",function(){e.doMove.apply(e,arguments)}).on("mouseup",function(){e.stopMove.apply(e,arguments)});$("#w2ui-popup .w2ui-msg-body").on("mousemove",function(){e.doMove.apply(e,arguments)}).on("mouseup",function(){e.stopMove.apply(e,arguments)});$("#w2ui-lock").on("mousemove",function(){e.doMove.apply(e,arguments)}).on("mouseup",function(){e.stopMove.apply(e,arguments)})},resize:function(e,t,n){var r=$("#w2ui-popup").data("options");if(parseInt($(window).width())-10<parseInt(e))e=parseInt($(window).width())-10;if(parseInt($(window).height())-10<parseInt(t))t=parseInt($(window).height())-10;var i=(parseInt($(window).height())-parseInt(t))/2*.8;var s=(parseInt($(window).width())-parseInt(e))/2;$("#w2ui-popup").css({"-webkit-transition":r.speed+"s width, "+r.speed+"s height, "+r.speed+"s left, "+r.speed+"s top","-moz-transition":r.speed+"s width, "+r.speed+"s height, "+r.speed+"s left, "+r.speed+"s top","-ms-transition":r.speed+"s width, "+r.speed+"s height, "+r.speed+"s left, "+r.speed+"s top","-o-transition":r.speed+"s width, "+r.speed+"s height, "+r.speed+"s left, "+r.speed+"s top",top:i,left:s,width:e,height:t});if(typeof n=="function"){setTimeout(function(){n()},r.speed*1e3)}},startMove:function(e){if(!e)e=window.event;if(!window.addEventListener){window.document.attachEvent("onselectstart",function(){return false})}this.resizing=true;this.tmp_x=e.screenX;this.tmp_y=e.screenY;e.stopPropagation();e.preventDefault()},doMove:function(e){if(this.resizing!=true)return;if(!e)e=window.event;this.tmp_div_x=e.screenX-this.tmp_x;this.tmp_div_y=e.screenY-this.tmp_y;$("#w2ui-popup").css({"-webkit-transition":"none","-webkit-transform":"translate3d("+this.tmp_div_x+"px, "+this.tmp_div_y+"px, 0px)","-moz-transition":"none","-moz-transform":"translate("+this.tmp_div_x+"px, "+this.tmp_div_y+"px)","-ms-transition":"none","-ms-transform":"translate("+this.tmp_div_x+"px, "+this.tmp_div_y+"px)","-o-transition":"none","-o-transform":"translate("+this.tmp_div_x+"px, "+this.tmp_div_y+"px)"});$("#w2ui-panel").css({"-webkit-transition":"none","-webkit-transform":"translate3d("+this.tmp_div_x+"px, "+this.tmp_div_y+"px, 0px)","-moz-transition":"none","-moz-transform":"translate("+this.tmp_div_x+"px, "+this.tmp_div_y+"px)","-ms-transition":"none","-ms-transform":"translate("+this.tmp_div_x+"px, "+this.tmp_div_y+"px","-o-transition":"none","-o-transform":"translate("+this.tmp_div_x+"px, "+this.tmp_div_y+"px)"})},stopMove:function(e){if(this.resizing!=true)return;if(!e)e=window.event;this.tmp_div_x=e.screenX-this.tmp_x;this.tmp_div_y=e.screenY-this.tmp_y;$("#w2ui-popup").css({"-webkit-transition":"none","-webkit-transform":"translate3d(0px, 0px, 0px)","-moz-transition":"none","-moz-transform":"translate(0px, 0px)","-ms-transition":"none","-ms-transform":"translate(0px, 0px)","-o-transition":"none","-o-transform":"translate(0px, 0px)",left:parseInt($("#w2ui-popup").css("left"))+parseInt(this.tmp_div_x)+"px",top:parseInt($("#w2ui-popup").css("top"))+parseInt(this.tmp_div_y)+"px"});$("#w2ui-panel").css({"-webkit-transition":"none","-webkit-transform":"translate3d(0px, 0px, 0px)","-moz-transition":"none","-moz-transform":"translate(0px, 0px)","-ms-transition":"none","-ms-transform":"translate(0px, 0px)","-o-transition":"none","-o-transform":"translate(0px, 0px)",left:parseInt($("#w2ui-panel").css("left"))+parseInt(this.tmp_div_x)+"px",top:parseInt($("#w2ui-panel").css("top"))+parseInt(this.tmp_div_y)+"px"});delete this.resizing}};window.w2alert=function(e,t){if(typeof t=="undefined"){t="Notification"}$().w2popup({width:350,height:160,title:t,body:'<div style="padding: 12px; padding-right: 24px; text-align: center">'+e+"</div>",buttons:'<input type="button" value="Ok" style="width: 60px" onclick="$().w2popup(\'close\');">'});$("#w2ui-screenPopup #btnYes").on("click",function(){$().w2popup("close");if(typeof callBack=="function")callBack()})};window.w2confirm=function(e,t,n){if(typeof n=="undefined"||typeof t=="function"){n=t;t="Confirmation"}if(typeof t=="undefined"){t="Confirmation"}$().w2popup({width:350,height:160,title:t,body:'<div style="padding: 12px; padding-right: 24px; text-align: center">'+e+"</div>",buttons:'<input id="buttonNo" type="button" value="No" style="width: 60px; margin-right: 5px"> '+'<input id="buttonYes" type="button" value="Yes" style="width: 60px">'});$("#w2ui-screenPopup #buttonNo").on("click",function(){$().w2popup("close")});$("#w2ui-screenPopup #buttonYes").on("click",function(){$().w2popup("close");if(typeof n=="function")n()})}})();(function(){var e=function(e){this.box=null;this.name=null;this.active=null;this.tabs=[];this.right="";this.style="";this.onClick=null;this.onClose=null;this.onRender=null;this.onRefresh=null;this.onResize=null;this.onDestroy=null;$.extend(true,this,e)};$.fn.w2tabs=function(t){if(typeof t==="object"||!t){if(!t||typeof t.name=="undefined"){$.error('The parameter "name" is required but not supplied in $().w2tabs().');return}if(typeof w2ui[t.name]!="undefined"){$.error('The parameter "name" is not unique. There are other objects already created with the same name (obj: '+t.name+").");return}var n=t.tabs;var r=new e(t);$.extend(r,{tabs:[],handlers:[]});for(var i in n){r.tabs[i]=$.extend({},e.prototype.tab,n[i])}if($(this).length!=0){r.box=$(this)[0];$(this).data("w2name",r.name);r.render()}w2ui[r.name]=r;return r}else if(typeof $(this).data("w2name")!="undefined"){var s=w2ui[$(this).data("w2name")];s[t].apply(s,Array.prototype.slice.call(arguments,1));return this}else{$.error("Method "+t+" does not exist on jQuery.w2tabs")}};e.prototype={tab:{id:null,caption:"",hidden:false,disabled:false,closable:false,hint:"",onClick:null,onRefresh:null,onClose:null},add:function(e){return this.insert(null,e)},insert:function(e,t){if(!$.isArray(t))t=[t];for(var n in t){if(String(t[n].id)=="undefined"){$.error('The parameter "id" is required but not supplied. (obj: '+this.name+")");return}var r=true;for(var i in this.tabs){if(this.tabs[i].id==t[n].id){r=false;break}}if(!r){$.error('The parameter "id='+t[n].id+'" is not unique within the current tabs. (obj: '+this.name+")");return}if(!w2utils.isAlphaNumeric(t[n].id)){$.error('The parameter "id='+t[n].id+'" must be alpha-numeric + "-_". (obj: '+this.name+")");return}var t=$.extend({},t,t[n]);if(e==null||typeof e=="undefined"){this.tabs.push(t)}else{var s=this.getIndex(e);this.tabs=this.tabs.slice(0,s).concat([t],this.tabs.slice(s))}this.refresh(t[n].id)}},remove:function(e){var t=0;for(var n in arguments){var r=this.get(arguments[n]);if(!r)return false;t++;this.tabs.splice(this.getIndex(r.id),1);$(this.box).find(".w2ui-tabs #tabs_"+this.name+"_tab_"+r.id).remove()}return t},set:function(e,t){var t=this.getIndex(e);if(t==null)return false;$.extend(this.tabs[t],t);this.refresh(e);return true},get:function(e){var t=null;for(var n in this.tabs){if(this.tabs[n].id==e){t=this.tabs[n];break}}return t},getIndex:function(e){var t=null;for(var n in this.tabs){if(this.tabs[n].id==e){t=n;break}}return t},show:function(){var e=0;for(var t in arguments){var n=this.get(arguments[t]);if(!n||n.hidden===false)continue;n.hidden=false;this.refresh(n.id);e++}return e},hide:function(){var e=0;for(var t in arguments){var n=this.get(arguments[t]);if(!n||n.hidden===true)continue;n.hidden=true;this.refresh(n.id);e++}return e},enable:function(e){var t=0;for(var n in arguments){var r=this.get(arguments[n]);if(!r||r.disabled===false)continue;r.disabled=false;this.refresh(r.id);t++}return t},disable:function(e){var t=0;for(var n in arguments){var r=this.get(arguments[n]);if(!r||r.disabled===true)continue;r.disabled=true;this.refresh(r.id);t++}return t},refresh:function(e){if(window.getSelection)window.getSelection().removeAllRanges();if(String(e)=="undefined"){for(var t in this.tabs)this.refresh(this.tabs[t].id)}var n=this.trigger({phase:"before",type:"refresh",target:typeof e!="undefined"?e:this.name,tab:this.get(e)});if(n.stop===true)return false;var r=this.get(e);if(r==null)return;var i=$(this.box).find(".w2ui-tabs #tabs_"+this.name+"_tab_"+r.id);var s=(r.closable?'<div class="w2ui-tab-close" onclick="w2ui[\''+this.name+"'].doClose('"+r.id+"', event);\"></div>":"")+'	<div class="w2ui-tab '+(this.active==r.id?"active":"")+'" title="'+(typeof r.hint!="undefined"?r.hint:"")+'"'+"		onclick=\"w2ui['"+this.name+"'].doClick('"+r.id+"', event);\">"+r.caption+"</div>";if(i.length==0){var o="";if(r.hidden){o+="display: none;"}if(r.disabled){o+="opacity: 0.2; -moz-opacity: 0.2; -webkit-opacity: 0.2; -o-opacity: 0.2; filter:alpha(opacity=20);"}html='<td id="tabs_'+this.name+"_tab_"+r.id+'" style="'+o+'" valign="middle">'+s+"</td>";if(this.getIndex(e)!=this.tabs.length-1&&$(this.box).find(".w2ui-tabs #tabs_"+this.name+"_tab_"+this.tabs[parseInt(this.getIndex(e))+1].id).length>0){$(this.box).find(".w2ui-tabs #tabs_"+this.name+"_tab_"+this.tabs[parseInt(this.getIndex(e))+1].id).before(html)}else{$(this.box).find(".w2ui-tabs #tabs_"+this.name+"_right").before(html)}}else{i.html(s);if(r.hidden){i.css("display","none")}else{i.css("display","")}if(r.disabled){i.css({opacity:"0.2","-moz-opacity":"0.2","-webkit-opacity":"0.2","-o-opacity":"0.2",filter:"alpha(opacity=20)"})}else{i.css({opacity:"1","-moz-opacity":"1","-webkit-opacity":"1","-o-opacity":"1",filter:"alpha(opacity=100)"})}}this.trigger($.extend(n,{phase:"after"}))},render:function(e){var t=this.trigger({phase:"before",type:"render",target:this.name,box:e});if(t.stop===true)return false;if(window.getSelection)window.getSelection().removeAllRanges();if(String(e)!="undefined"&&e!=null){$(this.box).html("");this.box=e}if(!this.box)return;$(this.box).html("");var n='<div id="tabs_'+this.name+'" class="w2ui-reset w2ui-tabs" style="'+this.style+'">'+'	<table cellspacing="0" cellpadding="1" width="100%">'+'		<tr><td width="100%" id="tabs_'+this.name+'_right" align="right">'+this.right+"</td></tr>"+"	</table>"+"</div>";$(this.box).append(n);this.trigger($.extend(t,{phase:"after"}));this.refresh()},resize:function(e,t){if(window.getSelection)window.getSelection().removeAllRanges();var n=this.trigger({phase:"before",type:"resize",target:this.name});if(n.stop===true)return false;this.trigger($.extend(n,{phase:"after"}))},destroy:function(){var e=this.trigger({phase:"before",type:"destroy",target:this.name});if(e.stop===true)return false;$(this.box).html("");delete w2ui[this.name];this.trigger($.extend({phase:"after"}))},doClick:function(e,t){var n=this.get(e);if(n==null||n.disabled)return false;var r=this.trigger({phase:"before",type:"click",target:e,tab:this.get(e),event:t});if(r.stop===true)return false;$(this.box).find("#tabs_"+this.name+"_tab_"+this.active+" .w2ui-tab").removeClass("active");this.active=n.id;this.trigger($.extend(r,{phase:"after"}));this.refresh(e)},doClose:function(e,t){var n=this.get(e);if(n==null||n.disabled)return false;var r=this.trigger({phase:"before",type:"close",target:e,tab:this.get(e),event:t});if(r.stop===true)return false;var i=this;$(this.box).find(".w2ui-tabs #tabs_"+this.name+"_tab_"+n.id).css({"-webkit-transition":".2s","-moz-transition":"2s","-ms-transition":".2s","-o-transition":".2s",opacity:"0"});setTimeout(function(){var e=$(i.box).find(".w2ui-tabs #tabs_"+i.name+"_tab_"+n.id).width();$(i.box).find(".w2ui-tabs #tabs_"+i.name+"_tab_"+n.id).html('<div style="width: '+e+'px; -webkit-transition: .2s; -moz-transition: .2s; -ms-transition: .2s; -o-transition: .2s"></div>');setTimeout(function(){$(i.box).find(".w2ui-tabs #tabs_"+i.name+"_tab_"+n.id).find(":first-child").css({width:"0px"})},50)},200);setTimeout(function(){i.remove(e)},450);this.trigger($.extend(r,{phase:"after"}));this.refresh()},doInsert:function(e,t){if(this.get(e)==null)return;if(!$.isPlainObject(t))return;var n=true;for(var r in this.tabs){if(this.tabs[r].id==t.id){n=false;break}}if(!n){$.error('The parameter "id='+t.id+'" is not unique within the current tabs. (obj: '+this.name+")");return}var i=$(this.box).find(".w2ui-tabs #tabs_"+this.name+"_tab_"+t.id);if(i.length!=0)return;var s='<div id="_tmp_tabs" class="w2ui-reset w2ui-tabs" style="position: absolute; top: -1000px;">'+'<table cellspacing="0" cellpadding="1" width="100%"><tr>'+'<td id="_tmp_simple_tab" style="" valign="middle">'+(t.closable?'<div class="w2ui-tab-close"></div>':"")+'	<div class="w2ui-tab '+(this.active==t.id?"active":"")+'">'+t.caption+"</div>"+"</td></tr></table>"+"</div>";$("body").append(s);tabHTML='<div style="width: 1px; -webkit-transition: 0.2s; -moz-transition: 0.2s; -ms-transition: 0.2s; -o-transition: 0.2s;"> </div>';var o="";if(t.hidden){o+="display: none;"}if(t.disabled){o+="opacity: 0.2; -moz-opacity: 0.2; -webkit-opacity: 0.2; -o-opacity: 0.2; filter:alpha(opacity=20);"}html='<td id="tabs_'+this.name+"_tab_"+t.id+'" style="'+o+'" valign="middle">'+tabHTML+"</td>";if(this.getIndex(e)!=this.tabs.length&&$(this.box).find(".w2ui-tabs #tabs_"+this.name+"_tab_"+this.tabs[parseInt(this.getIndex(e))].id).length>0){$(this.box).find(".w2ui-tabs #tabs_"+this.name+"_tab_"+this.tabs[parseInt(this.getIndex(e))].id).before(html)}else{$(this.box).find(".w2ui-tabs #tabs_"+this.name+"_right").before(html)}var u=this;setTimeout(function(){var e=$("#_tmp_simple_tab").width();$("#_tmp_tabs").remove();$("#tabs_"+u.name+"_tab_"+t.id+" > div").css("width",e+"px")},1);setTimeout(function(){u.insert(e,t)},200)}};$.extend(e.prototype,$.w2event)})();(function(){var e=function(e){this.box=null,this.name=null,this.items=[],this.right="",this.onClick=null,this.onRender=null,this.onRefresh=null,this.onResize=null,this.onDestroy=null;$.extend(true,this,e)};$.fn.w2toolbar=function(t){if(typeof t==="object"||!t){if(!t||typeof t.name=="undefined"){$.error('The parameter "name" is required but not supplied in $().w2toolbar().');return}if(typeof w2ui[t.name]!="undefined"){$.error('The parameter "name" is not unique. There are other objects already created with the same name (obj: '+t.name+").");return}var n=t.items;var r=new e(t);$.extend(r,{items:[],handlers:[]});for(var i in n){r.items[i]=$.extend({},e.prototype.item,n[i])}if($(this).length!=0){r.box=$(this)[0];$(this).data("w2name",r.name);r.render()}w2ui[r.name]=r;return r}else if(typeof $(this).data("w2name")!="undefined"){var s=w2ui[$(this).data("w2name")];s[t].apply(s,Array.prototype.slice.call(arguments,1));return this}else{$.error("Method "+t+" does not exist on jQuery.w2toolbar")}};e.prototype={item:{id:null,type:"button",caption:"",html:"",img:"",hidden:false,disabled:false,arrow:true,hint:"",group:null,items:null,checked:false,onClick:null},add:function(e){this.insert(null,e)},insert:function(t,n){if(!$.isArray(n))n=[n];for(var r in n){if(typeof n[r].type=="undefined"){$.error('The parameter "type" is required but not supplied in w2toolbar.add() method.');return}if($.inArray(String(n[r].type),["button","check","radio","drop","menu","break","html","spacer"])==-1){$.error('The parameter "type" should be one of the following [button, check, radio, drop, menu, break, html, spacer] '+"in w2toolbar.add() method.");return}if(typeof n[r].id=="undefined"){$.error('The parameter "id" is required but not supplied in w2toolbar.add() method.');return}var i=true;for(var s=0;s<this.items.length;s++){if(this.items[s].id==n[r].id){i=false;return}}if(!i){$.error('The parameter "id" is not unique within the current toolbar.');return}if(!w2utils.isAlphaNumeric(n[r].id)){$.error('The parameter "id" must be alpha-numeric + "-_".');return}var o=$.extend({},e.prototype.item,n[r]);if(t==null||typeof t=="undefined"){this.items.push(o)}else{var u=this.getIndex(t);this.items=this.items.slice(0,u).concat([o],this.items.slice(u))}this.refresh(n[r].id)}},remove:function(e){var t=0;for(var n in arguments){var r=this.get(arguments[n]);if(!r)continue;t++;$(this.box).find(".w2ui-toolbar #"+this.name+"_item_"+r.id).remove();var i=this.getIndex(r.id);if(i)this.items.splice(i,1)}return t},set:function(e,t){var n=this.getIndex(e);if(n==null)return false;$.extend(this.items[n],t);this.refresh(e);return true},get:function(e){var t=null;for(var n=0;n<this.items.length;n++){if(this.items[n].id==e){t=this.items[n];break}}return t},getIndex:function(e){var t=null;for(var n=0;n<this.items.length;n++){if(this.items[n].id==e){return n}}return t},show:function(e){var t=0;for(var n in arguments){var r=this.get(arguments[n]);if(!r)continue;t++;r.hidden=false;this.refresh(r.id)}return t},hide:function(e){var t=0;for(var n in arguments){var r=this.get(arguments[n]);if(!r)continue;t++;r.hidden=true;this.refresh(r.id)}return t},enable:function(e){var t=0;for(var n in arguments){var r=this.get(arguments[n]);if(!r)continue;t++;r.disabled=false;this.refresh(r.id)}return t},disable:function(e){var t=0;for(var n in arguments){var r=this.get(arguments[n]);if(!r)continue;t++;r.disabled=true;this.refresh(r.id)}return t},check:function(e){var t=0;for(var n in arguments){var r=this.get(arguments[n]);if(!r)continue;t++;r.checked=true;this.refresh(r.id)}return t},uncheck:function(e){var t=0;for(var n in arguments){var r=this.get(arguments[n]);if(!r)continue;t++;r.checked=false;this.refresh(r.id)}return t},render:function(e){var t=this.trigger({phase:"before",type:"render",target:this.name,box:e});if(t.stop===true)return false;if(typeof e!="undefined"&&e!=null){$(this.box).html("");this.box=e}if(!this.box)return;$(this.box).html("");var n='<div id="'+this.name+'_toolbar" class="w2ui-reset w2ui-toolbar">'+'<table cellspacing="0" cellpadding="0" width="100%">'+"<tr>";for(var r=0;r<this.items.length;r++){var i=this.items[r];if(i==null)continue;var s="";if(i.hidden){s+="display: none;"}if(i.disabled){s+="opacity: 0.2; -moz-opacity: 0.2; -webkit-opacity: 0.2; -o-opacity: 0.2; filter:alpha(opacity=20);"}if(i.type=="spacer"){n+='<td width="100%" id="'+this.name+"_item_"+i.id+'" align="right"></td>'}else{n+='<td id="'+this.name+"_item_"+i.id+'" style="'+s+'" valign="middle">'+this.getItemHTML(i)+"</td>"}}n+='<td width="100%" id="'+this.name+'_right" align="right">'+this.right+"</td>";n+="</tr>"+"</table>"+"</div>";$(this.box).append(n);if($("#w2ui-global-drop").length==0)$("body").append('<div id="w2ui-global-drop" class="w2ui-reset"></div>');this.trigger($.extend({phase:"after"}))},refresh:function(e){if(window.getSelection)window.getSelection().removeAllRanges();var t=this.trigger({phase:"before",type:"refresh",target:typeof e!="undefined"?e:this.name,item:this.get(e)});if(t.stop===true)return false;if(typeof e=="undefined"){for(var n=0;n<this.items.length;n++)this.refresh(this.items[n].id)}var r=this.get(e);if(r==null)return;var i=$(this.box).find(".w2ui-toolbar #"+this.name+"_item_"+r.id);var s=this.getItemHTML(r);if(i.length==0){var o="";if(r.hidden){o+="display: none;"}if(r.disabled){o+="opacity: 0.2; -moz-opacity: 0.2; -webkit-opacity: 0.2; -o-opacity: 0.2; filter:alpha(opacity=20);"}s='<td id="'+this.name+"_item_"+r.id+'" style="'+o+'" valign="middle">'+s+"</td>";if(this.getIndex(e)==this.items.length-1){$(this.box).find(".w2ui-toolbar #"+this.name+"_right").before(s)}else{$(this.box).find(".w2ui-toolbar #"+this.name+"_item_"+this.items[parseInt(this.getIndex(e))+1].id).before(s)}}else{i.html(s);if(r.hidden){i.css("display","none")}else{i.css("display","")}if(r.disabled){i.css({opacity:"0.2","-moz-opacity":"0.2","-webkit-opacity":"0.2","-o-opacity":"0.2",filter:"alpha(opacity=20)"})}else{i.css({opacity:"1","-moz-opacity":"1","-webkit-opacity":"1","-o-opacity":"1",filter:"alpha(opacity=100)"})}}this.trigger($.extend({phase:"after"}))},resize:function(e,t,n){if(window.getSelection)window.getSelection().removeAllRanges();var r=this.trigger({phase:"before",type:"resize",target:this.name});if(r.stop===true)return false;this.trigger($.extend({phase:"after"}))},destroy:function(){var e=this.trigger({phase:"before",type:"destroy",target:this.name});if(e.stop===true)return false;$(this.box).html("");delete w2ui[this.name];this.trigger($.extend({phase:"after"}))},getMenuHTML:function(e){var t='<table cellspacing="0" style="padding: 5px 0px;">';for(var n=0;n<e.items.length;n++){if(typeof e.items[n]=="string"){var r=e.items[n].split("|");if(typeof r[2]=="undefined")r[2]=r[0]}else{var r=[];if(typeof e.items[n].text=="undefined"&&typeof e.items[n].caption!="undefined")e.items[n].text=e.items[n].caption;if(typeof e.items[n].icon=="undefined"&&typeof e.items[n].img!="undefined")e.items[n].icon=e.items[n].img;if(typeof e.items[n].value=="undefined"&&typeof e.items[n].id!="undefined")e.items[n].value=e.items[n].id;if(typeof e.items[n].value=="undefined"&&typeof e.items[n].cmd!="undefined")e.items[n].value=e.items[n].cmd;r[0]=e.items[n].text;r[1]=e.items[n].icon;r[2]=typeof e.items[n].value!="undefined"?e.items[n].value:e.items[n].text}t+='<tr style="cursor: default;" '+"	onmouseover=\"$(this).addClass('w2ui-selected');\" onmouseout=\"$(this).removeClass('w2ui-selected');\" "+"	onclick=\"var obj = w2ui['"+this.name+"']; obj.doDropOut('"+e.id+"', 0); "+"			  obj.doClick('"+e.id+"', event, '"+n+"');\">"+"<td style='padding: 3px 3px 3px 6px'><div class=\""+(typeof r[1]!="undefined"?"w2ui-icon ":"")+r[1]+'"></div></td>'+"<td style='padding: 3px 10px 3px 3px'>"+r[0]+"</td>"+"</tr>"}t+="</table>";return t},getItemHTML:function(e){var t="";if(e.caption==null)e.caption="";if(e.img==null)e.img="";var n="transparent";var r="";if(e.img!=""){if(w2utils.engine=="IE5"){if(e.disabled){r="FILTER: alpha(opacity=20);";butPicture='src="'+e.img+'" style="FILTER: alpha(opacity=20);"'}else{butPicture='src="images/empty.gif" style="Filter:Progid:DXImageTransform.Microsoft.AlphaImageLoader(src='+e.img+', opacity=20)"'}}else{butPicture='src="'+e.img+'"'}}if(typeof e.hint=="undefined")e.hint="";switch(e.type){case"menu":e.html=this.getMenuHTML(e);case"button":case"check":case"radio":case"drop":t+='<table cellpadding="0" cellspacing="0" title="'+e.hint+'" class="w2ui-tab0 '+(e.checked?"checked":"")+'" '+"       onmouseover = \"var el=w2ui['"+this.name+"']; if (el) el.doOver('"+e.id+"', event);\" "+"       onmouseout  = \"var el=w2ui['"+this.name+"']; if (el) el.doOut('"+e.id+"', event);\" "+"       onmousedown = \"var el=w2ui['"+this.name+"']; if (el) el.doDown('"+e.id+"', event);\" "+"       onmouseup   = \"var el=w2ui['"+this.name+"']; if (el) el.doClick('"+e.id+"', event);\" "+">"+"<tr><td>"+'  <table cellpadding="1" cellspacing="0" class="w2ui-tab1 '+(e.checked?"checked":"")+'">'+"  <tr>"+(e.img!=""?'<td><div class="w2ui-tb-image w2ui-icon '+e.img+'"></div></td>':"<td> </td>")+(e.caption!=""?'<td class="w2ui-tb-caption" style="'+r+'" nowrap>'+e.caption+"</td>":"")+((e.type=="drop"||e.type=="menu")&&e.arrow!==false?'<td class="w2ui-tb-down" nowrap>   </td>':"")+"  </tr></table>"+"</td></tr></table>";break;case"break":t+='<table cellpadding="0" cellspacing="0" style="width 1px; height: 22px; margin-top: 2px;"><tr>'+'    <td><div class="w2ui-break"> </div></td>'+"</tr></table>";break;case"html":t+='<table cellpadding="0" cellspacing="0" style="height: 22px; margin-top: 2px;'+r+';"><tr>'+"    <td nowrap>"+e.html+"</td>"+"</tr></table>";break}t+='<div class="w2ui-drop-box"></div>';var i="";if(typeof e.onRender=="function")i=e.onRender.call(this,e.id,t);if(typeof this.onRender=="function")i=this.onRender(e.id,t);if(i!=""&&typeof i!="undefined")t=i;return t},doOver:function(e){var t=this.get(e);if(t&&!t.disabled){$("#"+this.name+"_item_"+t.id+" table").addClass("over");if(t.type=="drop"||t.type=="menu"){clearTimeout(t.timer)}}},doOut:function(e,t){var n=this.get(e);if(typeof t=="undefined")t=400;if(n&&!n.disabled){$("#"+this.name+"_item_"+n.id+" table").removeClass("over");if(n.type=="drop"||n.type=="menu"){var r=this;n.timer=setTimeout(function(){var e=w2ui[r.name];var t=n;$("#"+this.name+"_item_"+t.id+" div.w2ui-drop-box").hide();if($("#w2ui-global-drop").data("tb-id")==t.id)$("#w2ui-global-drop").hide();t.checked=false;r.refresh(t.id)},t)}}},doDown:function(e){if(window.getSelection)window.getSelection().removeAllRanges();var t=this.get(e);if(t&&!t.disabled){$("#"+this.name+"_item_"+t.id+" table").addClass("down");if(t.type=="drop"||t.type=="menu"){if(!t.checked){$("table.w2ui-toolbar div.w2ui-drop-box").hide();$("#"+this.name+"_item_"+t.id+" div.w2ui-drop-box").show();if($("#w2ui-global-drop").data("tb-id")==t.id)$("#w2ui-global-drop").hide();$("#w2ui-global-drop").css({left:$("#"+this.name+"_item_"+t.id+" div.w2ui-drop-box").offset().left+"px",top:$("#"+this.name+"_item_"+t.id+" div.w2ui-drop-box").offset().top+"px"}).html(t.html).show().data("tb-id",t.id);var n=this;$("#w2ui-global-drop").unbind("mouseover").unbind("mouseout");$("#w2ui-global-drop").bind("mouseover",function(e){var r=w2ui[n.name];if(r)r.doDropOver(t.id)});$("#w2ui-global-drop").bind("mouseout",function(e){var r=w2ui[n.name];if(r)r.doDropOut(t.id)})}else{$("#"+this.name+"_item_"+t.id+" div.w2ui-drop-box").hide();if($("#w2ui-global-drop").data("tb-id")==t.id)$("#w2ui-global-drop").hide()}}}},doDropOver:function(e){var t=this.get(e);clearTimeout(t.timer)},doDropOut:function(e,t){var n=this.get(e);var r=this;if(typeof t=="undefined")t=400;if(typeof e==="undefined"){for(var i=0;i<this.items.length;i++){var n=this.items[i];if(n.type=="drop"||n.type=="menu"){n.checked=false;this.refresh(n.id)}$("#"+this.name+"_item_"+this.items[i].id+" div.w2ui-drop-box").hide();if($("#w2ui-global-drop").data("tb-id")==this.items[i].id)$("#w2ui-global-drop").hide()}}else{n.timer=setTimeout(function(){var e=w2ui[r.name];var t=n;$("#"+this.name+"_item_"+t.id+" div.w2ui-drop-box").hide();if($("#w2ui-global-drop").data("tb-id")==t.id)$("#w2ui-global-drop").hide();t.checked=false;r.refresh(t.id)},t)}},doClick:function(e,t,n){if(window.getSelection)window.getSelection().removeAllRanges();var r=this.get(e);if(r&&!r.disabled){var i=this.trigger({phase:"before",type:"click",target:typeof e!="undefined"?e:this.name,item:this.get(e),subItem:typeof n!="undefined"&&this.get(e)?this.get(e).items[n]:null,event:t});if(i.stop===true)return false;$("#"+this.name+"_item_"+r.id+" table").removeClass("down");for(var s=0;s<this.items.length;s++){if(this.items[s].hideTimer){clearTimeout(this.items[s].hideTimer)}}if(r.type=="radio"){for(var s=0;s<this.items.length;s++){var o=this.items[s];if(o==null||o.id==r.id||o.type!="radio")continue;if(o.group==r.group&&o.checked){o.checked=false;this.refresh(o.id)}}r.checked=true;$("#"+this.name+"_item_"+r.id+" table").addClass("checked")}if(r.type=="check"||r.type=="drop"||r.type=="menu"){r.checked=!r.checked;if(r.checked){$("#"+this.name+"_item_"+r.id+" table").addClass("checked")}else{$("#"+this.name+"_item_"+r.id+" table").removeClass("checked")}}this.trigger($.extend({phase:"after"}))}}};$.extend(e.prototype,$.w2event)})();(function(){var e=function(e){this.name=null;this.box=null;this.sidebar=null;this.parent=null;this.img=null;this.style="";this.selected=null;this.nodes=[];this.onClick=null;this.onDblClick=null;this.onContextMenu=null;this.onOpen=null;this.onClose=null;this.onRender=null;this.onRefresh=null;this.onResize=null;this.onDestroy=null;$.extend(true,this,e)};$.fn.w2sidebar=function(t){if(typeof t==="object"||!t){if(!t||typeof t.name=="undefined"){$.error('The parameter "name" is required but not supplied in $().w2sidebar().');return}if(typeof w2ui[t.name]!="undefined"){$.error('The parameter "name" is not unique. There are other objects already created with the same name (obj: '+t.name+").");return}var n=t.nodes;var r=new e(t);$.extend(r,{handlers:[],nodes:[]});if(typeof n!="undefined"){r.add(r,n)}if($(this).length!=0){$(this).data("w2name",r.name);r.render($(this)[0])}r.sidebar=r;w2ui[r.name]=r;return r}else if(typeof $(this).data("w2name")!="undefined"){var i=w2ui[$(this).data("w2name")];i[t].apply(i,Array.prototype.slice.call(arguments,1));return this}else{$.error("Method "+t+" does not exist on jQuery.w2sidebar")}};e.prototype={node:{id:null,text:"",count:"",img:null,parent:null,sidebar:null,nodes:[],style:"",selected:false,expanded:false,hidden:false,disabled:false,group:false,onClick:null,onDblClick:null,onContextMenu:null,onOpen:null,onClose:null},add:function(e,t){if(arguments.length==1){t=arguments[0];e=this}if(typeof e=="string")e=this.get(e);return this.insert(e,null,t)},insert:function(t,n,r){if(arguments.length==2){r=arguments[1];n=arguments[0];var i=this.get(n);if(i==null){$.error('Cannot insert node "'+r[s].text+'" because cannot find node "'+n+'" to insert before.');return null}t=this.get(n).parent}if(typeof t=="string")t=this.get(t);if(!$.isArray(r))r=[r];for(var s in r){if(typeof r[s].id=="undefined"){$.error('Cannot insert node "'+r[s].text+'" because it has no id.');continue}if(this.get(this,r[s].id)!=null){$.error("Cannot insert node with id="+r[s].id+" (text: "+r[s].text+") because another node with the same id already exists.");continue}var o=$.extend({},e.prototype.node,r[s]);o.sidebar=this;o.parent=t;var u=o.nodes;o.nodes=[];if(n==null){t.nodes.push(o)}else{var i=this.getIndex(t,n);if(i==null){$.error('Cannot insert node "'+r[s].text+'" because cannot find node "'+n+'" to insert before.');return null}t.nodes.splice(i,0,o)}if(typeof u!="undefined"&&u.length>0){this.insert(o,null,u)}}this.refresh(t.id);return o},remove:function(){var e=0;for(var t in arguments){var n=this.get(arguments[t]);if(n==null)continue;var r=this.getIndex(n.parent,arguments[t]);if(r==null)continue;n.parent.nodes.splice(r,1);e++}if(arguments.length==1)this.refresh(arguments[0]);else this.refresh();return e},set:function(e,t,n){if(arguments.length==2){n=t;t=e;e=this}this._tmp=null;if(typeof e=="string")e=this.get(e);if(e.nodes==null)return null;for(var r=0;r<e.nodes.length;r++){if(e.nodes[r].id==t){var i=n.nodes;$.extend(e.nodes[r],n,{nodes:[]});if(typeof i!="undefined"){this.add(e.nodes[r],i)}this.refresh(t);return true}else{this._tmp=this.set(e.nodes[r],t,n);if(this._tmp)return true}}return false},get:function(e,t){if(arguments.length==1){t=e;e=this}this._tmp=null;if(typeof e=="string")e=this.get(e);if(e.nodes==null)return null;for(var n=0;n<e.nodes.length;n++){if(e.nodes[n].id==t){return e.nodes[n]}else{this._tmp=this.get(e.nodes[n],t);if(this._tmp)return this._tmp}}return this._tmp},getIndex:function(e,t){if(arguments.length==1){t=e;e=this}if(typeof e=="string")e=this.get(e);if(e.nodes==null)return null;for(var n=0;n<e.nodes.length;n++){if(e.nodes[n].id==t){return n}}return null},hide:function(){var e=0;for(var t in arguments){var n=this.get(arguments[t]);if(n==null)continue;n.hidden=true;e++}if(arguments.length==1)this.refresh(arguments[0]);else this.refresh();return e},show:function(){var e=0;for(var t in arguments){var n=this.get(arguments[t]);if(n==null)continue;n.hidden=false;e++}if(arguments.length==1)this.refresh(arguments[0]);else this.refresh();return e},disable:function(){var e=0;for(var t in arguments){var n=this.get(arguments[t]);if(n==null)continue;n.disabled=true;if(n.selected)this.unselect(n.id);e++}if(arguments.length==1)this.refresh(arguments[0]);else this.refresh();return e},enable:function(){var e=0;for(var t in arguments){var n=this.get(arguments[t]);if(n==null)continue;n.disabled=false;e++}if(arguments.length==1)this.refresh(arguments[0]);else this.refresh();return e},select:function(e){if(this.selected==e)return false;this.unselect(this.selected);var t=this.get(e);if(!t)return false;$("#sidebar_"+this.name+" #node_"+e.replace(/\./,"\\.")).addClass("w2ui-selected").find(".w2ui-icon").addClass("w2ui-icon-selected");t.selected=true;this.selected=e},unselect:function(e){var t=this.get(e);if(!t)return false;t.selected=false;$("#sidebar_"+this.name+" #node_"+e.replace(/\./,"\\.")).removeClass("w2ui-selected").find(".w2ui-icon").removeClass("w2ui-icon-selected");if(this.selected==e)this.selected=null;return true},doClick:function(e,t){var n=this.trigger({phase:"before",type:"click",target:e,event:t});if(n.stop===true)return false;var r=this.get(e);var i=this;if(!r.group&&!r.disabled){$("#sidebar_"+this.name+" .w2ui-node").each(function(e,t){var n=String(t.id).replace("node_","");var r=i.get(n);if(r&&r.selected){r.selected=false;$(t).removeClass("w2ui-selected").find(".w2ui-icon").removeClass("w2ui-icon-selected")}});$("#sidebar_"+this.name+" #node_"+e.replace(/\./,"\\.")).addClass("w2ui-selected").find(".w2ui-icon").addClass("w2ui-icon-selected");this.get(e).selected=true;this.selected=e}this.trigger($.extend(n,{phase:"after"}))},doDblClick:function(e,t){if(window.getSelection)window.getSelection().removeAllRanges();var n=this.trigger({phase:"before",type:"dblClick",target:e,event:t});if(n.stop===true)return false;var r=this.get(e);if(r.nodes.length>0)this.doToggle(e,t);this.trigger($.extend(n,{phase:"after"}))},doContextMenu:function(e,t){var n=this.trigger({phase:"before",type:"contextMenu",target:e,event:t});if(n.stop===true)return false;this.trigger($.extend(n,{phase:"after"}))},doToggle:function(e,t){if(this.get(e).expanded)this.doClose(e,t);else this.doOpen(e,t)},doOpen:function(e,t){var n=this.trigger({phase:"before",type:"open",target:e,event:t});if(n.stop===true)return false;var r=this.get(e);if(r.nodes.length==0)return;$("#sidebar_"+this.name+" #node_"+e.replace(/\./,"\\.")+"_sub").show();$("#sidebar_"+this.name+" #node_"+e.replace(/\./,"\\.")+" .w2ui-node-dots:first-child").html('<div style="width: 16px">-</div>');r.expanded=true;this.trigger($.extend(n,{phase:"after"}))},doClose:function(e,t){var n=this.trigger({phase:"before",type:"close",target:e,event:t});if(n.stop===true)return false;$("#sidebar_"+this.name+" #node_"+e.replace(/\./,"\\.")+"_sub").hide();$("#sidebar_"+this.name+" #node_"+e.replace(/\./,"\\.")+" .w2ui-node-dots:first-child").html('<div style="width: 16px">+</div>');this.get(e).expanded=false;this.trigger($.extend(n,{phase:"after"}))},render:function(e){var t=this.trigger({phase:"before",type:"render",target:this.name,box:e});if(t.stop===true)return false;if(typeof e!="undefined"&&e!=null){$(this.box).html("");this.box=e}if(!this.box)return;$(this.box).html('<div id="sidebar_'+this.name+'" class="w2ui-reset w2ui-sidebar" style="'+this.style+'"></div>');this.trigger($.extend(t,{phase:"after"}));this.refresh()},refresh:function(e){function a(e){var t="";var r=e.img;if(typeof r=="undefined")r=this.img;var i=e.parent;var s=0;while(i&&i.parent!=null){if(i.group)s--;i=i.parent;s++}if(e.group){t='<div class="w2ui-node-group"  id="node_'+e.id+'"'+"		onclick=\"w2ui['"+n.name+"'].doClick('"+e.id+"', event); w2ui['"+n.name+"'].doToggle('"+e.id+"'); "+"				 var sp=$(this).find('span:nth-child(1)'); if (sp.html() == 'Hide') sp.html('Show'); else sp.html('Hide');\""+"		onmouseout=\"$(this).find('span:nth-child(1)').css('color', 'transparent')\" "+"		onmouseover=\"$(this).find('span:nth-child(1)').css('color', 'gray')\">"+'	<span style="float: right; color: transparent">Hide</span>'+"	<span>"+e.text+"</span>"+"</div>"+'<div class="w2ui-node-sub" id="node_'+e.id+'_sub" style="'+e.style+";"+(!e.hidden&&e.expanded?"":"display: none;")+'"></div>'}else{if(e.selected&&!e.disabled)n.selected=e.id;t='<div class="w2ui-node '+(e.selected?"w2ui-selected":"")+" "+(e.disabled?"w2ui-disabled":"")+'" id="node_'+e.id+'" style="'+(e.hidden?"display: none;":"")+'"'+"	ondblclick=\"w2ui['"+n.name+"'].doDblClick('"+e.id+"', event); /* event.stopPropagation(); */\""+"	oncontextmenu=\"w2ui['"+n.name+"'].doContextMenu('"+e.id+"', event); /* event.stopPropagation(); */ event.preventDefault();\""+"	onClick=\"w2ui['"+n.name+"'].doClick('"+e.id+"', event); /* event.stopPropagation(); */\">"+'<table cellpadding="0" cellspacing="0" style="margin-left:'+s*18+"px; padding-right:"+s*18+'px"><tr>'+'<td class="w2ui-node-dots" nowrap onclick="w2ui[\''+n.name+"'].doToggle('"+e.id+"', event);\">"+'	<div style="width: 16px">'+(e.nodes.length>0?e.expanded?"-":"+":"")+"</div>"+"</td>"+'<td class="w2ui-node-data" nowrap>'+(r?'<div class="w2ui-node-image w2ui-icon '+r+" "+(e.selected&&!e.disabled?"w2ui-icon-selected":"")+'"></div>':"")+(e.count?'<div class="w2ui-node-count" style="width: auto; padding: 2px 5px; float: right">'+e.count+"</div>":"")+'<div class="w2ui-node-caption">'+e.text+"</div>"+"</td>"+"</tr></table>"+"</div>"+'<div class="w2ui-node-sub" id="node_'+e.id+'_sub" style="'+e.style+";"+(!e.hidden&&e.expanded?"":"display: none;")+'"></div>'}return t}if(window.getSelection)window.getSelection().removeAllRanges();var t=this.trigger({phase:"before",type:"refresh",target:typeof e!="undefined"?e:this.name});if(t.stop===true)return false;var n=this;if(typeof e=="undefined"){var r=this;var i="#sidebar_"+this.name}else{var r=this.get(e);var i="#sidebar_"+this.name+" #node_"+r.id.replace(/\./,"\\.")+"_sub"}if(r!=this){var s="#sidebar_"+this.name+" #node_"+r.id.replace(/\./,"\\.");var o=a(r);$(s).before('<div id="sidebar_'+this.name+'_tmp"></div>');$(s).remove();$(i).remove();$("#sidebar_"+this.name+"_tmp").before(o);$("#sidebar_"+this.name+"_tmp").remove()}$(i).html("");for(var u=0;u<r.nodes.length;u++){var o=a(r.nodes[u]);$(i).append(o);if(r.nodes[u].nodes.length!=0){this.refresh(r.nodes[u].id)}}this.trigger($.extend(t,{phase:"after"}))},resize:function(e,t){if(window.getSelection)window.getSelection().removeAllRanges();var n=this.trigger({phase:"before",type:"resize",target:this.name,width:e,height:t});if(n.stop===true)return false;this.trigger($.extend(n,{phase:"after"}))},destroy:function(){var e=this.trigger({phase:"before",type:"destroy",target:this.name});if(e.stop===true)return false;$(this.box).html("");delete w2ui[this.name];this.trigger($.extend(e,{phase:"after"}))}};$.extend(e.prototype,$.w2event)})();(function(e){e.fn.w2field=function(n){if(t[n]){return t[n].apply(this,Array.prototype.slice.call(arguments,1))}else if(typeof n==="object"){return t.init.apply(this,arguments)}else if(typeof n==="string"){return t.init.apply(this,[{type:n}])}else{e.error("Method "+n+" does not exist on jQuery.w2field")}};var t={init:function(n){var r=t;return e(this).each(function(r,i){switch(n.type.toLowerCase()){case"clear":e(this).off("keypress").off("focus").off("blur");if(e(this).prev().hasClass("w2ui-list")){e(this).prev().remove();e(this).removeAttr("tabindex")}break;case"int":e(this).on("keypress",function(e){if(e.metaKey||e.ctrlKey||e.altKey||e.charCode!=e.keyCode&&e.keyCode>0)return;var t=String.fromCharCode(e.charCode);if(!w2utils.isInt(t)&&t!="-"){e.stopPropagation();return false}});e(this).on("blur",function(t){if(!w2utils.isInt(this.value)){this.value="";e(this).trigger("change")}});break;case"float":e(this).on("keypress",function(e){if(e.metaKey||e.ctrlKey||e.altKey||e.charCode!=e.keyCode&&e.keyCode>0)return;var t=String.fromCharCode(e.charCode);if(!w2utils.isInt(t)&&t!="."&&t!="-"){e.stopPropagation();return false}});e(this).on("blur",function(t){if(!w2utils.isFloat(this.value)){this.value="";e(this).trigger("change")}});break;case"money":e(this).on("keypress",function(e){if(e.metaKey||e.ctrlKey||e.altKey||e.charCode!=e.keyCode&&e.keyCode>0)return;var t=String.fromCharCode(e.charCode);if(!w2utils.isInt(t)&&t!="."&&t!="-"&&t!="$"&&t!="€"&&t!="£"&&t!="¥"){e.stopPropagation();return false}});e(this).on("blur",function(t){if(!w2utils.isMoney(this.value)){this.value="";e(this).trigger("change")}});break;case"hex":e(this).on("keypress",function(e){if(e.metaKey||e.ctrlKey||e.altKey||e.charCode!=e.keyCode&&e.keyCode>0)return;var t=String.fromCharCode(e.charCode);if(!w2utils.isHex(t)){e.stopPropagation();return false}});e(this).on("blur",function(t){if(!w2utils.isHex(this.value)){this.value="";e(this).trigger("change")}});break;case"alphanumeric":e(this).on("keypress",function(e){if(e.metaKey||e.ctrlKey||e.altKey||e.charCode!=e.keyCode&&e.keyCode>0)return;var t=String.fromCharCode(e.charCode);if(!w2utils.isAlphaNumeric(t)){e.stopPropagation();return false}});e(this).on("blur",function(e){if(!w2utils.isAlphaNumeric(this.value)){this.value=""}});break;case"date":var s=this;if(e(this).length==0||e("#"+e(this)[0].id).length!=1){console.error("The date field must have a unique id in w2field('date').");return}e(this).css({transition:"none","-webkit-transition":"none","-moz-transition":"none","-ms-transition":"none","-o-transition":"none"}).data("options",n).on("focus",function(){var t=parseFloat(e(s).offset().top)+parseFloat(s.offsetHeight);var r=parseFloat(e(s).offset().left);e("#global_calendar_div").remove();e("body").append('<div id="global_calendar_div" style="position: absolute; z-index: 1600; display: none;'+"		top: "+(t+parseInt(s.offsetHeight))+"px; left: "+r+'px;" '+' class="w2ui-reset w2ui-calendar" '+' onmousedown="event.stopPropagation(); event.preventDefault();"></div>');e("#global_calendar_div").html(e().w2field("calendar_get",s.value,n)).css({left:r+"px",top:t+"px"}).data("el",s).show();var i=setInterval(function(){if(e("#global_calendar_div").data("position")!=e(s).offset().left+"x"+(e(s).offset().top+s.offsetHeight)){e("#global_calendar_div").css({"-webkit-transition":".2s",left:e(s).offset().left+"px",top:e(s).offset().top+s.offsetHeight+"px"}).data("position",e(s).offset().left+"x"+(e(s).offset().top+s.offsetHeight))}if(e(s).length==0||e(s).offset().left==0&&e(s).offset().top==0){clearInterval(i);e("#global_calendar_div").remove();return}},100);e(s).data("mtimer",i)}).on("blur",function(t){if(!w2utils.isDate(e(s).val()))e(s).val("");clearInterval(e(s).data("mtimer"));e("#global_calendar_div").remove()}).on("keypress",function(t){var r=this;setTimeout(function(){e("#global_calendar_div").html(e().w2field("calendar_get",r.value,n))},10)});break;case"time":break;case"datetime":break;case"color":break;case"list":break;case"enum":var o={url:"",items:[],selected:[],max:0,maxHeight:72,showAll:false,maxCache:500,onRender:null,onSelect:null};var s=this;e(s).css({"border-color":"transparent"});var u=e.extend({},o,n);if(e.isArray(u.selected)){e(this).data("selected",u.selected)}else{e(this).data("selected",[])}if(e.isArray(u.items)&&!e.isPlainObject(u.items[0])){var a=[];for(var f in u.items){a.push({id:u.items[f],text:u.items[f]})}u.items=a}this.add=function(t){var n=e(this).data("selected");if(!e.isArray(n))n=[];if(u.max!=0&&u.max<=n.length){n.splice(n.length-1,1)}n.push(t);e(this).data("selected",n);e(this).data("last_del",null);e(this).trigger("change")};this.show=function(){if(e("#w2ui-global-items").length==0){e("body").append('<div id="w2ui-global-items" class="w2ui-reset w2ui-items" '+'style="position: absolute; z-index: 1200; display: none; -moz-box-sizing: border-box; -webkit-box-sizing: border-box;">'+"</div>")}else{return}var n=e("#w2ui-global-items");n.css({display:"block",left:e(s).offset().left+"px",top:e(s).offset().top+s.offsetHeight+"px"}).width(w2utils.getSize(s,"width")).data("position",e(s).offset().left+"x"+(e(s).offset().top+s.offsetHeight));t.list_render.call(s);var r=function(){var n=e("#w2ui-global-items");if(e(s).length==0||e(s).offset().left==0&&e(s).offset().top==0){clearInterval(e(s).data("mtimer"));hide();return}if(n.data("position")!=e(s).offset().left+"x"+(e(s).offset().top+s.offsetHeight)){n.css({"-webkit-transition":".2s",left:e(s).offset().left+"px",top:e(s).offset().top+s.offsetHeight+"px"}).data("position",e(s).offset().left+"x"+(e(s).offset().top+s.offsetHeight));setTimeout(function(){t.list_render.call(s,e(s).data("last_search"))},200)}if(n.length>0)e(s).data("mtimer",setTimeout(r,100))};e(s).data("mtimer",setTimeout(r,100))};this.hide=function(){clearTimeout(e(s).data("mtimer"));e("#w2ui-global-items").remove()};this.refresh=function(){var n=this;e(e(this).data("selected-div")).remove();var r="margin-top: "+e(this).css("margin-top")+"; "+"margin-bottom: "+e(this).css("margin-bottom")+"; "+"margin-left: "+e(this).css("margin-left")+"; "+"margin-right: "+e(this).css("margin-right")+"; "+"width: "+(w2utils.getSize(this,"width")-parseInt(e(this).css("margin-left"))-parseInt(e(this).css("margin-right")))+"px; ";var i='<div class="w2ui-list" style="'+r+';">'+"<ul>";var s=e(this).data("selected");for(var o in s){i+='<li style="'+(e(this).data("last_del")==o?"opacity: 0.5":"")+'">'+'<div title="Remove" index="'+o+'">  </div>'+s[o].text+"</li>"}i+='<li><input type="text" style="width: 10px; background-color: transparent"></li>';i+="</ul></div>";e(this).before(i);var a=e(this).prev();e(this).data("selected-div",a);var f=w2utils.getSize(a,"height")-parseInt(e(a).css("margin-top"))-parseInt(e(a).css("margin-bottom"));if(f<23)f=23;if(f>u.maxHeight)f=u.maxHeight;e(a).height(f);if(a.length>0)a[0].scrollTop=1e3;e(this).height(f);e(a).on("click",function(r){var i=r.target;if(i.title=="Remove"){e(n).data("selected").splice(e(i).attr("index"),1);e(i.parentNode).remove();n.refresh();t.list_render.call(n);e(n).trigger("change");r.stopPropagation()}e(this).find("input").focus()});e(a).find("input").on("focus",function(t){e(a).css({outline:"auto 5px -webkit-focus-ring-color","outline-offset":"-2px"});n.show();t.stopPropagation()}).on("blur",function(t){e(a).css("outline","none");n.hide();t.stopPropagation()})};e(this).data("settings",u).attr("tabindex",-1);this.refresh();break}})},list_render:function(n){var r=this;var i=e("#w2ui-global-items");var s=e(this).data("settings");var o=e(this).data("selected");if(i.length==0)return;if(typeof s.items=="undefined")s.items=[];if(typeof n=="undefined"){var u="";u+='<div style="border-radius: 4px; background-color: white; padding: 3px;">'+'	<div class="list_items" style="padding-top: 3px;"></div>'+"</div>";i.html(u);n=""}e(this).data("last_search",n);if(typeof e(r).data("last_index")=="undefined"||e(r).data("last_index")==null)e(r).data("last_index",0);if(typeof s.last_total=="undefined")s.last_total=-1;if(typeof s.last_search_len=="undefined")s.last_search_len=0;if(typeof s.last_search_match=="undefined")s.last_search_match=-1;if(s.url!=""&&(s.items.length==0&&s.last_total!=0||n.length>s.last_search_len&&s.last_total>s.maxCache||n.length<s.last_search_match&&n.length!=s.last_search_len)){var a=false;if(s.last_total<s.maxCache)a=true;e.ajax({type:"POST",dataType:"text",url:s.url,data:{search:n,max:s.maxCache},complete:function(i,o){s.last_total=0;if(o=="success"){var u=e.parseJSON(i.responseText);if(a==false&&u.total<s.maxCache){s.last_search_match=n.length}s.last_search_len=n.length;s.last_total=u.total;s.items=u.options;t.list_render.call(r,n)}}})}var f=0;var l=s.items;var c="<ul>";var h=[];for(var p in o)h.push(w2utils.isInt(o[p].id)?parseInt(o[p].id):String(o[p].id));for(var p in l){if(l[p]=="")continue;if(typeof l[p]=="object"){var d=String(l[p].text);if(d==null&&typeof l[p].caption!="undefined")d=l[p].caption;var v=l[p].id;if(v==null&&typeof l[p].value!="undefined")v=l[p].value;if(v==null||String(v)=="undefined"||v=="")v=d}if(typeof l[p]=="string"){var v=l[p];var d=l[p]}if(e.inArray(w2utils.isInt(v)?parseInt(v):String(v),h)!=-1&&s.showAll!==true)continue;var m=String(n).toLowerCase();var g=d.toLowerCase();if(m.length<=g.length&&g.substr(0,m.length)==m){if(typeof s["render"]=="function"){d=s["render"](l[p])}c+='\n<li style="display: block; -webkit-transition: 0.2s" index="'+p+'" value="'+v+'" '+"  onmouseover=\"$(this).parent().find('li').removeClass('selected'); $(this).addClass('selected'); \""+'	class="'+(f%2?"w2ui-item-even":"w2ui-item-odd")+(f==e(r).data("last_index")?" selected":"")+'">'+d+"</li>";if(f==e(r).data("last_index"))e(r).data("last_item",l[p]);f++}}c+="</ul>";if(f==0){c='<div style="padding: 2px; padding-bottom: 5px; text-align: center; color: gray">No items found</div>';var y=true}i.find(".list_items").html(c);e(this).data("last_max",f-1);if(i.find("li.selected").length>0)i.find("li.selected")[0].scrollIntoView(false);i.css({"-webkit-transition":"0s",height:"auto"});var b=parseInt(e(document).height())-parseInt(i.offset().top)-8;if(parseInt(i.height())>b){i.css({height:b-5+"px",overflow:"show"});e(i).find(".list_items").css({height:b-15+"px",overflow:"auto"})}e(i).off("mousedown").on("mousedown",function(n){var i=e(n.target).attr("index");var o=s.items[i];r.add(o);e(r).data("last_index",0);r.refresh();t.list_render.call(r,"")});e(r).prev().find("li > input").val(n).css("max-width",e(i).width()-25+"px").width((n.length+2)*6+"px").focus().on("click",function(e){e.stopPropagation()}).off("keyup").on("keyup",function(n){var i=this;setTimeout(function(){var o=e(r).data("last_index");switch(n.keyCode){case 38:o--;if(o<0)o=0;e(r).data("last_index",o);n.preventDefault();break;case 40:o++;if(o>e(r).data("last_max"))o=e(r).data("last_max");e(r).data("last_index",o);n.preventDefault();break;case 13:if(typeof e(r).data("last_item")=="undefined"||e(r).data("last_item")==null||y===true)break;var u=e(r).data("selected");r.add(e(r).data("last_item"));if(o>e(r).data("last_max")-1)o=e(r).data("last_max")-1;e(r).data("last_index",o);e(r).data("last_item",null);e(i).val("");r.refresh();n.preventDefault();break;case 8:if(i.value==""){if(typeof e(r).data("last_del")=="undefined"||e(r).data("last_del")==null){var u=e(r).data("selected");if(!e.isArray(u))u=[];e(r).data("last_del",u.length-1);r.refresh()}else{var u=e(r).data("selected");if(!e.isArray(u))u=[];if(u.length>0){u.splice(u.length-1,1)}e(r).data("selected",u);e(r).data("last_del",null);r.refresh();e(r).trigger("change")}}break;default:e(r).data("last_index",0);e(r).data("last_del",null);break}var a=e(r).prev();a.css("height","auto");var f=w2utils.getSize(a,"height")-parseInt(e(a).css("margin-top"))-parseInt(e(a).css("margin-bottom"));if(f<23)f=23;if(f>s.maxHeight)f=s.maxHeight;e(a).height(f);if(a.length>0)a[0].scrollTop=1e3;e(r).height(f);if(!(n.keyCode==8&&i.value=="")){e(r).prev().find("li").css("opacity","1");e(r).data("last_del",null)}if(e.inArray(n.keyCode,[16,91,37,39])==-1){t.list_render.call(r,i.value)}},10)})},calendar_get:function(t,n){var r=new Date;var i=Number(r.getMonth())+1+"/"+r.getDate()+"/"+(String(r.getYear()).length>3?r.getYear():r.getYear()+1900);if(t==""||String(t)=="undefined")t=i;if(!w2utils.isDate(t))t=i;var s=t.split("/");var o='<table cellpadding="0" cellspacing="0" style=""><tr>'+"<td>"+e().w2field("calendar_month",s[0],s[2],n)+"</td>"+'<!--td valign="top" style="background-color: #f4f4fe; padding: 8px; padding-bottom: 0px; padding-top: 22px; border: 1px solid silver; border-left: 0px;">'+"	Jan <br> Feb <br> Mar <br> Apr <br> May <br> Jun <br> Jul <br> Aug <br> Sep <br> Oct <br> Nov <br> Dec"+"</td>"+'<td valign="top" style="background-color: #f4f4fe; padding: 6px; padding-bottom: 0px; padding-top: 22px; border: 1px solid silver; border-left: 0px;">'+"	2001 <br> 2002 <br> 2003 <br> 2004"+"</td-->"+"</tr></table>";return o},calendar_next:function(t){var n=String(t).split("/");var r=n[0];var i=n[1];if(parseInt(r)<12){r=parseInt(r)+1}else{r=1;i=parseInt(i)+1}var s=e(e("#global_calendar_div.w2ui-calendar").data("el")).data("options");e("#global_calendar_div.w2ui-calendar").html(e().w2field("calendar_get",r+"/1/"+i,s))},calendar_previous:function(t){var n=String(t).split("/");var r=n[0];var i=n[1];if(parseInt(r)>1){r=parseInt(r)-1}else{r=12;i=parseInt(i)-1}var s=e(e("#global_calendar_div.w2ui-calendar").data("el")).data("options");e("#global_calendar_div.w2ui-calendar").html(e().w2field("calendar_get",r+"/1/"+i,s))},calendar_month:function(t,n,r){var i=new Date;var s=["January","February","March","April","May","June","July","August","September","October","November","December"];var o=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];var u=["31","28","31","30","31","30","31","31","30","31","30","31"];var a=Number(i.getMonth())+1+"/"+i.getDate()+"/"+(String(i.getYear()).length>3?i.getYear():i.getYear()+1900);n=Number(n);t=Number(t);if(n===null||n==="")n=String(i.getYear()).length>3?i.getYear():i.getYear()+1900;if(t===null||t==="")t=Number(i.getMonth())+1;if(t>12){t=t-12;n++}if(t<1||t==0){t=t+12;n--}if(n/4==Math.floor(n/4)){u[1]="29"}else{u[1]="28"}if(n==null){n=i.getYear()}if(t==null){t=i.getMonth()-1}var i=new Date;i.setDate(1);i.setMonth(t-1);i.setYear(n);var f=i.getDay();var l='<div class="w2ui-calendar-title">'+'	<div style="float: left" class="w2ui-calendar-previous" onclick="$().w2field(\'calendar_previous\', \''+t+"/"+n+"')\"> <- </div>"+'	<div style="float: right" class="w2ui-calendar-next" onclick="$().w2field(\'calendar_next\', \''+t+"/"+n+"')\"> -> </div> "+s[t-1]+", "+n+"</div>"+'<table class="w2ui-calendar-days" onclick="" cellspacing="0">'+'	<tr class="w2ui-day-title"><td>M</td> <td>T</td> <td>W</td> <td>T</td> <td>F</td> <td>S</td> <td>S</td></tr>'+"	<tr>";var c=1;for(var h=1;h<43;h++){if(f==0&&h==1){for(var p=0;p<6;p++)l+='<td class="w2ui-day-empty"> </td>';h+=6}else{if(h<f||c>u[t-1]){l+='<td class="w2ui-day-empty"> </td>';if(h%7==0)l+="</tr><tr>";continue}}var d=t+"/"+c+"/"+n;var v="";if(d==a)v="w2ui-today";if(h%7==6)v="w2ui-saturday";if(h%7==0)v="w2ui-sunday";var m=c;var g="";var y="";var b="";if(r.colored)if(r.colored[d]!=undefined){tmp=r.colored[d].split(":");y="background-color: "+tmp[0]+";";g="color: "+tmp[1]+";"}var w=false;if(r.start||r.end){var E=new Date(r.start);var S=new Date(r.end);var x=new Date(d);if(x<E||x>S){b=" w2ui-blocked-date";w=true}}if(r.blocked&&e.inArray(d,r.blocked)!=-1){b=" w2ui-blocked-date";w=true}l+='<td class="'+v+b+'" style="'+g+y+'" id="'+this.name+"_date_"+d+'" date="'+d+'"';if(w===false){l+="onclick=\"var el = $('#global_calendar_div.w2ui-calendar').data('el'); "+"	$(el).val('"+d+"').trigger('change').trigger('blur'); "+"	 event.stopPropagation(); return false;"+'"'}l+=">"+m+"</td>";if(h%7==0||f==0&&h==1)l+="</tr><tr>";c++}l+="</tr></table>";return l}}})(jQuery);(function(){var w2form=function(e){this.name=null;this.box=null;this.url="";this.form_url="";this.form_html="";this.page=0;this.recid=0;this.fields=[];this.actions={};this.record={};this.original={};this.postData={};this.tabs={};this.isLoaded=false;this.style="";this.onRequest=null,this.onLoad=null,this.onSubmit=null,this.onSave=null,this.onChange=null,this.onRender=null;this.onRefresh=null;this.onResize=null;this.onDestroy=null;this.onAction=null;this.request_xhr=null;this.save_xhr=null;$.extend(true,this,e)};$.fn.w2form=function(e){if(typeof e==="object"||!e){var t=this;if(!e||typeof e.name=="undefined"){$.error('The parameter "name" is required but not supplied in $().w2form().');return}if(typeof w2ui[e.name]!="undefined"){$.error('The parameter "name" is not unique. There are other objects already created with the same name (obj: '+e.name+").");return}var n=e.record;var r=e.original;var i=e.fields;var s=e.tabs;var o=new w2form(e);$.extend(o,{record:{},original:{},fields:[],tabs:{},handlers:[]});if($.isArray(s)){$.extend(true,o.tabs,{tabs:s})}else{$.extend(true,o.tabs,s)}for(var u in i)o.fields[u]=$.extend(true,{},i[u]);for(var u in n){if($.isPlainObject(n[u])){o.record[u]=$.extend(true,{},n[u])}else{o.record[u]=n[u]}}for(var u in r){if($.isPlainObject(r[u])){o.original[u]=$.extend(true,{},r[u])}else{o.original[u]=r[u]}}o.initTabs();if($(this).length!=0&&!o.form_url){if(!o.form_html)o.form_html=$(this).html();o.init(this);o.render($(this)[0])}else if(o.form_url){$.get(o.form_url,function(e){o.form_html=e;if($(t).length!=0){$(t).html(o.form_html);o.init(t);o.render($(t)[0])}})}w2ui[o.name]=o;return o}else if(typeof $(this).data("w2name")!="undefined"){var t=w2ui[$(this).data("w2name")];t[e].apply(t,Array.prototype.slice.call(arguments,1));return this}else{$.error("Method "+e+" does not exist on jQuery.w2form")}};w2form.prototype={init:function(e){var t=this;$(e).find("input, textarea, select").each(function(e,n){var r="text";var i=typeof $(n).attr("name")!="undefined"?$(n).attr("name"):$(n).attr("id");if(n.type=="checkbox")r="checkbox";if(n.type=="radio")r="radio";if(n.type=="password")r="password";if(n.type=="button")r="button";if(n.tagName=="select")r="list";if(n.tagName=="textarea")r="textarea";var s=r=="checkbox"||r=="radio"?$(n).attr("checked")?true:false:$(n).val();var o=t.get(i);if(o&&r!="button"){var u=$(n).parents(".w2ui-page");if(u.length>0){for(var a=0;a<100;a++){if(u.hasClass("page-"+a)){o.page=a;break}}}}else if(r!="button"){console.log('WARNING: Field "'+i+'" is present in HTML, but not defined in w2form.')}})},initTabs:function(){if(!$.isEmptyObject(this.tabs)&&typeof this.tabs["render"]=="undefined"){var e=this;this.tabs=$().w2tabs($.extend({},this.tabs,{name:this.name+"_tabs"}));this.tabs.on("click",function(t,n){e.goto(this.getIndex(t))})}return},get:function(e){for(var t in this.fields){if(this.fields[t].name==e)return this.fields[t]}return null},set:function(e,t){for(var n in this.fields){if(this.fields[n].name==e){$.extend(this.fields[n],t);return true}}return false},reload:function(e){if(this.url!=""){this.isLoaded=false;this.request(null,e)}else{this.isLoaded=true;this.refresh()}},clear:function(){this.record={};for(var e in this.fields){var t=this.fields[e];if(t.selected)delete t.selected}$().w2tag();this.refresh()},request:function(postData,url,callBack){if(typeof postData=="function"){callBack=postData;url=null;postData=null}if(typeof url=="function"){callBack=url;url=null}if(typeof postData=="undefined")postData={};if(typeof url=="undefined"||url==""||url==null)url=this.url;if(url==""||url==null)return;if(this.recid==null||typeof this.recid=="undefined")this.recid=0;var params={};params["cmd"]="get-record";params["name"]=this.name;params["recid"]=this.recid;$.extend(params,this.postData);$.extend(params,postData);var eventData=this.trigger({phase:"before",type:"request",target:this.name,url:url,postData:params});if(eventData.stop===true){if(typeof callBack=="function")callBack();return false}this.record={};this.original={};var obj=this;this.isLoaded=false;this.showStatus("Refreshing ");if(this.request_xhr)try{this.request_xhr.abort()}catch(e){}this.request_xhr=$.ajax({type:"POST",url:url+(url.indexOf("?")>-1?"&":"?")+"t="+(new Date).getTime(),data:String($.param(eventData.postData,false)).replace(/%5B/g,"[").replace(/%5D/g,"]"),dataType:"text",complete:function(xhr,status){obj.hideStatus();obj.isLoaded=true;var eventData=obj.trigger({phase:"before",target:obj.name,type:"load",data:xhr.responseText,xhr:xhr,status:status});if(eventData.stop===true){if(typeof callBack=="function")callBack();return false}if(xhr["status"]==403){document.location="login.html";return}if(typeof eventData.data!="undefined"&&eventData.data!=""){var data="data = "+eventData.data;var data=eval(data);if(data["status"]!="success"){console.log("ERROR: "+data["message"])}else{obj.record=$.extend({},data.record);obj.original=$.extend({},data.record)}}obj.trigger($.extend(eventData,{phase:"after"}));obj.refresh();if(typeof callBack=="function")callBack()}});this.trigger($.extend(eventData,{phase:"after"}))},validate:function(e){if(typeof e=="undefined")e=true;var t=[];for(var n in this.fields){var r=this.fields[n];if(this.record[r.name]==null)this.record[r.name]="";switch(r.type){case"int":if(this.record[r.name]&&!w2utils.isInt(this.record[r.name])){var i={field:r,error:"Not an integer"};t.push(i);if(e)$(r.el).w2tag(i.error,{"class":"w2ui-error"})}break;case"float":if(this.record[r.name]&&!w2utils.isFloat(this.record[r.name])){var i={field:r,error:"Not a float number"};t.push(i);if(e)$(r.el).w2tag(i.error,{"class":"w2ui-error"})}break;case"money":if(this.record[r.name]&&!w2utils.isMoney(this.record[r.name])){var i={field:r,error:"Not in money format"};t.push(i);if(e)$(r.el).w2tag(i.error,{"class":"w2ui-error"})}break;case"hex":if(this.record[r.name]&&!w2utils.isHex(this.record[r.name])){var i={field:r,error:"Not a hex number"};t.push(i);if(e)$(r.el).w2tag(i,{"class":"w2ui-error"})}break;case"email":if(this.record[r.name]&&!w2utils.isEmail(this.record[r.name])){var i={field:r,error:"Not a valid email"};t.push(i);if(e)$(r.el).w2tag(i.error,{"class":"w2ui-error"})}break;case"checkbox":if(this.record[r.name]==true)this.record[r.name]=1;else this.record[r.name]=0;break;case"date":if(this.record[r.name]&&!w2utils.isDate(this.record[r.name])){var i={field:r,error:"Not a valid date (mm/dd/yyyy)"};t.push(i);if(e)$(r.el).w2tag(i.error,{"class":"w2ui-error"})}else{}break;case"list":case"enum":var s=$(r.el).data("selected");if(!$.isArray(s))s=[];switch(s.length){case 0:this.record[r.name]="";break;case 1:this.record[r.name]=s[0].id;break;default:this.record[r.name]=[];for(var o in s){this.record[r.name].push(s[o].id)}break}break}if(r.required&&!this.record[r.name]){var i={field:r,error:"Required field"};t.push(i);if(e)$(r.el).w2tag(i.error,{"class":"w2ui-error"})}}return t},save:function(postData,url,callBack){var obj=this;if(typeof postData=="function"){callBack=postData;url=null;postData=null}if(typeof url=="function"){callBack=url;url=null}var errors=this.validate(true);if(errors.length!==0){this.goto(errors[0].field.page);return}if(typeof postData=="undefined"||postData==null)postData={};if(typeof url=="undefined"||url==""||url==null)url=this.url;if(url==""||url==null)return;this.showStatus("Saving...");var params={};params["cmd"]="save-record";params["name"]=this.name;params["recid"]=this.recid;$.extend(params,this.postData);$.extend(params,postData);params.record=$.extend(true,{},this.record);for(var f in this.fields){var field=this.fields[f];switch(String(field.type).toLowerCase()){case"date":params.record[field.name]=w2utils.formatDate(params.record[field.name],"yyyy-mm-dd");break}}var eventData=this.trigger({phase:"before",type:"submit",target:this.name,url:url,postData:params});if(eventData.stop===true){if(typeof callBack=="function")callBack();return false}if(this.save_xhr)try{this.save_xhr.abort()}catch(e){}this.save_xhr=$.ajax({type:"POST",url:url+(url.indexOf("?")>-1?"&":"?")+"t="+(new Date).getTime(),data:String($.param(eventData.postData,false)).replace(/%5B/g,"[").replace(/%5D/g,"]"),dataType:"text",complete:function(xhr,status){obj.hideStatus();var eventData=obj.trigger({phase:"before",target:obj.name,type:"save",data:xhr.responseText,xhr:xhr,status:status});if(eventData.stop===true){if(typeof callBack=="function")callBack();return false}if(xhr["status"]==403){document.location="login.html";return}try{if(typeof eventData.data!="undefined"&&eventData.data!=""&&$.parseJSON(eventData.data)!==false){var data="data = "+eventData.data;var data=eval(data);if(data["status"]!="success"){console.log("ERROR: "+data["message"])}else{obj.original=$.extend({},obj.record)}}}catch(e){var data={};data["status"]="error";data["message"]="Server did not return JSON structure."}obj.trigger($.extend(eventData,{phase:"after"}));obj.refresh();if(typeof callBack=="function")callBack(data)}});this.trigger($.extend(eventData,{phase:"after"}))},showStatus:function(e){},hideStatus:function(e){},doAction:function(e,t){var n=this.trigger({phase:"before",target:e,type:"action",event:t});if(n.stop===true)return false;if(typeof this.actions[e]=="function"){this.actions[e].call(this,t)}this.trigger($.extend(n,{phase:"after"}))},resize:function(e,t){var n=this.trigger({phase:"before",target:this.name,type:"resize",width:e,height:t});if(n.stop===true)return false;this.trigger($.extend(n,{phase:"after"}))},"goto":function(e){if(typeof e!="undefined")this.page=e;this.refresh()},refresh:function(){var e=this;var t=this.trigger({phase:"before",target:this.name,type:"refresh",page:this.page});if(t.stop===true)return false;$(this.box).find(".w2ui-page").hide();$(this.box).find(".w2ui-page.page-"+this.page).show();if(typeof this.tabs=="object"&&typeof this.tabs.refresh=="function"){$("#form_"+this.name+"_tabs").show();this.tabs.active=this.tabs.tabs[this.page].id;this.tabs.refresh()}else{$("#form_"+this.name+"_tabs").hide()}for(var n in this.fields){var r=this.fields[n];r.el=$(this.box).find('[name="'+r.name+'"]')[0];if(typeof r.el=="undefined"){console.log('ERROR: Cannot associate field "'+r.name+'" with html control. Make sure html control exists with the same name.');return}r.el.id=r.name;$(r.el).off("change").on("change",function(){var t=this.value;var n=e.record[this.name]?e.record[this.name]:"";if($(this).data("selected")){var r=$(this).data("selected");var i=e.get(this.name).selected;var t=[];var n=[];if($.isArray(r))for(var s in r)t[s]=$.extend(true,{},r[s]);if($.isArray(i))for(var s in i)n[s]=$.extend(true,{},i[s]);e.get(this.name).selected=t}var o=e.trigger({phase:"before",target:this.name,type:"change",value_new:t,value_previous:n});if(o.stop===true){$(this).val(e.record[this.name]);return false}var u=this.value;if(this.type=="checkbox")u=this.checked?true:false;if(this.type=="radio")u=this.checked?true:false;e.record[this.name]=u;e.trigger($.extend(o,{phase:"after"}))});if(r.required){$(r.el).parent().addClass("w2ui-required")}else{$(r.el).parent().removeClass("w2ui-required")}}$(this.box).find("button, input[type=button]").each(function(t,n){$(n).off("click").on("click",function(t){var n=this.value;if(this.name)n=this.name;if(this.id)n=this.id;e.doAction(n,t)})});for(var n in this.fields){var r=this.fields[n];var i=typeof this.record[r.name]!="undefined"?this.record[r.name]:"";switch(String(r.type).toLowerCase()){case"email":case"text":r.el.value=i;break;case"date":r.el.value=w2utils.formatDate(i,"mm/dd/yyyy");this.record[r.name]=r.el.value;$(r.el).w2field("date");break;case"int":r.el.value=i;$(r.el).w2field("int");break;case"float":r.el.value=i;$(r.el).w2field("float");break;case"money":r.el.value=i;$(r.el).w2field("money");break;case"hex":r.el.value=i;$(r.el).w2field("hex");break;case"alphanumeric":r.el.value=i;$(r.el).w2field("alphaNumeric");break;case"checkbox":if(this.record[r.name]==true||this.record[r.name]==1||this.record[r.name]=="t"){$(r.el).attr("checked",true)}else{$(r.el).removeAttr("checked")}break;case"password":r.el.value=i;break;case"list":r.options.max=1;r.options.showAll=true;case"enum":if(typeof r.options=="undefined"||typeof r.options.url=="undefined"&&typeof r.options.items=="undefined"){console.log("ERROR: (w2form."+e.name+") the field "+r.name+" defined as enum but not field.options.url or field.options.items provided.");break}var s=i;if(r.selected)s=r.selected;$(r.el).w2field($.extend({},r.options,{type:"enum",selected:s}));break;default:console.log('ERROR: field type "'+r.type+'" is not recognized.');break}}this.trigger($.extend(t,{phase:"after"}))},render:function(e){var t=this.trigger({phase:"before",target:this.name,type:"render",box:typeof e!="undefined"?e:this.box});if(t.stop===true)return false;if(typeof e!="undefined")this.box=e;var n='<div id="form_'+this.name+'_tabs" class="w2ui-form-tabs"></div>'+this.form_html;$(this.box).html(n).addClass("w2ui-reset w2ui-form");if($(this.box).length>0)$(this.box)[0].style.cssText+=this.style;this.initTabs();if(typeof this.tabs=="object"&&typeof this.tabs.render=="function"){this.tabs.render($("#form_"+this.name+"_tabs")[0])}this.trigger($.extend(t,{phase:"after"}));if(this.url!=""&&this.recid!=0)this.request();else this.refresh()},destroy:function(){var e=this.trigger({phase:"before",target:this.name,type:"destroy"});if(e.stop===true)return false;if(typeof this.tabs=="object"&&this.tabs.destroy)this.tabs.destroy();$(this.box).html("");delete w2ui[this.name];this.trigger($.extend(e,{phase:"after"}))}};$.extend(w2form.prototype,$.w2event)})()